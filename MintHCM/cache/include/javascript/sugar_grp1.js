
var AlertObj=function(){this.title='Alert';this.options={};this.options.body=' ';this.options.url_redirect='';this.options.target_module='';this.options.type='info';};var Alerts=function(){};Alerts.prototype.replaceMessages=[];Alerts.prototype.enable=function(){var alert=new AlertObj();if(!("Notification"in window)){alert.title=SUGAR.language.translate('app_strings','MSG_BROWSER_NOTIFICATIONS_UNSUPPORTED');Alerts.prototype.show(alert);return;}
Notification.requestPermission(function(permission){if(permission==="granted"){alert.title=SUGAR.language.translate('app_strings','MSG_BROWSER_NOTIFICATIONS_ENABLED');}else{alert.title=SUGAR.language.translate('app_strings','MSG_BROWSER_NOTIFICATIONS_DISABLED');}
Alerts.prototype.show(alert);});};Alerts.prototype.requestPermission=function(){if(!("Notification"in window)){return;}
Notification.requestPermission();};Alerts.prototype.show=function(AlertObj){Alerts.prototype.requestPermission();if(("Notification"in window)){if(Notification.permission==="granted"){if(typeof AlertObj.options!=="undefined"){if(typeof AlertObj.options.target_module!=="undefined"){SUGAR.themes.theme_name=undefined;AlertObj.options.icon='index.php?entryPoint=getImage&themeName='+
SUGAR.themes.theme_name+'&imageName='+
AlertObj.options.target_module+'s.gif';}
if(typeof AlertObj.options.type==="undefined"){AlertObj.options.type='info';}}
var notification=new Notification(AlertObj.title,AlertObj.options);if(typeof AlertObj.options!=="undefined"){if(typeof AlertObj.options.url_redirect!=="undefined"){notification.onclick=function(){window.open(AlertObj.options.url_redirect);}}}}else{var message=AlertObj.title;if(typeof AlertObj.options!=="undefined"){if(typeof AlertObj.options.body!=="undefined"){message+='\n'+AlertObj.options.body;}
message+=SUGAR.language.translate('app_strings','MSG_JS_ALERT_MTG_REMINDER_CALL_MSG')+"\n\n";if(confirm(message)){if(typeof AlertObj.options!=="undefined"){if(typeof AlertObj.options.url_redirect!=="undefined"){window.location=AlertObj.options.url_redirect;}}
Alerts.prototype.markPopupAsDeleted(AlertObj.id);}else{Alerts.prototype.addToManager(AlertObj);Alerts.prototype.markPopupAsDeleted(AlertObj.id);}}}}};Alerts.prototype.addToManager=function(AlertObj){var url='index.php',name=AlertObj.title,description,url_redirect,is_read=0,target_module,type='info';if(typeof AlertObj.options!=="undefined"){if(typeof AlertObj.options.url_redirect!=="undefined"){url_redirect=AlertObj.options.url_redirect}
if(typeof AlertObj.options.body!=="undefined"){description=AlertObj.options.body}
if(typeof AlertObj.options.target_module!=="undefined"){target_module=AlertObj.options.target_module}
if(typeof AlertObj.options.type!=="undefined"){type=AlertObj.options.type}
if(typeof AlertObj.options.reminder_id!=="undefined"){reminder_id=AlertObj.options.reminder_id}}
$.post(url,{module:'Alerts',action:'add',name:name,description:description,url_redirect:url_redirect,is_read:is_read,target_module:target_module,reminder_id:reminder_id,type:type}).done(function(jsonData){data=JSON.parse(jsonData);if(typeof data!=='undefined'&&typeof data.result!=='undefined'&&data.result===1){Alerts.prototype.show(AlertObj);}}).fail(function(data){console.error(data);}).always(function(){Alerts.prototype.updateManager();});};Alerts.prototype.redirectToLogin=function(){var getQueryParams=function(qs){qs=qs.split('+').join(' ');var params={},tokens,re=/[?&]?([^=]+)=([^&]*)/g;while(tokens=re.exec(qs)){params[decodeURIComponent(tokens[1])]=decodeURIComponent(tokens[2]);}
return params;};var params=getQueryParams(document.location.search);params.entryPoint=undefined;if(params.entryPoint!=='Changenewpassword'&&params.module!=='Users'&&params.action!=='Login'){document.location.href='index.php?module=Users&action=Login&loginErrorMessage=LBL_SESSION_EXPIRED';return true;}
return false;};Alerts.prototype.updateManager=function(){var url='index.php?module=Alerts&action=get&to_pdf=1&view=json';$.ajax(url).done(function(data){if(data==='lost session'){Alerts.prototype.redirectToLogin();return false;}
data=JSON.parse(data);if(!!data.mint&&!!data.mint.notifications&&data.mint.notifications.length>0){let webpush_enabled=("Notification"in window)&&Notification.permission==="granted";for(mint_notification=0;mint_notification<data.mint.notifications.length;mint_notification++){if(webpush_enabled){Alerts.prototype.show(data.mint.notifications[mint_notification]);}
Alerts.prototype.markAsRead(data.mint.notifications[mint_notification].id);}}
if(!!data.standard){data=data.standard;}
for(var replaceMessage in Alerts.prototype.replaceMessages){data=data.replace(Alerts.prototype.replaceMessages[replaceMessage].search,Alerts.prototype.replaceMessages[replaceMessage].replace);}
var alertsDiv=$('.desktop_notifications #alerts');alertsDiv.html(data);var alerts=$('<div></div>');$(data).appendTo(alerts);var alertCount=$(alerts).children('.alert').length;var alertCountDiv=$('.alert_count');var desktopNotificationsDiv=$('.desktop_notifications');var alertButtonDiv=$('.alertsButton');if(typeof favicon==='undefined'){favicon=new Favico({animation:'none'});}
favicon.badge(alertCount);alertCountDiv.html(alertCount);if(alertCount>0){alertsDiv.addClass('has-alerts');desktopNotificationsDiv.addClass('has-alerts');alertButtonDiv.removeClass('btn-').addClass('btn-danger');alertCountDiv.removeClass('hidden');}else{desktopNotificationsDiv.removeClass('has-alerts');alertsDiv.removeClass('has-alerts');alertButtonDiv.removeClass('btn-danger').addClass('btn-success');alertCountDiv.addClass('hidden');}});};Alerts.prototype.markAsRead=function(id){var url='index.php?module=Alerts&action=markAsRead&record='+id+'&to_pdf=1';$.ajax(url).done(function(){Alerts.prototype.updateManager();});};Alerts.prototype.markPopupAsDeleted=function(id){var url='index.php?module=Reminders&action=markPopupAsDeleted&record='+id+'&to_pdf=1';$.ajax(url).done(function(){});};$(document).ready(function(){Alerts.prototype.replaceMessages=[{search:SUGAR.language.translate("app","MSG_JS_ALERT_MTG_REMINDER_CALL_MSG"),replace:""},{search:SUGAR.language.translate("app","MSG_JS_ALERT_MTG_REMINDER_MEETING_MSG"),replace:""}];var updateMissed=function(){Alerts.prototype.updateManager();setTimeout(updateMissed,60000);};setTimeout(updateMissed,2000);});/* End of File include/javascript/alerts.js */

!function(){var e=function(e){"use strict";function t(e){if(e.paused||e.ended||g)return!1;try{f.clearRect(0,0,s,l),f.drawImage(e,0,0,s,l)}catch(o){}p=setTimeout(function(){t(e)},S.duration),O.setIcon(h)}function o(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,o,n){return t+t+o+o+n+n});var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:!1}function n(e,t){var o,n={};for(o in e)n[o]=e[o];for(o in t)n[o]=t[o];return n}function r(){return b.hidden||b.msHidden||b.webkitHidden||b.mozHidden}e=e?e:{};var i,a,l,s,h,f,c,d,u,y,w,g,x,m,p,b,v={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1,dataUrl:!1,win:window};x={},x.ff="undefined"!=typeof InstallTrigger,x.chrome=!!window.chrome,x.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0,x.ie=/*@cc_on!@*/!1,x.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,x.supported=x.chrome||x.ff||x.opera;var C=[];w=function(){},d=g=!1;var E=function(){i=n(v,e),i.bgColor=o(i.bgColor),i.textColor=o(i.textColor),i.position=i.position.toLowerCase(),i.animation=S.types[""+i.animation]?i.animation:v.animation,b=i.win.document;var t=i.position.indexOf("up")>-1,r=i.position.indexOf("left")>-1;if(t||r)for(var d=0;d<S.types[""+i.animation].length;d++){var u=S.types[""+i.animation][d];t&&(u.y=u.y<.6?u.y-.4:u.y-2*u.y+(1-u.w)),r&&(u.x=u.x<.6?u.x-.4:u.x-2*u.x+(1-u.h)),S.types[""+i.animation][d]=u}i.type=A[""+i.type]?i.type:v.type,a=O.getIcon(),h=document.createElement("canvas"),c=document.createElement("img"),a.hasAttribute("href")?(c.setAttribute("crossOrigin","anonymous"),c.onload=function(){l=c.height>0?c.height:32,s=c.width>0?c.width:32,h.height=l,h.width=s,f=h.getContext("2d"),M.ready()},c.setAttribute("src",a.getAttribute("href"))):(c.onload=function(){l=32,s=32,c.height=l,c.width=s,h.height=l,h.width=s,f=h.getContext("2d"),M.ready()},c.setAttribute("src",""))},M={};M.ready=function(){d=!0,M.reset(),w()},M.reset=function(){d&&(C=[],u=!1,y=!1,f.clearRect(0,0,s,l),f.drawImage(c,0,0,s,l),O.setIcon(h),window.clearTimeout(m),window.clearTimeout(p))},M.start=function(){if(d&&!y){var e=function(){u=C[0],y=!1,C.length>0&&(C.shift(),M.start())};if(C.length>0){y=!0;var t=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(e){e in C[0].options&&(i[e]=C[0].options[e])}),S.run(C[0].options,function(){e()},!1)};u?S.run(u.options,function(){t()},!0):t()}}};var A={},I=function(e){return e.n="number"==typeof e.n?Math.abs(0|e.n):e.n,e.x=s*e.x,e.y=l*e.y,e.w=s*e.w,e.h=l*e.h,e.len=(""+e.n).length,e};A.circle=function(e){e=I(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),f.clearRect(0,0,s,l),f.drawImage(c,0,0,s,l),f.beginPath(),f.font=i.fontStyle+" "+Math.floor(e.h*(e.n>99?.85:1))+"px "+i.fontFamily,f.textAlign="center",t?(f.moveTo(e.x+e.w/2,e.y),f.lineTo(e.x+e.w-e.h/2,e.y),f.quadraticCurveTo(e.x+e.w,e.y,e.x+e.w,e.y+e.h/2),f.lineTo(e.x+e.w,e.y+e.h-e.h/2),f.quadraticCurveTo(e.x+e.w,e.y+e.h,e.x+e.w-e.h/2,e.y+e.h),f.lineTo(e.x+e.h/2,e.y+e.h),f.quadraticCurveTo(e.x,e.y+e.h,e.x,e.y+e.h-e.h/2),f.lineTo(e.x,e.y+e.h/2),f.quadraticCurveTo(e.x,e.y,e.x+e.h/2,e.y)):f.arc(e.x+e.w/2,e.y+e.h/2,e.h/2,0,2*Math.PI),f.fillStyle="rgba("+i.bgColor.r+","+i.bgColor.g+","+i.bgColor.b+","+e.o+")",f.fill(),f.closePath(),f.beginPath(),f.stroke(),f.fillStyle="rgba("+i.textColor.r+","+i.textColor.g+","+i.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?f.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):f.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),f.closePath()},A.rectangle=function(e){e=I(e);var t=!1;2===e.len?(e.x=e.x-.4*e.w,e.w=1.4*e.w,t=!0):e.len>=3&&(e.x=e.x-.65*e.w,e.w=1.65*e.w,t=!0),f.clearRect(0,0,s,l),f.drawImage(c,0,0,s,l),f.beginPath(),f.font=i.fontStyle+" "+Math.floor(e.h*(e.n>99?.9:1))+"px "+i.fontFamily,f.textAlign="center",f.fillStyle="rgba("+i.bgColor.r+","+i.bgColor.g+","+i.bgColor.b+","+e.o+")",f.fillRect(e.x,e.y,e.w,e.h),f.fillStyle="rgba("+i.textColor.r+","+i.textColor.g+","+i.textColor.b+","+e.o+")","number"==typeof e.n&&e.n>999?f.fillText((e.n>9999?9:Math.floor(e.n/1e3))+"k+",Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.2*e.h)):f.fillText(e.n,Math.floor(e.x+e.w/2),Math.floor(e.y+e.h-.15*e.h)),f.closePath()};var T=function(e,t){t=("string"==typeof t?{animation:t}:t)||{},w=function(){try{if("number"==typeof e?e>0:""!==e){var n={type:"badge",options:{n:e}};if("animation"in t&&S.types[""+t.animation]&&(n.options.animation=""+t.animation),"type"in t&&A[""+t.type]&&(n.options.type=""+t.type),["bgColor","textColor"].forEach(function(e){e in t&&(n.options[e]=o(t[e]))}),["fontStyle","fontFamily"].forEach(function(e){e in t&&(n.options[e]=t[e])}),C.push(n),C.length>100)throw new Error("Too many badges requests in queue.");M.start()}else M.reset()}catch(r){throw new Error("Error setting badge. Message: "+r.message)}},d&&w()},U=function(e){w=function(){try{var t=e.width,o=e.height,n=document.createElement("img"),r=o/l>t/s?t/s:o/l;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){f.clearRect(0,0,s,l),f.drawImage(n,0,0,s,l),O.setIcon(h)},n.setAttribute("src",e.getAttribute("src")),n.height=o/r,n.width=t/r}catch(i){throw new Error("Error setting image. Message: "+i.message)}},d&&w()},R=function(e){w=function(){try{if("stop"===e)return g=!0,M.reset(),void(g=!1);e.addEventListener("play",function(){t(this)},!1)}catch(o){throw new Error("Error setting video. Message: "+o.message)}},d&&w()},L=function(e){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(e){return e}),x.supported){var o=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,w=function(){try{if("stop"===e)return g=!0,M.reset(),void(g=!1);o=document.createElement("video"),o.width=s,o.height=l,navigator.getUserMedia({video:!0,audio:!1},function(e){o.src=URL.createObjectURL(e),o.play(),t(o)},function(){})}catch(n){throw new Error("Error setting webcam. Message: "+n.message)}},d&&w()}},O={};O.getIcon=function(){var e=!1,t=function(){for(var e=b.getElementsByTagName("head")[0].getElementsByTagName("link"),t=e.length,o=t-1;o>=0;o--)if(/(^|\s)icon(\s|$)/i.test(e[o].getAttribute("rel")))return e[o];return!1};return i.element?e=i.element:i.elementId?(e=b.getElementById(i.elementId),e.setAttribute("href",e.getAttribute("src"))):(e=t(),e===!1&&(e=b.createElement("link"),e.setAttribute("rel","icon"),b.getElementsByTagName("head")[0].appendChild(e))),e.setAttribute("type","image/png"),e},O.setIcon=function(e){var t=e.toDataURL("image/png");if(i.dataUrl&&i.dataUrl(t),i.element)i.element.setAttribute("href",t),i.element.setAttribute("src",t);else if(i.elementId){var o=b.getElementById(i.elementId);o.setAttribute("href",t),o.setAttribute("src",t)}else if(x.ff||x.opera){var n=a;a=b.createElement("link"),x.opera&&a.setAttribute("rel","icon"),a.setAttribute("rel","icon"),a.setAttribute("type","image/png"),b.getElementsByTagName("head")[0].appendChild(a),a.setAttribute("href",t),n.parentNode&&n.parentNode.removeChild(n)}else a.setAttribute("href",t)};var S={};return S.duration=40,S.types={},S.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],S.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],S.run=function(e,t,o,a){var l=S.types[r()?"none":i.animation];return a=o===!0?"undefined"!=typeof a?a:l.length-1:"undefined"!=typeof a?a:0,t=t?t:function(){},a<l.length&&a>=0?(A[i.type](n(e,l[a])),m=setTimeout(function(){o?a-=1:a+=1,S.run(e,t,o,a)},S.duration),O.setIcon(h),void 0):void t()},E(),{badge:T,video:R,image:U,webcam:L,reset:M.reset,browser:{supported:x.supported}}};"undefined"!=typeof define&&define.amd?define([],function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:this.Favico=e}();/* End of File include/javascript/favico.js */


if(typeof(SUGAR)=="undefined"){SUGAR={namespace:function(ns){SUGAR[ns]=SUGAR[ns]||{};return((typeof SUGAR[ns]==="object")&&(SUGAR[ns]!==null))?SUGAR[ns]:false;},append:function(target,obj){for(var prop in obj){if(obj[prop]!==void 0)
target[prop]=obj[prop];}
return target;}};}
SUGAR.namespace("themes");SUGAR.namespace("tour");SUGAR.namespace("sugarHome");SUGAR.namespace("subpanelUtils");SUGAR.namespace("ajaxStatusClass");SUGAR.namespace("tabChooser");SUGAR.namespace("utils");SUGAR.namespace("savedViews");SUGAR.namespace("dashlets");SUGAR.namespace("unifiedSearchAdvanced");SUGAR.namespace("searchForm");SUGAR.namespace("language");SUGAR.namespace("Studio");SUGAR.namespace("contextMenu");SUGAR.namespace("config");var nameIndex=0;var typeIndex=1;var requiredIndex=2;var msgIndex=3;var jstypeIndex=5;var minIndex=10;var maxIndex=11;var altMsgIndex=15;var compareToIndex=7;var arrIndex=12;var operatorIndex=13;var callbackIndex=16;var allowblank=8;var validate=new Array();var maxHours=24;var requiredTxt='Missing Required Field:';var invalidTxt='Invalid Value:';var scriptStartedTime=Date.now();var alertsTimeoutId;var inputsWithErrors=inputsWithErrors||[];var tabsWithErrors=new Array();var lastSubmitTime=0;var alertList=new Array();var oldStartsWith='';function isSupportedIE(){var userAgent=navigator.userAgent.toLowerCase();if(userAgent.indexOf("msie")!=-1&&userAgent.indexOf("mac")==-1&&userAgent.indexOf("opera")==-1){var version=navigator.appVersion.match(/MSIE (\d+\.\d+)/)[1];if(version>=5.5&&version<10){return true;}else{return false;}}}
function checkMinSupported(c,s){var current=c.split(".");var supported=s.split(".");for(var i in supported){if(current[i]&&parseInt(current[i])>parseInt(supported[i]))
return true;else if(current[i]&&parseInt(current[i])<parseInt(supported[i]))
return false;}
return true;}
function checkMaxSupported(c,s){var current=c.split(".");var supported=s.split(".");for(var i in supported){if(current[i]&&parseInt(current[i])>parseInt(supported[i]))
return false;else if(current[i]&&parseInt(current[i])<parseInt(supported[i]))
return true;}
return true;}
SUGAR.isSupportedBrowser=function(){var supportedBrowsers={msie:{min:9,max:11},safari:{min:534},mozilla:{min:31.0},chrome:{min:37}};var current=String($.browser.version);var supported;if($.browser.msie||(!(window.ActiveXObject)&&"ActiveXObject"in window)){supported=supportedBrowsers['msie'];}else if($.browser.mozilla){supported=supportedBrowsers['mozilla'];}else{$.browser.chrome=/chrome/.test(navigator.userAgent.toLowerCase());if($.browser.chrome){current=navigator.userAgent.match(/Chrome\/(.*?) /)[1];supported=supportedBrowsers['chrome'];}else if($.browser.safari){supported=supportedBrowsers['safari'];}}
if(current&&supported)
return checkMinSupported(current,String(supported.min))&&(!supported.max||checkMaxSupported(current,String(supported.max)));else
return false;}
SUGAR.isIECompatibilityMode=function(){var agentStr=navigator.userAgent;var mode=false;if(agentStr.indexOf("MSIE 7.0")>-1&&(agentStr.indexOf("Trident/5.0")>-1||agentStr.indexOf("Trident/4.0")>-1)){mode=true;}
return mode;}
SUGAR.isIE=isSupportedIE();var isSafari=(navigator.userAgent.toLowerCase().indexOf('safari')!=-1);RegExp.escape=function(text){if(!arguments.callee.sRE){var specials=['/','.','*','+','?','|','(',')','[',']','{','}','\\'];arguments.callee.sRE=new RegExp('(\\'+specials.join('|\\')+')','g');}
return text.replace(arguments.callee.sRE,'\\$1');}
function addAlert(type,name,subtitle,description,time,redirect,reminder_id){var addIndex=alertList.length;alertList[addIndex]=new Array();alertList[addIndex]['name']=name;alertList[addIndex]['type']=type;alertList[addIndex]['subtitle']=subtitle;alertList[addIndex]['description']=replaceHTMLChars(description.replace(/<br>/gi,"\n"));alertList[addIndex]['time']=time;alertList[addIndex]['done']=0;alertList[addIndex]['redirect']=redirect;if(typeof reminder_id!=='undefined'){alertList[addIndex]['reminder_id']=reminder_id;}}
function checkAlerts(){var secondsSinceLoad=(Date.now()-scriptStartedTime)/ 1000;var mj=0;var alertmsg='';for(mj=0;mj<alertList.length;mj++){if(alertList[mj]['done']==0){if(alertList[mj]['time']<secondsSinceLoad&&alertList[mj]['time']>-1){alertList[mj]['done']=1;if(typeof Alerts!=="undefined"){Alerts.prototype.addToManager({title:alertList[mj]['type']+": "+alertList[mj]['name'],options:{body:alertList[mj]['subtitle']+"\n"+alertList[mj]['description']+"\n\n",url_redirect:alertList[mj]['redirect'],target_module:alertList[mj]['type'],reminder_id:alertList[mj]['reminder_id']}});}else{alertmsg=alertList[mj]['type']+":"+alertList[mj]['name']+"\n"+alertList[mj]['subtitle']+"\n"+alertList[mj]['description']+"\n\n";alertList[mj]['done']=1;alertmsg=alertList[mj]['type']+":"+alertList[mj]['name']+"\n"+alertList[mj]['subtitle']+"\n"+alertList[mj]['description']+"\n\n";alertList[mj]['done']=1;if(alertList[mj]['redirect']==''){alert(alertmsg);}else if(confirm(alertmsg)){window.location=alertList[mj]['redirect'];}}}}}
alertsTimeoutId=setTimeout("checkAlerts()",1000);}
function toggleDisplay(id){if(this.document.getElementById(id).style.display=='none'){this.document.getElementById(id).style.display='';if(this.document.getElementById(id+"link")!=undefined){this.document.getElementById(id+"link").style.display='none';}
if(this.document.getElementById(id+"_anchor")!=undefined)
this.document.getElementById(id+"_anchor").innerHTML='[ - ]';}else{this.document.getElementById(id).style.display='none';if(this.document.getElementById(id+"link")!=undefined){this.document.getElementById(id+"link").style.display='';}
if(this.document.getElementById(id+"_anchor")!=undefined)
this.document.getElementById(id+"_anchor").innerHTML='[+]';}}
function checkAll(form,field,value){for(i=0;i<form.elements.length;i++){if(form.elements[i].name==field)
form.elements[i].checked=value;}}
function replaceAll(text,src,rep){offset=text.toLowerCase().indexOf(src.toLowerCase());while(offset!=-1){text=text.substring(0,offset)+rep+text.substring(offset+src.length,text.length);offset=text.indexOf(src,offset+rep.length+1);}
return text;}
function addForm(formname){validate[formname]=new Array();}
function addToValidate(formname,name,type,required,msg){if(typeof validate[formname]=='undefined'){addForm(formname);}
validate[formname][validate[formname].length]=new Array(name,type,required,msg);}
function addToValidateCallback(formname,name,type,required,msg,callback){addToValidate(formname,name,type,required,msg);var iIndex=validate[formname].length-1;validate[formname][iIndex][jstypeIndex]='callback';validate[formname][iIndex][callbackIndex]=callback;}
function addToValidateRange(formname,name,type,required,msg,min,max){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='range';validate[formname][validate[formname].length-1][minIndex]=min;validate[formname][validate[formname].length-1][maxIndex]=max;}
function addToValidateIsValidDate(formname,name,type,required,msg){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='date';}
function addToValidateIsValidTime(formname,name,type,required,msg){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='time';}
function addToValidateDateBefore(formname,name,type,required,msg,compareTo){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='isbefore';validate[formname][validate[formname].length-1][compareToIndex]=compareTo;}
function addToValidateDateBeforeAllowBlank(formname,name,type,required,msg,compareTo,allowBlank){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='isbefore';validate[formname][validate[formname].length-1][compareToIndex]=compareTo;validate[formname][validate[formname].length-1][allowblank]=allowBlank;}
function addToValidateBinaryDependency(formname,name,type,required,msg,compareTo){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='binarydep';validate[formname][validate[formname].length-1][compareToIndex]=compareTo;}
function addToValidateComparison(formname,name,type,required,msg,compareTo){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='comparison';validate[formname][validate[formname].length-1][compareToIndex]=compareTo;}
function addToValidateIsInArray(formname,name,type,required,msg,arr,operator){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='in_array';validate[formname][validate[formname].length-1][arrIndex]=arr;validate[formname][validate[formname].length-1][operatorIndex]=operator;}
function addToValidateVerified(formname,name,type,required,msg,arr,operator){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='verified';}
function addToValidateLessThan(formname,name,type,required,msg,max,max_field_msg){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='less';validate[formname][validate[formname].length-1][maxIndex]=max;validate[formname][validate[formname].length-1][altMsgIndex]=max_field_msg;}
function addToValidateMoreThan(formname,name,type,required,msg,min){addToValidate(formname,name,type,required,msg);validate[formname][validate[formname].length-1][jstypeIndex]='more';validate[formname][validate[formname].length-1][minIndex]=min;}
function removeFromValidate(formname,name){for(i=0;i<validate[formname].length;i++){if(validate[formname][i][nameIndex]==name){validate[formname].splice(i--,1);}}}
function checkValidate(formname,name){if(validate[formname]){for(i=0;i<validate[formname].length;i++){if(validate[formname][i][nameIndex]==name){return true;}}}
return false;}
var formsWithFieldLogic=null;var formWithPrecision=null;function addToValidateFieldLogic(formId,minFieldId,maxFieldId,defaultFieldId,lenFieldId,type,msg){this.formId=document.getElementById(formId);this.min=document.getElementById(minFieldId);this.max=document.getElementById(maxFieldId);this._default=document.getElementById(defaultFieldId);this.len=document.getElementById(lenFieldId);this.msg=msg;this.type=type;}

//@params: formid- Dom id of the form containing the precision and float fields
function addToValidatePrecision(formId,valueId,precisionId){this.form=document.getElementById(formId);this.float=document.getElementById(valueId);this.precision=document.getElementById(precisionId);}
function isValidPrecision(value,precision){value=trim(value.toString());if(precision=='')
return true;if(value=='')
return true;if((precision=="0")){if(value.indexOf(dec_sep)==-1){return true;}else{return false;}}
if(value.charAt(value.length-precision-1)==num_grp_sep){if(value.substr(value.indexOf(dec_sep),1)==dec_sep){return false;}
return true;}
var actualPrecision=value.substr(value.indexOf(dec_sep)+1,value.length).length;return actualPrecision==precision;}
function toDecimal(original,precision){precision=(precision==null)?2:precision;num=Math.pow(10,precision);temp=Math.round(original*num)/ num;if((temp*100)%100==0)
return temp+'.00';if((temp*10)%10==0)
return temp+'0';return temp}
function isInteger(s){if(typeof num_grp_sep!='undefined'&&typeof dec_sep!='undefined'){s=unformatNumberNoParse(s,num_grp_sep,dec_sep).toString();}
return /^[+-]?[0-9]*$/.test(s);}
function isDecimal(s){if(typeof s=="string"&&s=="")
return true;if(typeof num_grp_sep!='undefined'&&typeof dec_sep!='undefined'){s=unformatNumberNoParse(s,num_grp_sep,dec_sep).toString();}
return /^[+-]?[0-9]*\.?[0-9]*$/.test(s);}
function isNumeric(s){return isDecimal(s);}
if(typeof date_reg_positions!="object")
var date_reg_positions={'Y':1,'m':2,'d':3};if(typeof date_reg_format!="string")
var date_reg_format='([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})';function isDate(dtStr){if(dtStr.length==0){return true;}
myregexp=new RegExp(date_reg_format)
if(!myregexp.test(dtStr))
return false
m='';d='';y='';var dateParts=dtStr.match(date_reg_format);for(key in date_reg_positions){index=date_reg_positions[key];if(key=='m'){m=dateParts[index];}else if(key=='d'){d=dateParts[index];}else{y=dateParts[index];}}
var dd=new Date(y,m,0);if(y<1)
return false;if(m>12||m<1)
return false;if(d<1||d>dd.getDate())
return false;return true;}
function getDateObject(dtStr){if(dtStr.length==0){return true;}
myregexp=new RegExp(date_reg_format)
if(myregexp.exec(dtStr))
var dt=myregexp.exec(dtStr)
else
return false;var yr=dt[date_reg_positions['Y']];var mh=dt[date_reg_positions['m']];var dy=dt[date_reg_positions['d']];var dtar=dtStr.split(' ');var date1;if(typeof(dtar[1])!='undefined'&&isTime(dtar[1])){var t1=dtar[1].replace(/am/i,' AM');var t1=t1.replace(/pm/i,' PM');t1=t1.replace(/\./,':');date1=new Date(mh+'/'+dy+'/'+yr+' '+t1);}else{date1=new Date(mh+'/'+dy+'/'+yr);}
if(isNaN(date1.valueOf())){return null;}
return date1;}
function isBefore(value1,value2){var d1=getDateObject(value1);var d2=getDateObject(value2);if(typeof(d2)=='boolean'){return true;}
return d2>=d1;}
function isValidEmail(emailStr){if(emailStr.length==0){return true;}
var lastChar=emailStr.charAt(emailStr.length-1);if(!lastChar.match(/[^\.]/i)){return false;}
var firstLocalChar=emailStr.charAt(0);if(firstLocalChar.match(/\./)){return false;}
var pos=emailStr.lastIndexOf("@");var localPart=emailStr.substr(0,pos);var lastLocalChar=localPart.charAt(localPart.length-1);if(lastLocalChar.match(/\./)){return false;}
var reg=/@.*?;/g;var results;while((results=reg.exec(emailStr))!=null){var original=results[0];parsedResult=results[0].replace(';','::;::');emailStr=emailStr.replace(original,parsedResult);}
reg=/.@.*?,/g;while((results=reg.exec(emailStr))!=null){var original=results[0];if(original.indexOf("::;::")==-1){var parsedResult=results[0].replace(',','::;::');emailStr=emailStr.replace(original,parsedResult);}}
var emailArr=emailStr.split(/::;::/);for(var i=0;i<emailArr.length;i++){var emailAddress=emailArr[i];if(trim(emailAddress)!=''){if(!/^\s*[\w.%+\-&'#!\$\*=\?\^_`\{\}~\/]+@([A-Z0-9-]+\.)*[A-Z0-9-]+\.[\w-]{2,}\s*$/i.test(emailAddress)&&!/^.*<[A-Z0-9._%+\-&'#!\$\*=\?\^_`\{\}~]+?@([A-Z0-9-]+\.)*[A-Z0-9-]+\.[\w-]{2,}>\s*$/i.test(emailAddress)){return false;}}}
return true;}
function isValidPhone(phoneStr){if(phoneStr.length==0){return true;}
if(!/^[0-9\-\(\)\s]+$/.test(phoneStr))
return false
return true}
function isFloat(floatStr){if(floatStr.length==0){return true;}
if(!(typeof(num_grp_sep)=='undefined'||typeof(dec_sep)=='undefined')){floatStr=unformatNumberNoParse(floatStr,num_grp_sep,dec_sep).toString();}
return /^(-)?[0-9\.]+$/.test(floatStr);}
function isDBName(str){if(str.length==0){return true;}
if(!/^[a-zA-Z][a-zA-Z\_0-9]*$/.test(str))
return false
return true}
var time_reg_format="[0-9]{1,2}\:[0-9]{2}";function isTime(timeStr){var timeRegex=time_reg_format;timeRegex=timeRegex.replace(/[ ]*\([^)]*m\)/i,'');if(timeStr.length==0){return true;}
myregexp=new RegExp(timeRegex);if(!myregexp.test(timeStr)){return false;}
return true;}
function inRange(value,min,max){if(typeof num_grp_sep!='undefined'&&typeof dec_sep!='undefined')
value=unformatNumberNoParse(value,num_grp_sep,dec_sep).toString();var result=true;if(typeof min=='number'&&value<min){result=false;}
if(typeof max=='number'&&value>max){result=false;}
return result;}
function bothExist(item1,item2){if(typeof item1=='undefined'){return false;}
if(typeof item2=='undefined'){return false;}
if((item1==''&&item2!='')||(item1!=''&&item2=='')){return false;}
return true;}
trim=YAHOO.lang.trim;function check_form(formname){if(typeof(siw)!='undefined'&&siw&&typeof(siw.selectingSomething)!='undefined'&&siw.selectingSomething)
return false;return validate_form(formname,'');}
function add_error_style(formname,input,txt,flash){var raiseFlag=false;if(typeof flash=="undefined")
flash=true;try{inputHandle=typeof input=="object"?input:document.forms[formname][input];style=get_current_bgcolor(inputHandle);if(txt.substring(txt.length-1)==':')
txt=txt.substring(0,txt.length-1)
requiredTxt=SUGAR.language.get('app_strings','ERR_MISSING_REQUIRED_FIELDS');invalidTxt=SUGAR.language.get('app_strings','ERR_INVALID_VALUE');nomatchTxt=SUGAR.language.get('app_strings','ERR_SQS_NO_MATCH_FIELD');matchTxt=txt.replace(requiredTxt,'').replace(invalidTxt,'').replace(nomatchTxt,'');YUI().use('node',function(Y){Y.one(inputHandle).get('parentNode').get('children').each(function(node,index,nodeList){if(node.hasClass('validation-message')&&node.get('text')==matchTxt){raiseFlag=true;}});});if(!raiseFlag){errorTextNode=document.createElement('div');errorTextNode.className='required validation-message';errorTextNode.innerHTML=txt;if(inputHandle.parentNode.className.indexOf('x-form-field-wrap')!=-1){inputHandle.parentNode.parentNode.appendChild(errorTextNode);}else{inputHandle.parentNode.appendChild(errorTextNode);}
if(flash)
inputHandle.style.backgroundColor="#FF0000";inputsWithErrors.push(inputHandle);}
if(flash){if(inputsWithErrors.length==1){for(var wp=1;wp<=10;wp++){window.setTimeout('fade_error_style(style, '+wp*10+')',1000+(wp*50));}}
if(typeof(window[formname+"_tabs"])!="undefined"){var tabView=window[formname+"_tabs"];var parentDiv=YAHOO.util.Dom.getAncestorByTagName(inputHandle,"div");if(tabView.get){var tabs=tabView.get("tabs");for(var i in tabs){if(tabs[i].get("contentEl")==parentDiv||YAHOO.util.Dom.isAncestor(tabs[i].get("contentEl"),inputHandle)){tabs[i].get("labelEl").style.color="red";if(inputsWithErrors.length==1)
tabView.selectTab(i);}}
if(typeof selectTabOnErrorInputHandle=='function'){selectTabOnErrorInputHandle(inputHandle);}}}
window.setTimeout("inputsWithErrors["+(inputsWithErrors.length-1)+"].style.backgroundColor = '';",2000);}}catch(e){}}
function clear_all_errors(){for(var wp=0;wp<inputsWithErrors.length;wp++){if(typeof(inputsWithErrors[wp])!='undefined'&&typeof inputsWithErrors[wp].parentNode!='undefined'&&inputsWithErrors[wp].parentNode!=null){if(inputsWithErrors[wp].parentNode.className.indexOf('x-form-field-wrap')!=-1){inputsWithErrors[wp].parentNode.parentNode.removeChild(inputsWithErrors[wp].parentNode.parentNode.lastChild);}else{inputsWithErrors[wp].parentNode.removeChild(inputsWithErrors[wp].parentNode.lastChild);}}}
if(inputsWithErrors.length==0)
return;if(YAHOO.util.Dom.getAncestorByTagName(inputsWithErrors[0],"form")){var formname=YAHOO.util.Dom.getAncestorByTagName(inputsWithErrors[0],"form").getAttribute("name");if(typeof(window[formname+"_tabs"])!="undefined"){var tabView=window[formname+"_tabs"];if(tabView.get){var tabs=tabView.get("tabs");for(var i in tabs){if(typeof tabs[i]=="object")
tabs[i].get("labelEl").style.color="";}}}
inputsWithErrors=inputsWithErrors||[];}}
function get_current_bgcolor(input){if(input.currentStyle){style=input.currentStyle.backgroundColor;return style.substring(1,7);}else{style='';styleRGB=document.defaultView.getComputedStyle(input,'').getPropertyValue("background-color");comma=styleRGB.indexOf(',');style+=dec2hex(styleRGB.substring(4,comma));commaPrevious=comma;comma=styleRGB.indexOf(',',commaPrevious+1);style+=dec2hex(styleRGB.substring(commaPrevious+2,comma));style+=dec2hex(styleRGB.substring(comma+2,styleRGB.lastIndexOf(')')));return style;}}
function hex2dec(hex){return(parseInt(hex,16));}
var hexDigit=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");function dec2hex(dec){return(hexDigit[dec>>4]+hexDigit[dec&15]);}
function fade_error_style(normalStyle,percent){errorStyle='c60c30';var r1=hex2dec(errorStyle.slice(0,2));var g1=hex2dec(errorStyle.slice(2,4));var b1=hex2dec(errorStyle.slice(4,6));var r2=hex2dec(normalStyle.slice(0,2));var g2=hex2dec(normalStyle.slice(2,4));var b2=hex2dec(normalStyle.slice(4,6));var pc=percent / 100;r=Math.floor(r1+(pc*(r2-r1))+.5);g=Math.floor(g1+(pc*(g2-g1))+.5);b=Math.floor(b1+(pc*(b2-b1))+.5);for(var wp=0;wp<inputsWithErrors.length;wp++){inputsWithErrors[wp].style.backgroundColor="#"+dec2hex(r)+dec2hex(g)+dec2hex(b);}}
function isFieldTypeExceptFromEmptyCheck(fieldType){var results=false;var exemptList=['bool','file','alpha'];for(var i=0;i<exemptList.length;i++){if(fieldType==exemptList[i])
return true;}
return results;}
function validate_form(formname,startsWith){requiredTxt=SUGAR.language.get('app_strings','ERR_MISSING_REQUIRED_FIELDS');invalidTxt=SUGAR.language.get('app_strings','ERR_INVALID_VALUE');if(typeof(formname)=='undefined'){return false;}
if(typeof(validate[formname])=='undefined'){disableOnUnloadEditView(document.forms[formname]);return true;}
var form=document.forms[formname];var isError=false;var errorMsg="";var _date=new Date();if(_date.getTime()<(lastSubmitTime+2000)&&startsWith==oldStartsWith){return false;}
lastSubmitTime=_date.getTime();oldStartsWith=startsWith;inputsWithErrors=inputsWithErrors||[];var old_isError=isError;for(var i=0;i<validate[formname].length;i++){old_isError=isError;isError=false;if(validate[formname][i][nameIndex].indexOf(startsWith)==0){if(typeof form[validate[formname][i][nameIndex]]!='undefined'&&typeof form[validate[formname][i][nameIndex]].value!='undefined'){var bail=false;if(!validate[formname][i][requiredIndex]&&trim(form[validate[formname][i][nameIndex]].value)==''&&(typeof(validate[formname][i][jstypeIndex])!='undefined'&&validate[formname][i][jstypeIndex]!='binarydep'&&validate[formname][i][jstypeIndex]!='callback')){isError=old_isError;continue;}
if(validate[formname][i][requiredIndex]&&!isFieldTypeExceptFromEmptyCheck(validate[formname][i][typeIndex])){if(typeof form[validate[formname][i][nameIndex]]=='undefined'||trim(form[validate[formname][i][nameIndex]].value)==""){add_error_style(formname,validate[formname][i][nameIndex],requiredTxt+' '+validate[formname][i][msgIndex]);isError=true;}}
if(!bail){switch(validate[formname][i][typeIndex]){case'email':if(!isValidEmail(trim(form[validate[formname][i][nameIndex]].value))){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'time':if(!isTime(trim(form[validate[formname][i][nameIndex]].value))){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'date':if(!isDate(trim(form[validate[formname][i][nameIndex]].value))){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'alpha':break;case'DBName':if(!isDBName(trim(form[validate[formname][i][nameIndex]].value))){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'DBNameRaw':if(!isDBName(form[validate[formname][i][nameIndex]].value)){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'alphanumeric':break;case'file':var file_input=form[validate[formname][i][nameIndex]+'_file'];if(file_input&&validate[formname][i][requiredIndex]&&trim(file_input.value)==""&&!file_input.disabled){isError=true;add_error_style(formname,validate[formname][i][nameIndex],requiredTxt+" "+validate[formname][i][msgIndex]);}
break;case'int':if(!isInteger(trim(form[validate[formname][i][nameIndex]].value))){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'decimal':if(!isDecimal(trim(form[validate[formname][i][nameIndex]].value))){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'currency':case'float':if(!isFloat(trim(form[validate[formname][i][nameIndex]].value))){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}
break;case'teamset_mass':var div_element_id=formname+'_'+form[validate[formname][i][nameIndex]].name+'_operation_div';var input_elements=YAHOO.util.Selector.query('input',document.getElementById(div_element_id));var primary_field_id='';var validation_passed=false;var replace_selected=false;for(t in input_elements){if(input_elements[t].type&&input_elements[t].type=='radio'&&input_elements[t].checked==true&&input_elements[t].value=='replace'){var radio_elements=YAHOO.util.Selector.query('input[type=radio]',document.getElementById(formname+'_team_name_table'));for(var x=0;x<radio_elements.length;x++){if(radio_elements[x].name!='team_name_type'){primary_field_id='team_name_collection_'+radio_elements[x].value;if(radio_elements[x].checked){replace_selected=true;if(trim(document.forms[formname].elements[primary_field_id].value)!=''){validation_passed=true;break;}}else if(trim(document.forms[formname].elements[primary_field_id].value)!=''){replace_selected=true;}}}}}
if(replace_selected&&!validation_passed){add_error_style(formname,primary_field_id,SUGAR.language.get('app_strings','ERR_NO_PRIMARY_TEAM_SPECIFIED'));isError=true;}
break;case'teamset':var table_element_id=formname+'_'+form[validate[formname][i][nameIndex]].name+'_table';if(document.getElementById(table_element_id)){var input_elements=YAHOO.util.Selector.query('input[type=radio]',document.getElementById(table_element_id));var has_primary=false;var primary_field_id=form[validate[formname][i][nameIndex]].name+'_collection_0';for(t in input_elements){primary_field_id=form[validate[formname][i][nameIndex]].name+'_collection_'+input_elements[t].value;if(input_elements[t].type&&input_elements[t].type=='radio'&&input_elements[t].checked==true){if(document.forms[formname].elements[primary_field_id].value!=''){has_primary=true;}
break;}}
if(!has_primary){isError=true;var field_id=form[validate[formname][i][nameIndex]].name+'_collection_'+input_elements[0].value;add_error_style(formname,field_id,SUGAR.language.get('app_strings','ERR_NO_PRIMARY_TEAM_SPECIFIED'));}}
break;case'error':isError=true;add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]);break;}
if(typeof validate[formname][i][jstypeIndex]!='undefined'){switch(validate[formname][i][jstypeIndex]){case'callback':if(typeof validate[formname][i][callbackIndex]=='function'){var result=validate[formname][i][callbackIndex](formname,validate[formname][i][nameIndex]);if(result==false){isError=true;add_error_style(formname,validate[formname][i][nameIndex],requiredTxt+" "+validate[formname][i][msgIndex]);}}
break;case'range':if(!inRange(trim(form[validate[formname][i][nameIndex]].value),validate[formname][i][minIndex],validate[formname][i][maxIndex])){isError=true;var lbl_validate_range=SUGAR.language.get('app_strings','LBL_VALIDATE_RANGE');if(typeof validate[formname][i][minIndex]=='number'&&typeof validate[formname][i][maxIndex]=='number'){add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]+" "+lbl_validate_range+" ("+validate[formname][i][minIndex]+" - "+validate[formname][i][maxIndex]+")");}else if(typeof validate[formname][i][minIndex]=='number'){add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]+" "+SUGAR.language.get('app_strings','MSG_SHOULD_BE')+' '+validate[formname][i][minIndex]+' '+SUGAR.language.get('app_strings','MSG_OR_GREATER'));}else if(typeof validate[formname][i][maxIndex]=='number'){add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]+" "+SUGAR.language.get('app_strings','MSG_IS_MORE_THAN')+' '+validate[formname][i][maxIndex]);}}
break;case'isbefore':compareTo=form[validate[formname][i][compareToIndex]];if(typeof compareTo!='undefined'){if(trim(compareTo.value)!=''||(validate[formname][i][allowblank]!='true')){date2=trim(compareTo.value);date1=trim(form[validate[formname][i][nameIndex]].value);if(trim(date1).length!=0&&!isBefore(date1,date2)){isError=true;add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]+"("+date1+") "+SUGAR.language.get('app_strings','MSG_IS_NOT_BEFORE')+' '+date2);}}}
break;case'less':value=unformatNumber(trim(form[validate[formname][i][nameIndex]].value),num_grp_sep,dec_sep);maximum=parseFloat(validate[formname][i][maxIndex]);if(typeof maximum!='undefined'){if(value>maximum){isError=true;add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]+" "+SUGAR.language.get('app_strings','MSG_IS_MORE_THAN')+' '+validate[formname][i][altMsgIndex]);}}
break;case'more':value=unformatNumber(trim(form[validate[formname][i][nameIndex]].value),num_grp_sep,dec_sep);minimum=parseFloat(validate[formname][i][minIndex]);if(typeof minimum!='undefined'){if(value<minimum){isError=true;add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]+" "+SUGAR.language.get('app_strings','MSG_SHOULD_BE')+' '+minimum+' '+SUGAR.language.get('app_strings','MSG_OR_GREATER'));}}
break;case'binarydep':compareTo=form[validate[formname][i][compareToIndex]];if(typeof compareTo!='undefined'){item1=trim(form[validate[formname][i][nameIndex]].value);item2=trim(compareTo.value);if(!bothExist(item1,item2)){isError=true;add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]);}}
break;case'comparison':compareTo=form[validate[formname][i][compareToIndex]];if(typeof compareTo!='undefined'){item1=trim(form[validate[formname][i][nameIndex]].value);item2=trim(compareTo.value);if(!bothExist(item1,item2)||item1!=item2){isError=true;add_error_style(formname,validate[formname][i][nameIndex],validate[formname][i][msgIndex]);}}
break;case'in_array':SUGAR.util.globalEval("retValue = "+validate[formname][i][arrIndex]);arr=retValue;operator=validate[formname][i][operatorIndex];item1=trim(form[validate[formname][i][nameIndex]].value);if(operator.charAt(0)=='u'){item1=item1.toUpperCase();operator=operator.substring(1);}else if(operator.charAt(0)=='l'){item1=item1.toLowerCase();operator=operator.substring(1);}
for(j=0;j<arr.length;j++){val=arr[j];if((operator=="=="&&val==item1)||(operator=="!="&&val!=item1)){isError=true;add_error_style(formname,validate[formname][i][nameIndex],invalidTxt+" "+validate[formname][i][msgIndex]);}}
break;case'verified':if(trim(form[validate[formname][i][nameIndex]].value)=='false'){isError=true;}
break;}}}}}
if(isError){viewTools.form.error_count++;old_isError=true;}
isError=old_isError;}
if(formsWithFieldLogic){var invalidLogic=false;if(formsWithFieldLogic.min&&formsWithFieldLogic.max&&formsWithFieldLogic._default){var showErrorsOn={min:{value:'min',show:false,obj:formsWithFieldLogic.min.value},max:{value:'max',show:false,obj:formsWithFieldLogic.max.value},_default:{value:'default',show:false,obj:formsWithFieldLogic._default.value},len:{value:'len',show:false,obj:parseInt(formsWithFieldLogic.len.value,10)}};var min=(formsWithFieldLogic.min.value!='')?parseFloat(formsWithFieldLogic.min.value):'undef';var max=(formsWithFieldLogic.max.value!='')?parseFloat(formsWithFieldLogic.max.value):'undef';var _default=(formsWithFieldLogic._default.value!='')?parseFloat(formsWithFieldLogic._default.value):'undef';for(var i in showErrorsOn){if(showErrorsOn[i].value!='len'&&showErrorsOn[i].obj.length>showErrorsOn.len.obj){invalidLogic=true;showErrorsOn[i].show=true;showErrorsOn.len.show=true;}}
if(min!='undef'&&max!='undef'&&_default!='undef'){if(!inRange(_default,min,max)){invalidLogic=true;showErrorsOn.min.show=true;showErrorsOn.max.show=true;showErrorsOn._default.show=true;}}
if(min!='undef'&&max!='undef'&&min>max){invalidLogic=true;showErrorsOn.min.show=true;showErrorsOn.max.show=true;}
if(min!='undef'&&_default!='undef'&&_default<min){invalidLogic=true;showErrorsOn.min.show=true;showErrorsOn._default.show=true;}
if(max!='undef'&&_default!='undef'&&_default>max){invalidLogic=true;showErrorsOn.max.show=true;showErrorsOn._default.show=true;}
if(invalidLogic){isError=true;for(var error in showErrorsOn)
if(showErrorsOn[error].show)
add_error_style(formname,showErrorsOn[error].value,formsWithFieldLogic.msg);}else if(!isError)
formsWithFieldLogic=null;}}
if(formWithPrecision){if(!isValidPrecision(formWithPrecision.float.value,formWithPrecision.precision.value)){isError=true;add_error_style(formname,'default',SUGAR.language.get('app_strings','ERR_COMPATIBLE_PRECISION_VALUE'));}else if(!isError){isError=false;}}
if(isError==true){var nw,ne,sw,se;if(self.pageYOffset)
{nwX=self.pageXOffset;seX=self.innerWidth;nwY=self.pageYOffset;seY=self.innerHeight;}else if(document.documentElement&&document.documentElement.scrollTop)
{nwX=document.documentElement.scrollLeft;seX=document.documentElement.clientWidth;nwY=document.documentElement.scrollTop;seY=document.documentElement.clientHeight;}else if(document.body)
{nwX=document.body.scrollLeft;seX=document.body.clientWidth;nwY=document.body.scrollTop;seY=document.body.clientHeight;}
var inView=true;for(var wp=0;wp<inputsWithErrors.length;wp++){var elementCoor=findElementPos(inputsWithErrors[wp]);if(!(elementCoor.x>=nwX&&elementCoor.y>=nwY&&elementCoor.x<=seX+nwX&&elementCoor.y<=seY+nwY)){inView=false;scrollToTop=elementCoor.y-75;scrollToLeft=elementCoor.x-75;}else{break;}}
if(!inView)
window.scrollTo(scrollToLeft,scrollToTop);return false;}
disableOnUnloadEditView(form);return true;}
var marked_row=new Array;function setPointer(theRow,theRowNum,theAction,theDefaultColor,thePointerColor,theMarkColor){var theCells=null;if((thePointerColor==''&&theMarkColor=='')||typeof(theRow.style)=='undefined'){return false;}
if(typeof(document.getElementsByTagName)!='undefined'){theCells=theRow.getElementsByTagName('td');}else if(typeof(theRow.cells)!='undefined'){theCells=theRow.cells;}else{return false;}
var rowCellsCnt=theCells.length;var domDetect=null;var currentColor=null;var newColor=null;if(typeof(window.opera)=='undefined'&&typeof(theCells[0].getAttribute)!='undefined'){currentColor=theCells[0].getAttribute('bgcolor');domDetect=true;}
else{currentColor=theCells[0].style.backgroundColor;domDetect=false;}
if(currentColor==''||(currentColor!=null&&(currentColor.toLowerCase()==theDefaultColor.toLowerCase()))){if(theAction=='over'&&thePointerColor!=''){newColor=thePointerColor;}else if(theAction=='click'&&theMarkColor!=''){newColor=theMarkColor;marked_row[theRowNum]=true;}}
else if(currentColor!=null&&(currentColor.toLowerCase()==thePointerColor.toLowerCase())&&(typeof(marked_row[theRowNum])=='undefined'||!marked_row[theRowNum])){if(theAction=='out'){newColor=theDefaultColor;}else if(theAction=='click'&&theMarkColor!=''){newColor=theMarkColor;marked_row[theRowNum]=true;}}
else if(currentColor!=null&&(currentColor.toLowerCase()==theMarkColor.toLowerCase())){if(theAction=='click'){newColor=(thePointerColor!='')?thePointerColor:theDefaultColor;marked_row[theRowNum]=(typeof(marked_row[theRowNum])=='undefined'||!marked_row[theRowNum])?true:null;}}
if(newColor){var c=null;if(domDetect){for(c=0;c<rowCellsCnt;c++){theCells[c].setAttribute('bgcolor',newColor,0);}}
else{for(c=0;c<rowCellsCnt;c++){theCells[c].style.backgroundColor=newColor;}}}
return true;}
function goToUrl(selObj,goToLocation){SUGAR.util.globalEval("document.location.href = '"+goToLocation+"pos="+selObj.options[selObj.selectedIndex].value+"'");}
var json_objects=new Object();function getXMLHTTPinstance(){var xmlhttp=false;var userAgent=navigator.userAgent.toLowerCase();if(userAgent.indexOf("msie")!=-1&&userAgent.indexOf("mac")==-1&&userAgent.indexOf("opera")==-1){var version=navigator.appVersion.match(/MSIE (\d+\.\d+)/)[1];if(version>=5.5){try{xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}catch(E){xmlhttp=false;}}}}
if(!xmlhttp&&typeof XMLHttpRequest!='undefined'){xmlhttp=new XMLHttpRequest();}
return xmlhttp;}
var global_xmlhttp=getXMLHTTPinstance();function http_fetch_sync(url,post_data){global_xmlhttp=getXMLHTTPinstance();var method='GET';if(typeof(post_data)!='undefined')
method='POST';try{global_xmlhttp.open(method,url,false);}catch(e){alert('message:'+e.message+":url:"+url);}
if(method=='POST'){global_xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}
global_xmlhttp.send(post_data);if(SUGAR.util.isLoginPage(global_xmlhttp.responseText))
return false;var args={"responseText":global_xmlhttp.responseText,"responseXML":global_xmlhttp.responseXML,"request_id":typeof(request_id)!="undefined"?request_id:0};return args;}
function http_fetch_async(url,callback,request_id,post_data){var method='GET';if(typeof(post_data)!='undefined'){method='POST';}
try{global_xmlhttp.open(method,url,true);}catch(e){alert('message:'+e.message+":url:"+url);}
if(method=='POST'){global_xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}
global_xmlhttp.onreadystatechange=function(){if(global_xmlhttp.readyState==4){if(global_xmlhttp.status==200){if(SUGAR.util.isLoginPage(global_xmlhttp.responseText))
return false;var args={"responseText":global_xmlhttp.responseText,"responseXML":global_xmlhttp.responseXML,"request_id":request_id};callback.call(document,args);}else{alert("There was a problem retrieving the XML data:\n"+global_xmlhttp.statusText);}}}
global_xmlhttp.send(post_data);}
function insert_at_cursor(field,value){if(document.selection){field.focus();sel=document.selection.createRange();sel.text=value;}
else if(field.selectionStart||field.selectionStart=='0'){var start_pos=field.selectionStart;var end_pos=field.selectionEnd;field.value=field.value.substring(0,start_pos)+value+field.value.substring(end_pos,field.value.length);}else{field.value+=value;}}
function checkParentType(type,button){if(button==null){return;}
if(typeof disabledModules!='undefined'&&typeof(disabledModules[type])!='undefined'){button.disabled='disabled';}else{button.disabled=false;}}
function parseDate(input,format){date=input.value;format=format.replace(/%/g,'');sep=format.charAt(1);yAt=format.indexOf('Y')
if(date.match(/^\d{1,2}[\/-]\d{1,2}[\/-]\d{2,4}$/)&&yAt==4){if(date.match(/^\d{1}[\/-].*$/))
date='0'+date;if(date.match(/^\d{2}[\/-]\d{1}[\/-].*$/))
date=date.substring(0,3)+'0'+date.substring(3,date.length);if(date.match(/^\d{2}[\/-]\d{2}[\/-]\d{2}$/))
date=date.substring(0,6)+'20'+date.substring(6,date.length);}
else if(date.match(/^\d{2,4}[\/-]\d{1,2}[\/-]\d{1,2}$/)){if(date.match(/^\d{2}[\/-].*$/))
date='20'+date;if(date.match(/^\d{4}[\/-]\d{1}[\/-].*$/))
date=date.substring(0,5)+'0'+date.substring(5,date.length);if(date.match(/^\d{4}[\/-]\d{2}[\/-]\d{1}$/))
date=date.substring(0,8)+'0'+date.substring(8,date.length);}else if(date.match(/^\d{4,8}$/)){digits=0;if(date.match(/^\d{8}$/))
digits=8;else if(date.match(/\d{6}/))
digits=6;else if(date.match(/\d{4}/))
digits=4;else if(date.match(/\d{5}/))
digits=5;switch(yAt){case 0:switch(digits){case 4:date='20'+date.substring(0,2)+sep+'0'+date.substring(2,3)+sep+'0'+date.substring(3,4);break;case 5:date='20'+date.substring(0,2)+sep+date.substring(2,4)+sep+'0'+date.substring(4,5);break;case 6:date='20'+date.substring(0,2)+sep+date.substring(2,4)+sep+date.substring(4,6);break;case 8:date=date.substring(0,4)+sep+date.substring(4,6)+sep+date.substring(6,8);break;}
break;case 2:switch(digits){case 4:date='0'+date.substring(0,1)+sep+'20'+date.substring(1,3)+sep+'0'+date.substring(3,4);break;case 5:date=date.substring(0,2)+sep+'20'+date.substring(2,4)+sep+'0'+date.substring(4,5);break;case 6:date=date.substring(0,2)+sep+'20'+date.substring(2,4)+sep+date.substring(4,6);break;case 8:date=date.substring(0,2)+sep+date.substring(2,6)+sep+date.substring(6,8);break;}
case 4:switch(digits){case 4:date='0'+date.substring(0,1)+sep+'0'+date.substring(1,2)+sep+'20'+date.substring(2,4);break;case 5:date='0'+date.substring(0,1)+sep+date.substring(1,3)+sep+'20'+date.substring(3,5);break;case 6:date=date.substring(0,2)+sep+date.substring(2,4)+sep+'20'+date.substring(4,6);break;case 8:date=date.substring(0,2)+sep+date.substring(2,4)+sep+date.substring(4,8);break;}
break;}}
date=date.replace(/[\/-]/g,sep);input.value=date;}
function findElementPos(obj){var x=0;var y=0;if(obj.offsetParent){while(obj.offsetParent){x+=obj.offsetLeft;y+=obj.offsetTop;obj=obj.offsetParent;}}
else if(obj.x&&obj.y){y+=obj.y
x+=obj.x}
return new coordinate(x,y);}
function getClientDim(){var nwX,nwY,seX,seY;if(self.pageYOffset)
{nwX=self.pageXOffset;seX=self.innerWidth+nwX;nwY=self.pageYOffset;seY=self.innerHeight+nwY;}else if(document.documentElement&&document.documentElement.scrollTop)
{nwX=document.documentElement.scrollLeft;seX=document.documentElement.clientWidth+nwX;nwY=document.documentElement.scrollTop;seY=document.documentElement.clientHeight+nwY;}else if(document.body)
{nwX=document.body.scrollLeft;seX=document.body.clientWidth+nwX;nwY=document.body.scrollTop;seY=document.body.clientHeight+nwY;}
return{'nw':new coordinate(nwX,nwY),'se':new coordinate(seX,seY)};}
function freezeEvent(e){if(e){if(e.preventDefault)
e.preventDefault();e.returnValue=false;e.cancelBubble=true;if(e.stopPropagation)
e.stopPropagation();return false;}}
function coordinate(_x,_y){var x=_x;var y=_y;this.add=add;this.sub=sub;this.x=x;this.y=y;function add(rh){return new position(this.x+rh.x,this.y+rh.y);}
function sub(rh){return new position(this.x+rh.x,this.y+rh.y);}}
function sendAndRetrieve(theForm,theDiv,loadingStr){function success(data){document.getElementById(theDiv).innerHTML=data.responseText;ajaxStatus.hideStatus();}
if(typeof loadingStr=='undefined')
SUGAR.language.get('app_strings','LBL_LOADING');ajaxStatus.showStatus(loadingStr);oForm=new YAHOO.util.Element(theForm);if(oForm.get('enctype')&&oForm.get('enctype')=='multipart/form-data'){YAHOO.util.Connect.setForm(theForm,true);var cObj=YAHOO.util.Connect.asyncRequest('POST','index.php',{upload:success,failure:success});}else{YAHOO.util.Connect.setForm(theForm);var cObj=YAHOO.util.Connect.asyncRequest('POST','index.php',{success:success,failure:success});}
return false;}
function sendAndRedirect(theForm,loadingStr,redirect_location){function success(data){if(redirect_location){location.href=redirect_location;}
ajaxStatus.hideStatus();}
if(typeof loadingStr=='undefined')
SUGAR.language.get('app_strings','LBL_LOADING');ajaxStatus.showStatus(loadingStr);oForm=new YAHOO.util.Element(theForm);if(oForm.get('enctype')&&oForm.get('enctype')=='multipart/form-data'){YAHOO.util.Connect.setForm(theForm,true);var cObj=YAHOO.util.Connect.asyncRequest('POST','index.php',{upload:success,failure:success});}else{YAHOO.util.Connect.setForm(theForm);var cObj=YAHOO.util.Connect.asyncRequest('POST','index.php',{success:success,failure:success});}
return false;}
function saveForm(theForm,theDiv,loadingStr){if(check_form(theForm)){for(i=0;i<ajaxFormArray.length;i++){if(ajaxFormArray[i]==theForm){ajaxFormArray.splice(i,1);}}
return sendAndRetrieve(theForm,loadingStr,theDiv);}else
return false;}
function snapshotForm(theForm){var snapshotTxt='';var elemList=theForm.elements;var elem;var elemType;for(var i=0;i<elemList.length;i++){elem=elemList[i];if(typeof(elem.type)=='undefined'){continue;}
elemType=elem.type.toLowerCase();snapshotTxt=snapshotTxt+elem.name;if(elemType=='text'||elemType=='textarea'||elemType=='password'){snapshotTxt=snapshotTxt+elem.value;}else if(elemType=='select'||elemType=='select-one'||elemType=='select-multiple'){var optionList=elem.options;for(var ii=0;ii<optionList.length;ii++){if(optionList[ii].selected){snapshotTxt=snapshotTxt+optionList[ii].value;}}}else if(elemType=='radio'||elemType=='checkbox'){if(elem.selected){snapshotTxt=snapshotTxt+'checked';}}else if(elemType=='hidden'){snapshotTxt=snapshotTxt+elem.value;}}
return snapshotTxt;}
function initEditView(theForm){if(SUGAR.util.ajaxCallInProgress()){window.setTimeout(function(){initEditView(theForm);},100);return;}
if(theForm==null||theForm.id==null){return;}
if(theForm.id=='popup_query_form'||theForm.id=='MassUpdate'){return;}
if(typeof editViewSnapshots=='undefined'||editViewSnapshots==null){editViewSnapshots=new Object();}
if(typeof SUGAR.loadedForms=='undefined'||SUGAR.loadedForms==null){SUGAR.loadedForms=new Object();}
editViewSnapshots[theForm.id]=snapshotForm(theForm);SUGAR.loadedForms[theForm.id]=true;}
function onUnloadEditView(theForm){var dataHasChanged=false;if(typeof editViewSnapshots=='undefined'){return;}
if(typeof theForm=='undefined'){for(var idx in editViewSnapshots){theForm=document.getElementById(idx);if(theForm==null||typeof editViewSnapshots[theForm.id]=='undefined'||editViewSnapshots[theForm.id]==null||!SUGAR.loadedForms[theForm.id]){continue;}
var snap=snapshotForm(theForm);if(editViewSnapshots[theForm.id]!=snap){dataHasChanged=true;}}}else{if(editViewSnapshots==null||typeof theForm.id=='undefined'||typeof editViewSnapshots[theForm.id]=='undefined'||editViewSnapshots[theForm.id]==null){return;}
if(editViewSnapshots[theForm.id]!=snapshotForm(theForm)){dataHasChanged=true;}}
if(dataHasChanged==true){return SUGAR.language.get('app_strings','WARN_UNSAVED_CHANGES');}else{return;}}
function disableOnUnloadEditView(theForm){if(typeof theForm=='undefined'||typeof editViewSnapshots=='undefined'||theForm==null||editViewSnapshots==null){window.onbeforeunload=null;editViewSnapshots=null;}else{if(typeof(theForm.id)!='undefined'&&typeof(editViewSnapshots[theForm.id])!='undefined'){editViewSnapshots[theForm.id]=null;}}}
function saveForms(savingStr,completeStr){index=0;theForms=ajaxFormArray;function success(data){var theForm=document.getElementById(ajaxFormArray[0]);document.getElementById('multiedit_'+theForm.id).innerHTML=data.responseText;var saveAllButton=document.getElementById('ajaxsaveall');ajaxFormArray.splice(index,1);if(saveAllButton&&ajaxFormArray.length<=1){saveAllButton.style.visibility='hidden';}
index++;if(index==theForms.length){ajaxStatus.showStatus(completeStr);window.setTimeout('ajaxStatus.hideStatus();',2000);if(saveAllButton)
saveAllButton.style.visibility='hidden';}}
if(typeof savingStr=='undefined')
SUGAR.language.get('app_strings','LBL_LOADING');ajaxStatus.showStatus(savingStr);for(i=0;i<theForms.length;i++){var theForm=document.getElementById(theForms[i]);if(check_form(theForm.id)){theForm.action.value='AjaxFormSave';YAHOO.util.Connect.setForm(theForm);var cObj=YAHOO.util.Connect.asyncRequest('POST','index.php',{success:success,failure:success});}else{ajaxStatus.hideStatus();}
lastSubmitTime=lastSubmitTime-2000;}
return false;}
function sugarListView(){}
sugarListView.prototype.confirm_action=function(del){if(del==1){return confirm(SUGAR.language.get('app_strings','NTC_DELETE_CONFIRMATION_NUM')+sugarListView.get_num_selected()+SUGAR.language.get('app_strings','NTC_DELETE_SELECTED_RECORDS'));}else{return confirm(SUGAR.language.get('app_strings','NTC_UPDATE_CONFIRMATION_NUM')+sugarListView.get_num_selected()+SUGAR.language.get('app_strings','NTC_DELETE_SELECTED_RECORDS'));}}
sugarListView.get_num_selected=function(){var selectCount=$("input[name='selectCount[]']:first");if(selectCount.length>0)
return parseInt(selectCount.val().replace("+",""));return 0;}
sugarListView.update_count=function(count,add){if(typeof document.MassUpdate!='undefined'){the_form=document.MassUpdate;for(var wp=0;wp<the_form.elements.length;wp++){if(typeof the_form.elements[wp].name!='undefined'&&the_form.elements[wp].name=='selectCount[]'){if(add){the_form.elements[wp].value=parseInt(the_form.elements[wp].value,10)+count;if(the_form.select_entire_list.value==1&&the_form.show_plus.value){the_form.elements[wp].value+='+';}}else{if(the_form.select_entire_list.value==1&&the_form.show_plus.value){the_form.elements[wp].value=count+'+';}else{the_form.elements[wp].value=count;}}}}}}
sugarListView.prototype.use_external_mail_client=function(no_record_txt,module){selected_records=sugarListView.get_checks_count();if(selected_records<1){alert(no_record_txt);return false;}
if(document.MassUpdate.select_entire_list.value==1){if(totalCount>10){alert(totalCountError);return;}
select=false;}else if(document.MassUpdate.massall.checked==true)
select=false;else
select=true;sugarListView.get_checks();var ids="";if(select){ids=document.MassUpdate.uid.value;}else{inputs=document.MassUpdate.elements;ar=new Array();for(i=0;i<inputs.length;i++){if(inputs[i].name=='mass[]'&&inputs[i].checked&&typeof(inputs[i].value)!='function'){ar.push(inputs[i].value);}}
ids=ar.join(',');}
YAHOO.util.Connect.asyncRequest("POST","index.php?",{success:this.use_external_mail_client_callback},SUGAR.util.paramsToUrl({module:"Emails",action:"Compose",listViewExternalClient:1,action_module:module,uid:ids,to_pdf:1}));return false;}
sugarListView.prototype.use_external_mail_client_callback=function(o){if(o.responseText)
location.href='mailto:'+o.responseText;}
sugarListView.prototype.send_form_for_emails=function(select,currentModule,action,no_record_txt,action_module,totalCount,totalCountError){if(typeof(SUGAR.config.email_sugarclient_listviewmaxselect)==='undefined'){maxCount=10;}else{maxCount=SUGAR.config.email_sugarclient_listviewmaxselect;}
if(document.MassUpdate.select_entire_list.value==1){if(totalCount>maxCount){alert(totalCountError);return;}
select=false;}else if(document.MassUpdate.massall.checked==true)
select=false;else
select=true;sugarListView.get_checks();var newForm=document.createElement('form');newForm.method='post';newForm.action=action;newForm.name='newForm';newForm.id='newForm';var uidTa=document.createElement('textarea');uidTa.name='uid';uidTa.style.display='none';if(select){uidTa.value=document.MassUpdate.uid.value;}else{inputs=document.MassUpdate.elements;ar=new Array();for(i=0;i<inputs.length;i++){if(inputs[i].name=='mass[]'&&inputs[i].checked&&typeof(inputs[i].value)!='function'){ar.push(inputs[i].value);}}
uidTa.value=ar.join(',');}
if(uidTa.value==''){alert(no_record_txt);return false;}
var selectedArray=uidTa.value.split(",");if(selectedArray.length>maxCount){alert(totalCountError);return;}
newForm.appendChild(uidTa);var moduleInput=document.createElement('input');moduleInput.name='module';moduleInput.type='hidden';moduleInput.value=currentModule;newForm.appendChild(moduleInput);var actionInput=document.createElement('input');actionInput.name='action';actionInput.type='hidden';actionInput.value='Compose';newForm.appendChild(actionInput);if(typeof action_module!='undefined'&&action_module!=''){var actionModule=document.createElement('input');actionModule.name='action_module';actionModule.type='hidden';actionModule.value=action_module;newForm.appendChild(actionModule);}
if(typeof return_info!='undefined'&&return_info!=''){var params=return_info.split('&');if(params.length>0){for(var i=0;i<params.length;i++){if(params[i].length>0){var param_nv=params[i].split('=');if(param_nv.length==2){returnModule=document.createElement('input');returnModule.name=param_nv[0];returnModule.type='hidden';returnModule.value=param_nv[1];newForm.appendChild(returnModule);}}}}}
var isAjaxCall=document.createElement('input');isAjaxCall.name='ajaxCall';isAjaxCall.type='hidden';isAjaxCall.value=true;newForm.appendChild(isAjaxCall);var isListView=document.createElement('input');isListView.name='ListView';isListView.type='hidden';isListView.value=true;newForm.appendChild(isListView);var toPdf=document.createElement('input');toPdf.name='to_pdf';toPdf.type='hidden';toPdf.value=true;newForm.appendChild(toPdf);YAHOO.util.Connect.setForm(newForm);var callback={success:function(o){var resp=YAHOO.lang.JSON.parse(o.responseText);var quickComposePackage=new Object();quickComposePackage.composePackage=resp;quickComposePackage.fullComposeUrl='index.php?module=Emails&action=Compose&ListView=true'+'&uid='+uidTa.value+'&action_module='+action_module;SUGAR.quickCompose.init(quickComposePackage);}}
YAHOO.util.Connect.asyncRequest('POST','index.php',callback,null);document.MassUpdate.uid.value='';return false;}
sugarListView.prototype.send_form=function(select,currentModule,action,no_record_txt,action_module,return_info,ajax,callback){if(document.MassUpdate.select_entire_list.value==1){if(sugarListView.get_checks_count()<1){alert(no_record_txt);return false;}
var href=action;if(action.indexOf('?')!=-1)
href+='&module='+currentModule;else
href+='?module='+currentModule;if(return_info)
href+=return_info;var newForm=document.createElement('form');newForm.method='post';newForm.action=href;newForm.name='newForm';newForm.id='newForm';if(action.indexOf('entryPoint=formLetter')!=-1){newForm.target="_blank";}
var postTa=document.createElement('textarea');postTa.name='current_post';postTa.value=document.MassUpdate.current_query_by_page.value;postTa.style.display='none';newForm.appendChild(postTa);document.MassUpdate.parentNode.appendChild(newForm);newForm.submit();return;}else if(document.MassUpdate.massall.checked==true)
select=false;else
select=true;sugarListView.get_checks();var newForm=document.createElement('form');newForm.method='post';newForm.action=action;newForm.name='newForm';newForm.id='newForm';if(action.indexOf('entryPoint=formLetter')!=-1){newForm.target="_blank";}
var uidTa=document.createElement('textarea');uidTa.name='uid';uidTa.style.display='none';uidTa.value=document.MassUpdate.uid.value;if(uidTa.value==''){alert(no_record_txt);return false;}
newForm.appendChild(uidTa);var moduleInput=document.createElement('input');moduleInput.name='module';moduleInput.type='hidden';moduleInput.value=currentModule;newForm.appendChild(moduleInput);var actionInput=document.createElement('input');actionInput.name='action';actionInput.type='hidden';actionInput.value='index';newForm.appendChild(actionInput);if(typeof action_module!='undefined'&&action_module!=''){var actionModule=document.createElement('input');actionModule.name='action_module';actionModule.type='hidden';actionModule.value=action_module;newForm.appendChild(actionModule);}
if(typeof return_info!='undefined'&&return_info!=''){var params=return_info.split('&');if(params.length>0){for(var i=0;i<params.length;i++){if(params[i].length>0){var param_nv=params[i].split('=');if(param_nv.length==2){returnModule=document.createElement('input');returnModule.name=param_nv[0];returnModule.type='hidden';returnModule.value=param_nv[1];newForm.appendChild(returnModule);}}}}}
document.MassUpdate.parentNode.appendChild(newForm);if(ajax){var _callback=callback?callback:null;$.post($('form[name="newForm"]').attr('action'),$('form[name="newForm"]').serialize(),function(resp){if(_callback){_callback(resp);}});return false;}else{newForm.submit();}
document.MassUpdate.uid.value='';return false;}
sugarListView.get_checks_count=function(){ar=new Array();if(document.MassUpdate.uid.value!=''){oldUids=document.MassUpdate.uid.value.split(',');for(uid in oldUids){if(typeof(oldUids[uid])!='function'){ar[oldUids[uid]]=1;}}}
inputs=document.MassUpdate.elements;for(i=0;i<inputs.length;i++){if(inputs[i].name=='mass[]'){ar[inputs[i].value]=(inputs[i].checked)?1:0;}}
uids=new Array();for(i in ar){if((typeof(ar[i])!='function')&&ar[i]==1){uids.push(i);}}
return uids.length;}
sugarListView.get_checks=function(){ar=new Array();if(typeof document.MassUpdate!='undefined'){if(document.MassUpdate.uid.value!=''){oldUids=document.MassUpdate.uid.value.split(',');for(uid in oldUids){if(typeof(oldUids[uid])!='function'){ar[oldUids[uid]]=1;}}}
inputs=document.MassUpdate.elements;for(i=0;i<inputs.length;i++){if(inputs[i].name=='mass[]'){ar[inputs[i].value]=(inputs[i].checked)?1:0;}}
uids=new Array();for(i in ar){if(typeof(ar[i])!='function'&&ar[i]==1){uids.push(i);}}
document.MassUpdate.uid.value=uids.join(',');if(uids.length==0)
return false;return true;}else
return false;}
sugarListView.prototype.order_checks=function(order,orderBy,moduleString){checks=sugarListView.get_checks();document.MassUpdate.elements[moduleString].value=orderBy;document.MassUpdate.lvso.value=order;if(typeof document.MassUpdate.massupdate!='undefined'){document.MassUpdate.massupdate.value='false';}
document.MassUpdate.action.value=document.MassUpdate.return_action.value;document.MassUpdate.return_module.value='';document.MassUpdate.return_action.value='';document.MassUpdate.submit();return!checks;}
sugarListView.prototype.save_checks=function(offset,moduleString){checks=sugarListView.get_checks();if(typeof document.MassUpdate!='undefined'){document.MassUpdate.elements[moduleString].value=offset
if(typeof document.MassUpdate.massupdate!='undefined'){document.MassUpdate.massupdate.value='false';}
document.MassUpdate.action.value=document.MassUpdate.return_action.value;document.MassUpdate.return_module.value='';document.MassUpdate.return_action.value='';document.MassUpdate.submit();return!checks;}else
return false;}
sugarListView.prototype.check_item=function(cb,form){if(cb.checked){sugarListView.update_count(1,true);}else{sugarListView.update_count(-1,true);if(typeof form!='undefined'&&form!=null){sugarListView.prototype.updateUid(cb,form);}}
sugarListView.prototype.toggleSelected();}
sugarListView.prototype.toggleSelected=function(){var numSelected=sugarListView.get_num_selected();var selectedRecords=document.getElementById("selectedRecordsTop");var selectActions=document.getElementById("actionLinkTop");var selectActionsDisabled=document.getElementById("select_actions_disabled_top");var selectActionsBottom=document.getElementById("actionLinkBottom");var selectActionsDisabledBottom=document.getElementById("select_actions_disabled_bottom");if(numSelected>0){$(selectedRecords).removeAttr("style").addClass("show");$(".selectActionsDisabled").hide();jQuery('ul[name=selectActions]').each(function(){jQuery(this).removeAttr("style").addClass("show");});jQuery('ul[name=selectActionsBottom]').each(function(){jQuery(this).removeAttr("style").addClass("show");});$(selectActionsDisabled).removeAttr("style").removeClass("show").addClass("hide");$(selectActionsDisabledBottom).removeAttr("style").removeClass("show").addClass("hide");jQuery('div[id=selectActionsDisabled]').each(function(){jQuery(this).removeAttr("style").addClass("hide");});jQuery('div[id=selectActionsDisabledBottom]').each(function(){jQuery(this).removeAttr("style").addClass("hide");});}else{$(selectedRecords).hide();$(selectActions).removeAttr("style").removeClass("show").addClass("hide");$(selectActionsBottom).removeAttr("style").removeClass("show").addClass("hide");$(".selectActionsDisabled").removeAttr("style").addClass("show");jQuery('ul[name=selectActions]').each(function(){jQuery(this).removeAttr("style").addClass("hide");});jQuery('ul[name=selectActions]').each(function(){jQuery(this).removeAttr("style").addClass("hide");});$(selectActionsDisabled).removeAttr("style").removeClass("hide").addClass("show");$(selectActionsDisabledBottom).removeAttr("style").removeClass("hide").addClass("show");jQuery('div[id=selectActionsDisabled]').each(function(){jQuery(this).removeAttr("style").addClass("show");});jQuery('div[id=selectActionsDisabledBottom]').each(function(){jQuery(this).removeAttr("style").addClass("show");});}}
sugarListView.prototype.updateUid=function(cb,form){if(form.name=='MassUpdate'&&form.uid&&form.uid.value&&cb.value&&form.uid.value.indexOf(cb.value)!=-1){if(form.uid.value.indexOf(','+cb.value)!=-1){form.uid.value=form.uid.value.replace(','+cb.value,'');}else if(form.uid.value.indexOf(cb.value+',')!=-1){form.uid.value=form.uid.value.replace(cb.value+',','');}else if(form.uid.value.indexOf(cb.value)!=-1){form.uid.value=form.uid.value.replace(cb.value,'');}}}
sugarListView.prototype.check_entire_list=function(form,field,value,list_count){count=0;$(document.MassUpdate.massall).each(function(){$(this).attr('checked',true).attr('disabled',true);});for(i=0;i<form.elements.length;i++){if(form.elements[i].name==field&&form.elements[i].disabled==false){if(form.elements[i].checked!=value)
count++;form.elements[i].checked=value;form.elements[i].disabled=true;}}
document.MassUpdate.select_entire_list.value=1;sugarListView.update_count(list_count,false);sugarListView.prototype.toggleSelected();$('input[name="massall"]').prop('checked',true);$('.glyphicon.bootstrap-checkbox').each(function(i,e){if(typeof refreshListViewCheckbox!=='undefined'){refreshListViewCheckbox(e);}});}
sugarListView.prototype.check_all=function(form,field,value,pageTotal){count=0;$(document.MassUpdate.massall).each(function(){$(this).attr('checked',value);});if(document.MassUpdate.select_entire_list&&document.MassUpdate.select_entire_list.value==1){sugarListView.prototype.toggleSelected();$(document.MassUpdate.massall).each(function(){$(this).attr('disabled',true);});}else{$(document.MassUpdate.massall).each(function(){$(this).attr('disabled',false);});}
for(i=0;i<form.elements.length;i++){if(form.elements[i].name==field&&!(form.elements[i].disabled==true&&form.elements[i].checked==false)){form.elements[i].disabled=false;if(form.elements[i].checked!=value)
count++;form.elements[i].checked=value;if(!value){sugarListView.prototype.updateUid(form.elements[i],form);}}}
if(pageTotal>=0)
sugarListView.update_count(pageTotal);else if(value)
sugarListView.update_count(count,true);else
sugarListView.update_count(-1*count,true);sugarListView.prototype.toggleSelected();}
sugarListView.check_all=sugarListView.prototype.check_all;sugarListView.confirm_action=sugarListView.prototype.confirm_action;sugarListView.prototype.check_boxes=function(){var inputsCount=0;var checkedCount=0;var existing_onload=window.onload;var theForm=document.MassUpdate;inputs_array=theForm.elements;if(typeof theForm.uid.value!='undefined'&&theForm.uid.value!=""){checked_items=theForm.uid.value.split(",");if(theForm.select_entire_list.value==1){document.MassUpdate.massall.disabled=true;sugarListView.prototype.toggleSelected();$("a[name=selectall]:first").click();}
for(var wp=0;wp<inputs_array.length;wp++){if(inputs_array[wp].name=="mass[]"){inputsCount++;if(theForm.select_entire_list.value==1){inputs_array[wp].checked=true;inputs_array[wp].disabled=true;checkedCount++;}else{for(i in checked_items){if(inputs_array[wp].value==checked_items[i]){checkedCount++;inputs_array[wp].checked=true;}}}}}}else{for(var wp=0;wp<inputs_array.length;wp++){if(inputs_array[wp].name=="mass[]"){inputs_array[wp].checked=false;inputs_array[wp].disabled=false;}}
if(document.MassUpdate.massall){document.MassUpdate.massall.checked=false;document.MassUpdate.massall.disabled=false;}
sugarListView.update_count(0)}
if(checkedCount>0&&checkedCount==inputsCount)
document.MassUpdate.massall.checked=true;}
function check_used_email_templates(){var ids=document.MassUpdate.uid.value;var call_back={success:function(r){if(r.responseText!=''){if(!confirm(SUGAR.language.get('app_strings','NTC_TEMPLATES_IS_USED')+r.responseText)){return false;}}
document.MassUpdate.submit();return false;}};url="index.php?module=EmailTemplates&action=CheckDeletable&from=ListView&to_pdf=1&records="+ids;YAHOO.util.Connect.asyncRequest('POST',url,call_back,null);}
sugarListView.prototype.send_mass_update=function(mode,no_record_txt,del){formValid=check_form('MassUpdate');if(!formValid&&!del)
return false;if(document.MassUpdate.select_entire_list&&document.MassUpdate.select_entire_list.value==1)
mode='entire';else
mode='selected';var ar=new Array();switch(mode){case'selected':for(var wp=0;wp<document.MassUpdate.elements.length;wp++){var reg_for_existing_uid=new RegExp('^'+RegExp.escape(document.MassUpdate.elements[wp].value)+'[\s]*,|,[\s]*'+RegExp.escape(document.MassUpdate.elements[wp].value)+'[\s]*,|,[\s]*'+RegExp.escape(document.MassUpdate.elements[wp].value)+'$|^'+RegExp.escape(document.MassUpdate.elements[wp].value)+'$');if(typeof document.MassUpdate.elements[wp].name!='undefined'&&document.MassUpdate.elements[wp].name=='mass[]'&&document.MassUpdate.elements[wp].checked&&!reg_for_existing_uid.test(document.MassUpdate.uid.value)){ar.push(document.MassUpdate.elements[wp].value);}}
if(document.MassUpdate.uid.value!='')
document.MassUpdate.uid.value+=',';document.MassUpdate.uid.value+=ar.join(',');if(document.MassUpdate.uid.value==''){alert(no_record_txt);return false;}
if(typeof(current_admin_id)!='undefined'&&document.MassUpdate.module!='undefined'&&document.MassUpdate.module.value=='Users'&&(document.MassUpdate.is_admin.value!=''||document.MassUpdate.status.value!='')){var reg_for_current_admin_id=new RegExp('^'+current_admin_id+'[\s]*,|,[\s]*'+current_admin_id+'[\s]*,|,[\s]*'+current_admin_id+'$|^'+current_admin_id+'$');if(reg_for_current_admin_id.test(document.MassUpdate.uid.value)){alert(SUGAR.language.get('Users','LBL_LAST_ADMIN_NOTICE'));return false;}}
break;case'entire':var entireInput=document.createElement('input');entireInput.name='entire';entireInput.type='hidden';entireInput.value='index';document.MassUpdate.appendChild(entireInput);if(document.MassUpdate.module!='undefined'&&document.MassUpdate.module.value=='Users'&&(document.MassUpdate.is_admin.value!=''||document.MassUpdate.status.value!='')){alert(SUGAR.language.get('Users','LBL_LAST_ADMIN_NOTICE'));return false;}
break;}
if(!sugarListView.confirm_action(del))
return false;if(del==1){var deleteInput=document.createElement('input');deleteInput.name='Delete';deleteInput.type='hidden';deleteInput.value=true;document.MassUpdate.appendChild(deleteInput);if(document.MassUpdate.module!='undefined'&&document.MassUpdate.module.value=='EmailTemplates'){check_used_email_templates();return false;}}
document.MassUpdate.submit();return false;}
sugarListView.prototype.clear_all=function(){document.MassUpdate.uid.value='';document.MassUpdate.select_entire_list.value=0;sugarListView.check_all(document.MassUpdate,'mass[]',false);$(document.MassUpdate.massall).each(function(){$(this).attr('checked',false).attr('disabled',false);});sugarListView.update_count(0);sugarListView.prototype.toggleSelected();}
sListView=new sugarListView();function unformatNumber(n,num_grp_sep,dec_sep){var x=unformatNumberNoParse(n,num_grp_sep,dec_sep);x=x.toString();if(x.length>0){return parseFloat(x);}
return'';}
function unformatNumberNoParse(n,num_grp_sep,dec_sep){if(typeof num_grp_sep=='undefined'||typeof dec_sep=='undefined')
return n;n=n?n.toString():'';if(n.length>0){if(num_grp_sep!=''){num_grp_sep_re=new RegExp('\\'+num_grp_sep,'g');n=n.replace(num_grp_sep_re,'');}
n=n.replace(dec_sep,'.');if(typeof CurrencySymbols!='undefined'){for(var idx in CurrencySymbols){n=n.replace(CurrencySymbols[idx],'');}}
return n;}
return'';}
function formatNumber(n,num_grp_sep,dec_sep,round,precision){if(typeof num_grp_sep=='undefined'||typeof dec_sep=='undefined')
return n;n=n?n.toString():'';if(n.split)
n=n.split('.');else
return n;if(n.length>2)
return n.join('.');if(typeof round!='undefined'){if(round>0&&n.length>1){n[1]=parseFloat('0.'+n[1]);n[1]=Math.round(n[1]*Math.pow(10,round))/ Math.pow(10,round);n[1]=n[1].toString().split('.')[1];}
if(round<=0){n[0]=Math.round(parseInt(n[0],10)*Math.pow(10,round))/ Math.pow(10,round);n[1]='';}}
if(typeof precision!='undefined'&&precision>=0){if(n.length>1&&typeof n[1]!='undefined')
n[1]=n[1].substring(0,precision);else
n[1]='';if(n[1].length<precision){for(var wp=n[1].length;wp<precision;wp++)
n[1]+='0';}}
regex=/(\d+)(\d{3})/;while(num_grp_sep!=''&&regex.test(n[0]))
n[0]=n[0].toString().replace(regex,'$1'+num_grp_sep+'$2');return n[0]+(n.length>1&&n[1]!=''?dec_sep+n[1]:'');}
SUGAR.ajaxStatusClass=function(){};SUGAR.ajaxStatusClass.prototype.statusDiv=null;SUGAR.ajaxStatusClass.prototype.oldOnScroll=null;SUGAR.ajaxStatusClass.prototype.shown=false;SUGAR.ajaxStatusClass.prototype.positionStatus=function(){statusDivRegion=YAHOO.util.Dom.getRegion(this.statusDiv);statusDivWidth=statusDivRegion.right-statusDivRegion.left;this.statusDiv.style.left=YAHOO.util.Dom.getViewportWidth()/ 2-statusDivWidth / 2+'px';}
SUGAR.ajaxStatusClass.prototype.createStatus=function(text){statusDiv=document.createElement('div');statusDiv.className='dataLabel';statusDiv.id='ajaxStatusDiv';document.body.appendChild(statusDiv);this.statusDiv=document.getElementById('ajaxStatusDiv');}
SUGAR.ajaxStatusClass.prototype.showStatus=function(text){if(!this.statusDiv){this.createStatus(text);}else{this.statusDiv.style.display='';}
this.statusDiv.innerHTML='&nbsp;<b>'+text+'</b>&nbsp;';this.positionStatus();if(!this.shown){this.shown=true;this.statusDiv.style.display='';if(window.onscroll)
this.oldOnScroll=window.onscroll;window.onscroll=this.positionStatus;}}
SUGAR.ajaxStatusClass.prototype.hideStatus=function(text){if(!this.shown)
return;this.shown=false;if(this.oldOnScroll)
window.onscroll=this.oldOnScroll;else
window.onscroll='';this.statusDiv.style.display='none';}
SUGAR.ajaxStatusClass.prototype.flashStatus=function(text,time){this.showStatus(text);window.setTimeout('ajaxStatus.hideStatus();',time);}
var ajaxStatus=new SUGAR.ajaxStatusClass();SUGAR.unifiedSearchAdvanced=function(){var usa_div;var usa_img;var usa_open;var usa_content;var anim_open;var anim_close;return{init:function(){SUGAR.unifiedSearchAdvanced.usa_div=document.getElementById('unified_search_advanced_div');SUGAR.unifiedSearchAdvanced.usa_img=document.getElementById('unified_search_advanced_img');if(!SUGAR.unifiedSearchAdvanced.usa_div||!SUGAR.unifiedSearchAdvanced.usa_img)
return;var attributes={height:{to:300}};SUGAR.unifiedSearchAdvanced.anim_open=new YAHOO.util.Anim('unified_search_advanced_div',attributes);SUGAR.unifiedSearchAdvanced.anim_open.duration=0.75;SUGAR.unifiedSearchAdvanced.anim_close=new YAHOO.util.Anim('unified_search_advanced_div',{height:{to:0}});SUGAR.unifiedSearchAdvanced.anim_close.duration=0.75;SUGAR.unifiedSearchAdvanced.usa_img._x=YAHOO.util.Dom.getX(SUGAR.unifiedSearchAdvanced.usa_img);SUGAR.unifiedSearchAdvanced.usa_img._y=YAHOO.util.Dom.getY(SUGAR.unifiedSearchAdvanced.usa_img);SUGAR.unifiedSearchAdvanced.usa_open=false;SUGAR.unifiedSearchAdvanced.usa_content=null;YAHOO.util.Event.addListener('unified_search_advanced_img','click',SUGAR.unifiedSearchAdvanced.get_content);},get_content:function(e){query_string=trim(document.getElementById('query_string').value);if(query_string!=''){window.location.href='index.php?module=Home&action=UnifiedSearch&query_string='+query_string;}else{window.location.href='index.php?module=Home&action=UnifiedSearch&form_only=true';}},animate:function(data){ajaxStatus.hideStatus();if(data){SUGAR.unifiedSearchAdvanced.usa_content=data.responseText;SUGAR.unifiedSearchAdvanced.usa_div.innerHTML=SUGAR.unifiedSearchAdvanced.usa_content;}
if(SUGAR.unifiedSearchAdvanced.usa_open){document.UnifiedSearch.advanced.value='false';SUGAR.unifiedSearchAdvanced.anim_close.animate();}else{document.UnifiedSearch.advanced.value='true';SUGAR.unifiedSearchAdvanced.usa_div.style.display='';YAHOO.util.Dom.setX(SUGAR.unifiedSearchAdvanced.usa_div,SUGAR.unifiedSearchAdvanced.usa_img._x-90);YAHOO.util.Dom.setY(SUGAR.unifiedSearchAdvanced.usa_div,SUGAR.unifiedSearchAdvanced.usa_img._y+15);SUGAR.unifiedSearchAdvanced.anim_open.animate();}
SUGAR.unifiedSearchAdvanced.usa_open=!SUGAR.unifiedSearchAdvanced.usa_open;return false;},checkUsaAdvanced:function(){if(document.UnifiedSearch.advanced.value=='true'){document.UnifiedSearchAdvanced.query_string.value=document.UnifiedSearch.query_string.value;document.UnifiedSearchAdvanced.submit();return false;}
return true;}};}();if(typeof YAHOO!='undefined')
YAHOO.util.Event.addListener(window,'load',SUGAR.unifiedSearchAdvanced.init);SUGAR.ui={toggleHeader:function(){var h=document.getElementById('header');if(h!=null){if(h!=null){if(h.style.display=='none'){h.style.display='';}else{h.style.display='none';}}}else{alert(SUGAR.language.get("app_strings","ERR_NO_HEADER_ID"));}}};SUGAR.util=function(){var additionalDetailsCache;var additionalDetailsCalls;var additionalDetailsRpcCall;return{getAndRemove:function(el){if(YAHOO&&YAHOO.util&&YAHOO.util.Dom)
el=YAHOO.util.Dom.get(el);else if(typeof(el)=="string")
el=document.getElementById(el);if(el&&el.parentNode)
el.parentNode.removeChild(el);return el;},paramsToUrl:function(params){var parts=[];for(var i in params){if(params.hasOwnProperty(i)){parts.push(encodeURIComponent(i)+'='+encodeURIComponent(params[i]));}}
return parts.join("&")+"&";},globalEval:function(data){var rnotwhite=/\S/;if(data&&rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data);})(data);}},evalScript:function(text){if(UA.webkit&&!UA.chrome){var waitUntilLoaded=function(){SUGAR.evalScript_waitCount--;if(SUGAR.evalScript_waitCount==0){var headElem=document.getElementsByTagName('head')[0];for(var i=0;i<SUGAR.evalScript_evalElem.length;i++){var tmpElem=document.createElement('script');tmpElem.type='text/javascript';tmpElem.text=SUGAR.evalScript_evalElem[i];headElem.appendChild(tmpElem);}
SUGAR.evalScript_evalElem=[];}};var tmpElem=document.createElement('div');tmpElem.innerHTML=text;var results=tmpElem.getElementsByTagName('script');if(results==null){return;}
var headElem=document.getElementsByTagName('head')[0];var tmpElem=null;SUGAR.evalScript_waitCount=0;SUGAR.evalScript_evalElem=(typeof SUGAR.evalScript_evalElem=="object")?SUGAR.evalScript_evalElem:new Array();for(var i=0;i<results.length;i++){if(typeof(results[i])!='object'){continue;};tmpElem=document.createElement('script');tmpElem.type='text/javascript';if(results[i].src!=null&&results[i].src!=''){tmpElem.src=results[i].src;}else{SUGAR.evalScript_evalElem[SUGAR.evalScript_evalElem.length]=results[i].text;continue;}
tmpElem.addEventListener('load',waitUntilLoaded);SUGAR.evalScript_waitCount++;headElem.appendChild(tmpElem);}
SUGAR.evalScript_waitCount++;waitUntilLoaded();return;}
var objRegex=/<\s*script([^>]*)>((.|\s|\v|\0)*?)<\s*\/script\s*>/igm;var lastIndex=-1;var result=objRegex.exec(text);while(result&&result.index>lastIndex){lastIndex=result.index
try{if(result[1].indexOf("src=")>-1){var srcRegex=/.*src=['"]([a-zA-Z0-9_\-\&\/\.\?=:-]*)['"].*/igm;var srcResult=result[1].replace(srcRegex,'$1');var r1=/:\/\//igm;if(r1.test(srcResult)&&srcResult.indexOf(window.location.hostname)==-1){YUI().use('get',function(Y){var url=srcResult;Y.Get.script(srcResult,{autopurge:false,onSuccess:function(o){},onFailure:function(o){},onTimeout:function(o){}});});}else{(function(srcResult){YUI().use("io-base",function(Y){var cfg,response;cfg={method:'GET',sync:true,on:{success:function(transactionid,response,arguments){SUGAR.util.globalEval(response.responseText);}}};response=Y.io(srcResult,cfg);});})(srcResult);}}else{var srcRegex=/<!--([\s\S]*?)-->/;var srcResult=srcRegex.exec(result[2]);if(srcResult&&srcResult.index>-1){SUGAR.util.globalEval(srcResult[1]);}else{SUGAR.util.globalEval(result[2]);}}}catch(e){if(typeof(console)!="undefined"&&typeof(console.log)=="function"){console.log("error adding script");console.log(e);console.log(result);}}
result=objRegex.exec(text);}},getLeftColObj:function(){leftColObj=document.getElementById('leftCol');while(leftColObj.nodeName!='TABLE'){leftColObj=leftColObj.firstChild;}
leftColTable=leftColObj;leftColTd=leftColTable.getElementsByTagName('td')[0];leftColTdRegion=YAHOO.util.Dom.getRegion(leftColTd);leftColTd.style.width=(leftColTdRegion.right-leftColTdRegion.left)+'px';return leftColTd;},fillShortcuts:function(e,shortcutContent){return;},retrieveAndFill:function(url,theDiv,postForm,callback,callbackParam,appendMode){if(typeof theDiv=='string'){try{theDiv=document.getElementById(theDiv);}catch(e){return;}}
var success=function(data){if(typeof theDiv!='undefined'&&theDiv!=null){try{if(typeof appendMode!='undefined'&&appendMode){theDiv.insertAdjacentHTML('beforeend',data.responseText);}else{theDiv.innerHTML=data.responseText;}}catch(e){return;}}
if(typeof callback!='undefined'&&callback!=null)
callback(callbackParam);}
if(typeof postForm=='undefined'||postForm==null){var cObj=YAHOO.util.Connect.asyncRequest('GET',url,{success:success,failure:success});}else{YAHOO.util.Connect.setForm(postForm);var cObj=YAHOO.util.Connect.asyncRequest('POST',url,{success:success,failure:success});}},checkMaxLength:function(){var maxLength=this.getAttribute('maxlength');var currentLength=this.value.length;if(currentLength>maxLength){this.value=this.value.substring(0,maxLength);}},setMaxLength:function(){var x=document.getElementsByTagName('textarea');for(var i=0;i<x.length;i++){if(x[i].getAttribute('maxlength')){x[i].onkeyup=x[i].onchange=SUGAR.util.checkMaxLength;x[i].onkeyup();}}},showHelpTips:function(el,helpText,myPos,atPos,id){if(myPos==undefined||myPos==""){myPos="left top";}
if(atPos==undefined||atPos==""){atPos="right top";}
var pos=$(el).offset(),ofWidth=$(el).width(),elmId=id||'helpTip'+pos.left+'_'+ofWidth,$dialog=elmId?($("#"+elmId).length>0?$("#"+elmId):$('<div></div>').attr("id",elmId)):$('<div></div>');$dialog.html(helpText).dialog({autoOpen:false,title:SUGAR.language.get('app_strings','LBL_HELP'),position:{my:myPos,at:atPos,of:$(el)}});var width=$dialog.dialog("option","width");if((pos.left+ofWidth)-40<width){$dialog.dialog("option","position",{my:'left top',at:'right top',of:$(el)});}
$dialog.dialog('open');$(".ui-dialog").appendTo("#content");},getStaticAdditionalDetails:function(el,body,caption,show_buttons){if(typeof show_buttons=="undefined"){show_buttons=false;}
$(".ui-dialog").find(".open").dialog("close");var $dialog=$('<div class="open"></div>').html(body).dialog({autoOpen:false,title:caption,width:300,position:{my:'right top',at:'left top',of:$(el)}});if(show_buttons){$(".ui-dialog").find('.ui-dialog-titlebar-close').css("display","none");$(".ui-dialog").find('.ui-dialog-title').css("width","100%");}
var width=$dialog.dialog("option","width");var pos=$(el).offset();var ofWidth=$(el).width();if((pos.left+ofWidth)-40<width){$dialog.dialog("option","position",{my:'left top',at:'right top',of:$(el)});}
$dialog.dialog('open');$(".ui-dialog").appendTo("#content");},closeStaticAdditionalDetails:function(){$(".ui-dialog").find(".open").dialog("close");},getAdditionalDetails:function(bean,id,spanId,show_buttons){if(typeof show_buttons=="undefined")
show_buttons=false;var el='#'+spanId;go=function(){oReturn=function(body,caption,width,theme){$(".ui-dialog").find(".open").dialog("close");var $dialog=$('<div class="open"></div>').html(body).dialog({autoOpen:false,title:caption,width:300,position:{my:'right top',at:'left top',of:$(el)}});if(show_buttons){$(".ui-dialog").find('.ui-dialog-titlebar-close').css("display","none");$(".ui-dialog").find('.ui-dialog-title').css("width","100%");}
var width=$dialog.dialog("option","width");var pos=$(el).offset();var ofWidth=$(el).width();if((pos.left+ofWidth)-40<width){$dialog.dialog("option","position",{my:'left top',at:'right top',of:$(el)});}
$(".ui-dialog").appendTo("#content");$dialog.dialog('open');}
success=function(data){SUGAR.util.globalEval(data.responseText);SUGAR.util.additionalDetailsCache[id]=new Array();SUGAR.util.additionalDetailsCache[id]['body']=result['body'];SUGAR.util.additionalDetailsCache[id]['caption']=result['caption'];SUGAR.util.additionalDetailsCache[id]['width']=result['width'];SUGAR.util.additionalDetailsCache[id]['theme']=result['theme'];ajaxStatus.hideStatus();return oReturn(SUGAR.util.additionalDetailsCache[id]['body'],SUGAR.util.additionalDetailsCache[id]['caption'],SUGAR.util.additionalDetailsCache[id]['width'],SUGAR.util.additionalDetailsCache[id]['theme']);}
if(typeof SUGAR.util.additionalDetailsCache[id]!='undefined')
return oReturn(SUGAR.util.additionalDetailsCache[id]['body'],SUGAR.util.additionalDetailsCache[id]['caption'],SUGAR.util.additionalDetailsCache[id]['width'],SUGAR.util.additionalDetailsCache[id]['theme']);if(typeof SUGAR.util.additionalDetailsCalls[id]!='undefined')
return;ajaxStatus.showStatus(SUGAR.language.get('app_strings','LBL_LOADING'));url='index.php?to_pdf=1&module=Home&action=AdditionalDetailsRetrieve&bean='+bean+'&id='+id;if(show_buttons)
url+='&show_buttons=true';SUGAR.util.additionalDetailsCalls[id]=YAHOO.util.Connect.asyncRequest('GET',url,{success:success,failure:success});return false;}
SUGAR.util.additionalDetailsRpcCall=window.setTimeout('go()',250);},clearAdditionalDetailsCall:function(){if(typeof SUGAR.util.additionalDetailsRpcCall=='number')
window.clearTimeout(SUGAR.util.additionalDetailsRpcCall);},extend:function(subc,superc,overrides){subc.prototype=new superc;if(overrides){for(var i in overrides)
subc.prototype[i]=overrides[i];}},hrefURL:function(url){if(SUGAR.isIE){var trampoline=document.createElement('a');trampoline.href=url;document.body.appendChild(trampoline);trampoline.click();document.body.removeChild(trampoline);}else{document.location.href=url;}},openWindow:function(URL,windowName,windowFeatures){if(SUGAR.isIE){win=window.open('',windowName,windowFeatures);var trampoline=document.createElement('a');trampoline.href=URL;trampoline.target=windowName;document.body.appendChild(trampoline);trampoline.click();document.body.removeChild(trampoline);}else{win=window.open(URL,windowName,windowFeatures);}
return win;},top:function(){window.scroll(0,0);},doWhen:function(condition,fn,params,scope){this._doWhenStack.push({check:condition,fn:fn,obj:params,overrideContext:scope});this._doWhenretryCount=50;this._startDoWhenInterval();},_startDoWhenInterval:function(){if(!this._doWhenInterval){this._doWhenInterval=YAHOO.lang.later(50,this,this._doWhenCheck,null,true);}},_doWhenStack:[],_doWhenInterval:false,_doWhenCheck:function(){if(this._doWhenStack.length===0){this._doWhenretryCount=0;if(this._doWhenInterval){this._doWhenInterval.cancel();this._doWhenInterval=null;}
return;}
if(this._doWhenLocked){return;}
if(SUGAR.isIE){if(!YAHOO.util.Event.DOMReady){this._startDoWhenInterval();return;}}
this._doWhenLocked=true;var tryAgain=YAHOO.util.Event.DOMReady;if(!tryAgain){tryAgain=(this._doWhenretryCount>0&&this._doWhenStack.length>0);}
var notAvail=[];var executeItem=function(context,item){if(item.overrideContext){if(item.overrideContext===true){context=item.obj;}else{context=item.overrideContext;}}
if(item.fn){item.fn.call(context,item.obj);}};var i,len,item,test;for(i=0,len=this._doWhenStack.length;i<len;i=i+1){item=this._doWhenStack[i];if(item){test=item.check;SUGAR.util.globalEval('e=('+test+')');if((typeof(test)=="string"&&e)||(typeof(test)=="function"&&test())){executeItem(this,item);this._doWhenStack[i]=null;}else{notAvail.push(item);}}}
this._doWhenretryCount--;if(tryAgain){for(i=this._doWhenStack.length-1;i>-1;i--){item=this._doWhenStack[i];if(!item||!item.check){this._doWhenStack.splice(i,1);}}
this._startDoWhenInterval();}else{if(this._doWhenInterval){this._doWhenInterval.cancel();this._doWhenInterval=null;}}
this._doWhenLocked=false;},buildAccessKeyLabels:function(){if(typeof(Y.env.ua)!=='undefined'){envStr='';browserOS=Y.env.ua['os'];isIE=Y.env.ua['ie'];isCR=Y.env.ua['chrome'];isFF=Y.env.ua['gecko'];isWK=Y.env.ua['webkit'];isOP=Y.env.ua['opera'];controlKey='';if(browserOS=='macintosh'){if(isIE){controlKey='Alt+';}else if(isWK||isFF){controlKey='Ctrl+Opt+';}else if(isOP){controlKey='Shift+Esc: ';}else{controlKey='Ctrl+';}}else{if(isFF){controlKey='Alt+Shift+';}else if(isOP){controlKey='Shift+Esc: ';}else{controlKey='Alt+';}}
allButtons=document.getElementsByTagName('input');for(i=0;i<allButtons.length;i++){if(allButtons[i].getAttribute('accesskey')&&allButtons[i].getAttribute('type')&&allButtons[i].getAttribute('type')=='button'){allButtons[i].setAttribute('title',allButtons[i].getAttribute('title')+' ['+controlKey+allButtons[i].getAttribute('accesskey')+']');}}
$("#shortcuts_dialog").html(function(i,text){return text.replace(/Alt\+/g,controlKey);});}}};}();SUGAR.util.additionalDetailsCache=new Array();SUGAR.util.additionalDetailsCalls=new Array();if(typeof YAHOO!='undefined')
YAHOO.util.Event.addListener(window,'load',SUGAR.util.setMaxLength);SUGAR.savedViews=function(){var selectedOrderBy;var selectedSortOrder;var displayColumns;var hideTabs;var columnsMeta;return{setChooser:function(){var displayColumnsDef=new Array();var hideTabsDef=new Array();var left_td=document.getElementById('display_tabs_td');if(typeof left_td=='undefined'||left_td==null)
return;var right_td=document.getElementById('hide_tabs_td');var displayTabs=left_td.getElementsByTagName('select')[0];var hideTabs=right_td.getElementsByTagName('select')[0];for(i=0;i<displayTabs.options.length;i++){displayColumnsDef.push(displayTabs.options[i].value);}
if(typeof hideTabs!='undefined'){for(i=0;i<hideTabs.options.length;i++){hideTabsDef.push(hideTabs.options[i].value);}}
if(!SUGAR.savedViews.clearColumns)
document.getElementById('displayColumnsDef').value=displayColumnsDef.join('|');document.getElementById('hideTabsDef').value=hideTabsDef.join('|');},select:function(saved_search_select){for(var wp=0;wp<document.search_form.saved_search_select.options.length;wp++){if(typeof document.search_form.saved_search_select.options[wp].value!='undefined'&&document.search_form.saved_search_select.options[wp].value==saved_search_select){document.search_form.saved_search_select.selectedIndex=wp;document.search_form.ss_delete.style.display='';document.search_form.ss_update.style.display='';}}},saved_search_action:function(action,delete_lang){if(action=='delete'){if(!confirm(delete_lang))
return;}
if(action=='save'){if(document.search_form.saved_search_name.value.replace(/^\s*|\s*$/g,'')==''){alert(SUGAR.language.get('app_strings','LBL_SAVED_SEARCH_ERROR'));return;}}
if(document.search_form.saved_search_action){document.search_form.saved_search_action.value=action;document.search_form.search_module.value=document.search_form.module.value;document.search_form.module.value='SavedSearch';document.search_form.action.value='index';}
SUGAR.ajaxUI.submitForm(document.search_form);},shortcut_select:function(selectBox,module){this.shortcutDropdown(selectBox.options[selectBox.selectedIndex].value,module);},shortcutDropdown:function(value,module){selecturl='index.php?module=SavedSearch&search_module='+module+'&action=index&saved_search_select='+value
if(typeof(document.getElementById('searchFormTab'))!='undefined'){selecturl=selecturl+'&searchFormTab='+document.search_form.searchFormTab.value;}
if(document.getElementById('showSSDIV')&&(typeof(document.getElementById('showSSDIV'))!='undefined')){selecturl=selecturl+'&showSSDIV='+document.getElementById('showSSDIV').value;}
document.location.href=selecturl;},handleForm:function(){SUGAR.tabChooser.movementCallback=function(left_side,right_side){while(document.getElementById('orderBySelect').childNodes.length!=0){document.getElementById('orderBySelect').removeChild(document.getElementById('orderBySelect').lastChild);}
var selectedIndex=0;var nodeCount=-1;for(i in left_side.childNodes){if(typeof left_side.childNodes[i].nodeName!='undefined'&&left_side.childNodes[i].nodeName.toLowerCase()=='option'&&typeof SUGAR.savedViews.columnsMeta[left_side.childNodes[i].value]!='undefined'&&typeof SUGAR.savedViews.columnsMeta[left_side.childNodes[i].value]['sortable']=='undefined'&&SUGAR.savedViews.columnsMeta[left_side.childNodes[i].value]['sortable']!=false){nodeCount++;optionNode=document.createElement('option');optionNode.value=left_side.childNodes[i].value;optionNode.innerHTML=left_side.childNodes[i].innerHTML;document.getElementById('orderBySelect').appendChild(optionNode);if(optionNode.value==SUGAR.savedViews.selectedOrderBy)
selectedIndex=nodeCount;}}
document.getElementById('orderBySelect').selectedIndex=selectedIndex;};SUGAR.tabChooser.movementCallback(document.getElementById('display_tabs_td').getElementsByTagName('select')[0]);if(document.search_form.orderBy){if(document.search_form.orderBy.length>1&&document.search_form.orderBy[1].type=='select-one'){document.search_form.orderBy[1].options.value=SUGAR.savedViews.selectedOrderBy;}else{document.search_form.orderBy.options.value=SUGAR.savedViews.selectedOrderBy;}}
if(SUGAR.savedViews.selectedSortOrder=='DESC')
document.getElementById('sort_order_desc_radio').checked=true;else
document.getElementById('sort_order_asc_radio').checked=true;}};}();SUGAR.searchForm=function(){var url;return{searchFormSelect:function(view,previousView){var module=view.split('|')[0];var theView=view.split('|')[1];var handleDisplay=function(){document.search_form.searchFormTab.value=theView;patt=module+"(.*)SearchForm$";divId=document.search_form.getElementsByTagName('div');for(i=0;i<divId.length;i++){if(divId[i].id.match(module)==module){if(divId[i].id.match('SearchForm')=='SearchForm'){if(document.getElementById(divId[i].id).style.display==''){previousTab=divId[i].id.match(patt)[1];}
document.getElementById(divId[i].id).style.display='none';}}}
adv=document.getElementById('advanced_search_link');bas=document.getElementById('basic_search_link');if(adv!==null){adv.setAttribute('accesskey','');}
if(bas!==null){bas.setAttribute('accesskey','');}
a_key=SUGAR.language.get("app_strings","LBL_ADV_SEARCH_LNK_KEY");if(theView==='advanced_search'){if(bas!==null){bas.setAttribute('accesskey',a_key);}}else{if(adv!==null){adv.setAttribute('accesskey',a_key);}}
document.getElementById(module+theView+'SearchForm').style.display='';if(previousView){thepreviousView=previousView.split('|')[1];}else{thepreviousView=previousTab;}
thepreviousView=thepreviousView.replace(/_search/,"");for(num in document.search_form.elements){if(document.search_form.elements[num]){el=document.search_form.elements[num];pattern="^(.*)_"+thepreviousView+"$";if(typeof el.type!='undefined'&&typeof el.name!='undefined'&&el.name.match(pattern)){advanced_input_name=el.name.match(pattern)[1];advanced_input_name=advanced_input_name+"_"+theView.replace(/_search/,"");if(typeof document.search_form[advanced_input_name]!='undefined')
SUGAR.searchForm.copyElement(advanced_input_name,el);}}}
if(document.getElementById(module+thepreviousView+'_search'+'SearchForm')){document.getElementById(module+thepreviousView+'_search'+'SearchForm').innerHTML='';}}
if(document.getElementById(module+theView+'SearchForm').innerHTML==''){ajaxStatus.showStatus(SUGAR.language.get('app_strings','LBL_LOADING'));var success=function(data){document.getElementById(module+theView+'SearchForm').innerHTML=data.responseText;SUGAR.util.evalScript(data.responseText);if(theView=='saved_views'){if(typeof columnsMeta!='undefined')
SUGAR.savedViews.columnsMeta=columnsMeta;if(typeof selectedOrderBy!='undefined')
SUGAR.savedViews.selectedOrderBy=selectedOrderBy;if(typeof selectedSortOrder!='undefined')
SUGAR.savedViews.selectedSortOrder=selectedSortOrder;}
handleDisplay();enableQS(true);ajaxStatus.hideStatus();}
url='index.php?module='+module+'&action=index&search_form_only=true&to_pdf=true&search_form_view='+theView;var tpl='';if(document.getElementById('search_tpl')!=null&&typeof(document.getElementById('search_tpl'))!='undefined'){tpl=document.getElementById('search_tpl').value;if(tpl!=''){url+='&search_tpl='+tpl;}}
if(theView=='saved_views')
url+='&displayColumns='+SUGAR.savedViews.displayColumns+'&hideTabs='+SUGAR.savedViews.hideTabs+'&orderBy='+SUGAR.savedViews.selectedOrderBy+'&sortOrder='+SUGAR.savedViews.selectedSortOrder;var cObj=YAHOO.util.Connect.asyncRequest('GET',url,{success:success,failure:success});}else{handleDisplay();}},copyElement:function(inputName,copyFromElement){switch(copyFromElement.type){case'select-one':case'text':document.search_form[inputName].value=copyFromElement.value;break;}},clear_form:function(form,skipElementNames){var elemList=form.elements;var elem;var elemType;for(var i=0;i<elemList.length;i++){elem=elemList[i];if(typeof(elem.type)=='undefined'){continue;}
if(typeof(elem.type)!='undefined'&&typeof(skipElementNames)!='undefined'&&SUGAR.util.arrayIndexOf(skipElementNames,elem.name)!=-1){continue;}
elemType=elem.type.toLowerCase();if(elemType=='text'||elemType=='textarea'||elemType=='password'){elem.value='';}else if(elemType=='select-one'){var optionList=elem.options,selectedIndex=0;for(var ii=0;ii<optionList.length;ii++){if(optionList[ii].value==''){selectedIndex=ii;break;}}
if(optionList.length>0){optionList[selectedIndex].selected="selected";}}else if(elemType=='select-multiple'){var optionList=elem.options;for(var ii=0;ii<optionList.length;ii++){optionList[ii].selected=false;}}else if(elemType=='radio'||elemType=='checkbox'){elem.checked=false;elem.selected=false;}else if(elemType=='hidden'){if(elem.name.indexOf("_id")!=-1||elem.name.indexOf("_c")!=-1||elem.name.indexOf("_advanced")!=-1){elem.value='';}}}
if(typeof(collection)!=='undefined'){for(key in collection){collection[key].clean_up();}}
SUGAR.searchForm.clearBasicSearchOrderToDefault(form);SUGAR.savedViews.clearColumns=true;},clearBasicSearchOrderToDefault:function(form){if(form.elements['searchFormTab']){var formType=form.elements['searchFormTab'].value;if(formType=='basic_search'){form.elements['orderBy'].value='DATE_ENTERED';form.elements['sortOrder'].value='DESC';}}}};}();SUGAR.tabChooser=function(){var object_refs=new Array();return{frozenOptions:[],movementCallback:function(left_side,right_side){},orderCallback:function(left_side,right_side){},freezeOptions:function(left_name,right_name,target){if(!SUGAR.tabChooser.frozenOptions){SUGAR.tabChooser.frozenOptions=[];}
if(!SUGAR.tabChooser.frozenOptions[left_name]){SUGAR.tabChooser.frozenOptions[left_name]=[];}
if(!SUGAR.tabChooser.frozenOptions[left_name][right_name]){SUGAR.tabChooser.frozenOptions[left_name][right_name]=[];}
if(typeof target=='array'){for(var i in target){SUGAR.tabChooser.frozenOptions[left_name][right_name][target[i]]=true;}}else{SUGAR.tabChooser.frozenOptions[left_name][right_name][target]=true;}},buildSelectHTML:function(info){var text="<select";if(typeof(info['select']['size'])!='undefined'){text+=" size=\""+info['select']['size']+"\"";}
if(typeof(info['select']['id'])!='undefined'){text+=" id=\""+info['select']['id']+"\"";}
if(typeof(info['select']['name'])!='undefined'){text+=" name=\""+info['select']['name']+"\"";}
if(typeof(info['select']['style'])!='undefined'){text+=" style=\""+info['select']['style']+"\"";}
if(typeof(info['select']['onchange'])!='undefined'){text+=" onChange=\""+info['select']['onchange']+"\"";}
if(typeof(info['select']['multiple'])!='undefined'){text+=" multiple";}
text+=">";for(i=0;i<info['options'].length;i++){option=info['options'][i];text+="<option value=\""+option['value']+"\" ";if(typeof(option['selected'])!='undefined'&&option['selected']==true){text+="SELECTED";}
text+=">"+option['text']+"</option>";}
text+="</select>";return text;},left_to_right:function(left_name,right_name,left_size,right_size){SUGAR.savedViews.clearColumns=false;var left_td=document.getElementById(left_name+'_td');var right_td=document.getElementById(right_name+'_td');var display_columns_ref=left_td.getElementsByTagName('select')[0];var hidden_columns_ref=right_td.getElementsByTagName('select')[0];var selected_left=new Array();var notselected_left=new Array();var notselected_right=new Array();var left_array=new Array();var frozen_options=SUGAR.tabChooser.frozenOptions;frozen_options=frozen_options&&frozen_options[left_name]&&frozen_options[left_name][right_name]?frozen_options[left_name][right_name]:[];for(i=0;i<display_columns_ref.options.length;i++){if(display_columns_ref.options[i].selected==true&&!frozen_options[display_columns_ref.options[i].value]){selected_left[selected_left.length]={text:display_columns_ref.options[i].text,value:display_columns_ref.options[i].value};}else{notselected_left[notselected_left.length]={text:display_columns_ref.options[i].text,value:display_columns_ref.options[i].value};}}
for(i=0;i<hidden_columns_ref.options.length;i++){notselected_right[notselected_right.length]={text:hidden_columns_ref.options[i].text,value:hidden_columns_ref.options[i].value};}
var left_select_html_info=new Object();var left_options=new Array();var left_select=new Object();left_select['name']=left_name+'[]';left_select['id']=left_name;left_select['size']=left_size;left_select['multiple']='true';var right_select_html_info=new Object();var right_options=new Array();var right_select=new Object();right_select['name']=right_name+'[]';right_select['id']=right_name;right_select['size']=right_size;right_select['multiple']='true';for(i=0;i<notselected_right.length;i++){right_options[right_options.length]=notselected_right[i];}
for(i=0;i<selected_left.length;i++){right_options[right_options.length]=selected_left[i];}
for(i=0;i<notselected_left.length;i++){left_options[left_options.length]=notselected_left[i];}
left_select_html_info['options']=left_options;left_select_html_info['select']=left_select;right_select_html_info['options']=right_options;right_select_html_info['select']=right_select;right_select_html_info['style']='background: lightgrey';var left_html=this.buildSelectHTML(left_select_html_info);var right_html=this.buildSelectHTML(right_select_html_info);left_td.innerHTML=left_html;right_td.innerHTML=right_html;object_refs[left_name]=left_td.getElementsByTagName('select')[0];object_refs[right_name]=right_td.getElementsByTagName('select')[0];this.movementCallback(object_refs[left_name],object_refs[right_name]);return false;},right_to_left:function(left_name,right_name,left_size,right_size,max_left){SUGAR.savedViews.clearColumns=false;var left_td=document.getElementById(left_name+'_td');var right_td=document.getElementById(right_name+'_td');var display_columns_ref=left_td.getElementsByTagName('select')[0];var hidden_columns_ref=right_td.getElementsByTagName('select')[0];var selected_right=new Array();var notselected_right=new Array();var notselected_left=new Array();var frozen_options=SUGAR.tabChooser.frozenOptions;frozen_options=SUGAR.tabChooser.frozenOptions&&SUGAR.tabChooser.frozenOptions[right_name]&&SUGAR.tabChooser.frozenOptions[right_name][left_name]?SUGAR.tabChooser.frozenOptions[right_name][left_name]:[];for(i=0;i<hidden_columns_ref.options.length;i++){if(hidden_columns_ref.options[i].selected==true&&!frozen_options[hidden_columns_ref.options[i].value]){selected_right[selected_right.length]={text:hidden_columns_ref.options[i].text,value:hidden_columns_ref.options[i].value};}else{notselected_right[notselected_right.length]={text:hidden_columns_ref.options[i].text,value:hidden_columns_ref.options[i].value};}}
if(max_left!=''&&(display_columns_ref.length+selected_right.length)>max_left){alert('Maximum of '+max_left+' columns can be displayed.');return;}
for(i=0;i<display_columns_ref.options.length;i++){notselected_left[notselected_left.length]={text:display_columns_ref.options[i].text,value:display_columns_ref.options[i].value};}
var left_select_html_info=new Object();var left_options=new Array();var left_select=new Object();left_select['name']=left_name+'[]';left_select['id']=left_name;left_select['multiple']='true';left_select['size']=left_size;var right_select_html_info=new Object();var right_options=new Array();var right_select=new Object();right_select['name']=right_name+'[]';right_select['id']=right_name;right_select['multiple']='true';right_select['size']=right_size;for(i=0;i<notselected_left.length;i++){left_options[left_options.length]=notselected_left[i];}
for(i=0;i<selected_right.length;i++){left_options[left_options.length]=selected_right[i];}
for(i=0;i<notselected_right.length;i++){right_options[right_options.length]=notselected_right[i];}
left_select_html_info['options']=left_options;left_select_html_info['select']=left_select;right_select_html_info['options']=right_options;right_select_html_info['select']=right_select;right_select_html_info['style']='background: lightgrey';var left_html=this.buildSelectHTML(left_select_html_info);var right_html=this.buildSelectHTML(right_select_html_info);left_td.innerHTML=left_html;right_td.innerHTML=right_html;object_refs[left_name]=left_td.getElementsByTagName('select')[0];object_refs[right_name]=right_td.getElementsByTagName('select')[0];this.movementCallback(object_refs[left_name],object_refs[right_name]);return false;},up:function(name,left_name,right_name){SUGAR.savedViews.clearColumns=false;var left_td=document.getElementById(left_name+'_td');var right_td=document.getElementById(right_name+'_td');var td=document.getElementById(name+'_td');var obj=td.getElementsByTagName('select')[0];obj=(typeof obj=="string")?document.getElementById(obj):obj;if(obj.tagName.toLowerCase()!="select"&&obj.length<2)
return false;var sel=new Array();for(i=0;i<obj.length;i++){if(obj[i].selected==true){sel[sel.length]=i;}}
for(i=0;i<sel.length;i++){if(sel[i]!=0&&!obj[sel[i]-1].selected){var tmp=new Array(obj[sel[i]-1].text,obj[sel[i]-1].value);obj[sel[i]-1].text=obj[sel[i]].text;obj[sel[i]-1].value=obj[sel[i]].value;obj[sel[i]].text=tmp[0];obj[sel[i]].value=tmp[1];obj[sel[i]-1].selected=true;obj[sel[i]].selected=false;}}
object_refs[left_name]=left_td.getElementsByTagName('select')[0];object_refs[right_name]=right_td.getElementsByTagName('select')[0];this.orderCallback(object_refs[left_name],object_refs[right_name]);return false;},down:function(name,left_name,right_name){SUGAR.savedViews.clearColumns=false;var left_td=document.getElementById(left_name+'_td');var right_td=document.getElementById(right_name+'_td');var td=document.getElementById(name+'_td');var obj=td.getElementsByTagName('select')[0];if(obj.tagName.toLowerCase()!="select"&&obj.length<2)
return false;var sel=new Array();for(i=obj.length-1;i>-1;i--){if(obj[i].selected==true){sel[sel.length]=i;}}
for(i=0;i<sel.length;i++){if(sel[i]!=obj.length-1&&!obj[sel[i]+1].selected){var tmp=new Array(obj[sel[i]+1].text,obj[sel[i]+1].value);obj[sel[i]+1].text=obj[sel[i]].text;obj[sel[i]+1].value=obj[sel[i]].value;obj[sel[i]].text=tmp[0];obj[sel[i]].value=tmp[1];obj[sel[i]+1].selected=true;obj[sel[i]].selected=false;}}
object_refs[left_name]=left_td.getElementsByTagName('select')[0];object_refs[right_name]=right_td.getElementsByTagName('select')[0];this.orderCallback(object_refs[left_name],object_refs[right_name]);return false;}};}();SUGAR.language=function(){return{languages:new Array(),setLanguage:function(module,data){if(!SUGAR.language.languages){}
SUGAR.language.languages[module]=data;},get:function(module,str){if(typeof SUGAR.language.languages[module]=='undefined'||typeof SUGAR.language.languages[module][str]=='undefined'){return'undefined';}
return SUGAR.language.languages[module][str];},translate:function(module,str){text=this.get(module,str);return text!='undefined'?text:this.get('app_strings',str);}}}();SUGAR.contextMenu=function(){return{objects:new Object(),objectTypes:new Object(),registerObject:function(objectType,id,metaData){SUGAR.contextMenu.objects[id]=new Object();SUGAR.contextMenu.objects[id]={'objectType':objectType,'metaData':metaData};},registerObjectType:function(name,menuItems){SUGAR.contextMenu.objectTypes[name]=new Object();SUGAR.contextMenu.objectTypes[name]={'menuItems':menuItems,'objects':new Array()};},getListItemFromEventTarget:function(p_oNode){var oLI;if(p_oNode.tagName=="LI"){oLI=p_oNode;}else{do{if(p_oNode.tagName=="LI"){oLI=p_oNode;break;}}while((p_oNode=p_oNode.parentNode));}
return oLI;},onContextMenuMove:function(){var oNode=this.contextEventTarget;var bDisabled=(oNode.tagName=="UL");var i=this.getItemGroups()[0].length-1;do{this.getItem(i).cfg.setProperty("disabled",bDisabled);}while(i--);},onContextMenuItemClick:function(p_sType,p_aArguments,p_oItem){var oLI=SUGAR.contextMenu.getListItemFromEventTarget(this.parent.contextEventTarget);id=this.parent.contextEventTarget.parentNode.id;funct=SUGAR.util.globalEval(SUGAR.contextMenu.objectTypes[SUGAR.contextMenu.objects[id]['objectType']]['menuItems'][this.index]['action']);funct(this.parent.contextEventTarget,SUGAR.contextMenu.objects[id]['metaData']);},init:function(){for(var i in SUGAR.contextMenu.objects){if(typeof SUGAR.contextMenu.objectTypes[SUGAR.contextMenu.objects[i]['objectType']]['objects']=='undefined')
SUGAR.contextMenu.objectTypes[SUGAR.contextMenu.objects[i]['objectType']]['objects']=new Array();SUGAR.contextMenu.objectTypes[SUGAR.contextMenu.objects[i]['objectType']]['objects'].push(document.getElementById(i));}
for(var i in SUGAR.contextMenu.objectTypes){var oContextMenu=new YAHOO.widget.ContextMenu(i,{'trigger':SUGAR.contextMenu.objectTypes[i]['objects']});var aMainMenuItems=SUGAR.contextMenu.objectTypes[i]['menuItems'];var nMainMenuItems=aMainMenuItems.length;var oMenuItem;for(var j=0;j<nMainMenuItems;j++){oMenuItem=new YAHOO.widget.ContextMenuItem(aMainMenuItems[j].text,{helptext:aMainMenuItems[j].helptext});oMenuItem.clickEvent.subscribe(SUGAR.contextMenu.onContextMenuItemClick,oMenuItem,true);oContextMenu.addItem(oMenuItem);}
oContextMenu.moveEvent.subscribe(SUGAR.contextMenu.onContextMenuMove,oContextMenu,true);oContextMenu.keyDownEvent.subscribe(SUGAR.contextMenu.onContextMenuItemClick,oContextMenu,true);oContextMenu.render(document.body);}}};}();SUGAR.contextMenu.actions=function(){return{createNote:function(itemClicked,metaData){loc='index.php?module=Notes&action=EditView';for(i in metaData){if(i=='notes_parent_type')
loc+='&parent_type='+metaData[i];else if(i!='module'&&i!='parent_type')
loc+='&'+i+'='+metaData[i];}
document.location=loc;},scheduleMeeting:function(itemClicked,metaData){loc='index.php?module=Meetings&action=EditView';for(i in metaData){if(i!='module')
loc+='&'+i+'='+metaData[i];}
document.location=loc;},scheduleCall:function(itemClicked,metaData){loc='index.php?module=Calls&action=EditView';for(i in metaData){if(i!='module')
loc+='&'+i+'='+metaData[i];}
document.location=loc;},createContact:function(itemClicked,metaData){loc='index.php?module=Contacts&action=EditView';for(i in metaData){if(i!='module')
loc+='&'+i+'='+metaData[i];}
document.location=loc;},createTask:function(itemClicked,metaData){loc='index.php?module=Tasks&action=EditView';for(i in metaData){if(i!='module')
loc+='&'+i+'='+metaData[i];}
document.location=loc;},createOpportunity:function(itemClicked,metaData){loc='index.php?module=Opportunities&action=EditView';for(i in metaData){if(i!='module')
loc+='&'+i+'='+metaData[i];}
document.location=loc;},createCase:function(itemClicked,metaData){loc='index.php?module=Cases&action=EditView';for(i in metaData){if(i!='module')
loc+='&'+i+'='+metaData[i];}
document.location=loc;},addToFavorites:function(itemClicked,metaData){success=function(data){}
var cObj=YAHOO.util.Connect.asyncRequest('GET','index.php?to_pdf=true&module=Home&action=AddToFavorites&target_id='+metaData['id']+'&target_module='+metaData['module'],{success:success,failure:success});}};}();var popup_request_data;var close_popup;function get_popup_request_data(){return YAHOO.lang.JSON.stringify(window.document.popup_request_data);}
function get_close_popup(){return window.document.close_popup;}
function open_popup(module_name,width,height,initial_filter,close_popup,hide_clear_button,popup_request_data,popup_mode,create,metadata){if(typeof(popupCount)=="undefined"||popupCount==0)
popupCount=1;window.document.popup_request_data=popup_request_data;window.document.close_popup=close_popup;width=(width==600)?800:width;height=(height==400)?800:height;URL='index.php?'
+'module='+module_name
+'&action=Popup';if(initial_filter!=''){URL+='&query=true'+initial_filter;popupName=initial_filter.replace(/[^a-z_0-9]+/ig,'_');windowName=module_name+'_popup_window'+popupName;}else{windowName=module_name+'_popup_window'+popupCount;}
popupCount++;if(hide_clear_button){URL+='&hide_clear_button=true';}
windowFeatures='width='+width
+',height='+height
+',resizable=1,scrollbars=1';if(popup_mode==''||popup_mode==undefined){popup_mode='single';}
URL+='&mode='+popup_mode;if(create==''||create==undefined){create='false';}
URL+='&create='+create;if(metadata!=''&&metadata!=undefined){URL+='&metadata='+metadata;}
if(popup_request_data.jsonObject){var request_data=popup_request_data.jsonObject;}else{var request_data=popup_request_data;}
var field_to_name_array_url='';if(request_data&&request_data.field_to_name_array!=undefined){for(var key in request_data.field_to_name_array){if(key.toLowerCase()!='id'){field_to_name_array_url+='&field_to_name[]='+encodeURIComponent(key.toLowerCase());}}}
if(field_to_name_array_url){URL+=field_to_name_array_url;}
win=SUGAR.util.openWindow(URL,windowName,windowFeatures);if(window.focus){win.focus();}
win.popupCount=popupCount;return win;}
var from_popup_return=false;function replaceHTMLChars(value){return value.replace(/&amp;/gi,'&').replace(/&lt;/gi,'<').replace(/&gt;/gi,'>').replace(/&#039;/gi,'\'').replace(/&quot;/gi,'"');}
function set_return_basic(popup_reply_data,filter){var form_name=popup_reply_data.form_name;var name_to_value_array=popup_reply_data.name_to_value_array;for(var the_key in name_to_value_array){if(the_key=='toJSON'){}else if(the_key.match(filter)){var displayValue=replaceHTMLChars(name_to_value_array[the_key]);if(window.document.forms[form_name]&&window.document.forms[form_name].elements[the_key]){if(window.document.forms[form_name].elements[the_key].length>1){var selectField=window.document.forms[form_name].elements[the_key+"_select"];if(selectField!=undefined){for(var i=0;i<selectField.options.length;i++){if(selectField.options[i].text==displayValue){selectField.options[i].selected=true;window.document.getElementById(the_key).value=selectField.options[i].value;SUGAR.util.callOnChangeListers(window.document.getElementById(the_key));SUGAR.util.callOnChangeListers(selectField);break;}}}}else{window.document.forms[form_name].elements[the_key].value=displayValue;SUGAR.util.callOnChangeListers(window.document.forms[form_name].elements[the_key]);}}}}}
function set_return(popup_reply_data){from_popup_return=true;var form_name=popup_reply_data.form_name;var name_to_value_array=popup_reply_data.name_to_value_array;if(typeof name_to_value_array!='undefined'&&name_to_value_array['account_id']){var label_str='';var label_data_str='';var current_label_data_str='';var popupConfirm=popup_reply_data.popupConfirm;for(var the_key in name_to_value_array){if(the_key=='toJSON'){}else{var displayValue=replaceHTMLChars(name_to_value_array[the_key]);if(window.document.forms[form_name]&&document.getElementById(the_key+'_label')&&!the_key.match(/account/)){var data_label=document.getElementById(the_key+'_label').innerHTML.replace(/\n/gi,'').replace(/<\/?[^>]+(>|$)/g,"");label_str+=data_label+' \n';label_data_str+=data_label+' '+displayValue+'\n';if(window.document.forms[form_name].elements[the_key]){current_label_data_str+=data_label+' '+window.document.forms[form_name].elements[the_key].value+'\n';}}}}
if(label_data_str!=label_str&&current_label_data_str!=label_str){if(typeof popupConfirm!='undefined'){if(popupConfirm>-1){set_return_basic(popup_reply_data,/\S/);}else{set_return_basic(popup_reply_data,/account/);}}
else if(confirm(SUGAR.language.get('app_strings','NTC_OVERWRITE_ADDRESS_PHONE_CONFIRM')+'\n\n'+label_data_str)){set_return_basic(popup_reply_data,/\S/);}else{set_return_basic(popup_reply_data,/account/);}}else if(label_data_str!=label_str&&current_label_data_str==label_str){set_return_basic(popup_reply_data,/\S/);}else if(label_data_str==label_str){set_return_basic(popup_reply_data,/account/);}}else{set_return_basic(popup_reply_data,/\S/);}}
function set_return_lead_conv(popup_reply_data){set_return(popup_reply_data);if(document.getElementById('lead_conv_ac_op_sel')&&typeof onBlurKeyUpHandler=='function'){onBlurKeyUpHandler();}}
function set_return_and_save(popup_reply_data){var form_name=popup_reply_data.form_name;var name_to_value_array=popup_reply_data.name_to_value_array;for(var the_key in name_to_value_array){if(the_key=='toJSON'){}else{window.document.forms[form_name].elements[the_key].value=name_to_value_array[the_key];}}
window.document.forms[form_name].return_module.value=window.document.forms[form_name].module.value;window.document.forms[form_name].return_action.value='DetailView';window.document.forms[form_name].return_id.value=window.document.forms[form_name].record.value;window.document.forms[form_name].action.value='Save';window.document.forms[form_name].submit();}
function get_initial_filter_by_account(form_name){var account_id=window.document.forms[form_name].account_id.value;var account_name=escape(window.document.forms[form_name].account_name.value);var initial_filter="&account_id="+account_id+"&account_name="+account_name;return initial_filter;}
function copyAddress(form,fromKey,toKey){var elems=new Array("address_street","address_city","address_state","address_postalcode","address_country");var checkbox=document.getElementById(toKey+"_checkbox");if(typeof checkbox!="undefined"){if(!checkbox.checked){for(x in elems){t=toKey+"_"+elems[x];document.getElementById(t).removeAttribute('readonly');}}else{for(x in elems){f=fromKey+"_"+elems[x];t=toKey+"_"+elems[x];document.getElementById(t).value=document.getElementById(f).value;document.getElementById(t).setAttribute('readonly',true);}}}
return true;}
function check_deletable_EmailTemplate(){id=document.getElementsByName('record')[0].value;currentForm=document.getElementById('form');var call_back={success:function(r){if(r.responseText=='true'){if(!confirm(SUGAR.language.get('app_strings','NTC_TEMPLATE_IS_USED'))){return false;}}else{if(!confirm(SUGAR.language.get('app_strings','NTC_DELETE_CONFIRMATION'))){return false;}}
currentForm.return_module.value='EmailTemplates';currentForm.return_action.value='ListView';currentForm.action.value='Delete';currentForm.submit();}};url="index.php?module=EmailTemplates&action=CheckDeletable&from=DetailView&to_pdf=1&record="+id;YAHOO.util.Connect.asyncRequest('POST',url,call_back,null);}
SUGAR.image={remove_upload_imagefile:function(field_name){var field=document.getElementById('remove_imagefile_'+field_name);field.value=1;var field=document.getElementById(field_name);field.style.display="";var field=document.getElementById('img_'+field_name);field.style.display="none";var field=document.getElementById('bt_remove_'+field_name);field.style.display="none";if(document.getElementById(field_name+'_duplicate')){var field=document.getElementById(field_name+'_duplicate');field.value="";}},confirm_imagefile:function(field_name){var field=document.getElementById(field_name);var filename=field.value;var fileExtension=filename.substring(filename.lastIndexOf(".")+1);fileExtension=fileExtension.toLowerCase();if(fileExtension=="jpg"||fileExtension=="jpeg"||fileExtension=="gif"||fileExtension=="png"||fileExtension=="bmp"){}else{field.value=null;alert(SUGAR.language.get('app_strings','LBL_UPLOAD_IMAGE_FILE_INVALID'));}},lightbox:function(image){if(typeof(SUGAR.image.lighboxWindow)=="undefined")
SUGAR.image.lighboxWindow=new YAHOO.widget.SimpleDialog('sugarImageViewer',{type:'message',modal:true,id:'sugarMsgWindow',close:true,title:"Alert",msg:"<img src='"+image+"'> </img>",buttons:[]});SUGAR.image.lighboxWindow.setBody("<img src='"+image+"'> </img>");SUGAR.image.lighboxWindow.render(document.body);SUGAR.image.lighboxWindow.show();SUGAR.image.lighboxWindow.center()}}
SUGAR.append(SUGAR.util,{isTouchScreen:function(){if(Get_Cookie("touchscreen")=='1'){return true;}
if((navigator.userAgent.match(/iPad/i)!=null)){return true;}
return false;},isLoginPage:function(content){if(SUGAR.util.isPackageManager()){return false;}
var loginPageStart="<!DOCTYPE";if(content.substr(0,loginPageStart.length)==loginPageStart&&content.indexOf("<html>")!=-1&&content.indexOf("login_module")!=-1){window.location.href=window.location.protocol+window.location.pathname;return true;}},isPackageManager:function(){if(typeof(document.the_form)!='undefined'&&typeof(document.the_form.language_pack_escaped)!='undefined'){return true;}else{return false;}},ajaxCallInProgress:function(){var t=true;if(typeof(send_back)!="function"){var c=document.getElementById("content");if(!c)
return true;t=YAHOO.lang.trim(SUGAR.util.innerText(c));}
return SUGAR_callsInProgress!=0||t=="";},innerText:function(el){if(el.tagName=="SCRIPT")
return"";if(typeof(el.innerText)=="string")
return el.innerText;var t="";for(var i in el.childNodes){var c=el.childNodes[i];if(typeof(c)!="object")
continue;if(typeof(c.nodeName)=="string"&&c.nodeName=="#text")
t+=c.nodeValue;else
t+=SUGAR.util.innerText(c);}
return t;},callOnChangeListers:function(field){var listeners=YAHOO.util.Event.getListeners(field,'change');if(listeners!=null){for(var i=0;i<listeners.length;i++){var l=listeners[i];l.fn.call(l.scope?l.scope:this,l.obj);}}},closeActivityPanel:{show:function(module,id,new_status,viewType,parentContainerId){if(SUGAR.util.closeActivityPanel.panel)
SUGAR.util.closeActivityPanel.panel.destroy();var singleModule=SUGAR.language.get("app_list_strings","moduleListSingular")[module];singleModule=(typeof(singleModule)!='undefined')?singleModule.toLowerCase():'';var closeText=SUGAR.language.get("app_strings","LBL_CLOSE_ACTIVITY_CONFIRM").replace("#module#",singleModule);SUGAR.util.closeActivityPanel.panel=new YAHOO.widget.SimpleDialog("closeActivityDialog",{width:"300px",fixedcenter:true,visible:false,draggable:false,close:true,text:closeText,constraintoviewport:true,buttons:[{text:SUGAR.language.get("app_strings","LBL_EMAIL_OK"),handler:function(){if(SUGAR.util.closeActivityPanel.panel)
SUGAR.util.closeActivityPanel.panel.hide();ajaxStatus.showStatus(SUGAR.language.get('app_strings','LBL_SAVING'));var args="action=save&id="+id+"&record="+id+"&status="+new_status+"&module="+module;var callback={success:function(){var parent=$('div[id^="dashlet_entire_"]').has($("#"+id));if(parent.length===0){window.location.reload(true)}else{SUGAR.mySugar.retrieveDashlet(parent.attr('id').replace("dashlet_entire_",""));}}}
YAHOO.util.Connect.asyncRequest('POST','index.php',callback,args);},isDefault:true},{text:SUGAR.language.get("app_strings","LBL_EMAIL_CANCEL"),handler:function(){SUGAR.util.closeActivityPanel.panel.hide();}}]});SUGAR.util.closeActivityPanel.panel.setHeader(SUGAR.language.get("app_strings","LBL_CLOSE_ACTIVITY_HEADER"));SUGAR.util.closeActivityPanel.panel.render(document.body);SUGAR.util.closeActivityPanel.panel.show();}},setEmailPasswordDisplay:function(id,exists,formName){link=document.getElementById(id+'_link');pwd=document.getElementById(id);if(!pwd||!link)
return;if(exists){pwd.disabled=true;pwd.style.display='none';link.style.display='';if(typeof(formName)!='undefined')
removeFromValidate(formName,id);}else{pwd.disabled=false;pwd.style.display='';link.style.display='none';}},setEmailPasswordEdit:function(id){link=document.getElementById(id+'_link');pwd=document.getElementById(id);if(!pwd||!link)
return;pwd.disabled=false;pwd.style.display='';link.style.display='none';},validateFileExt:function(fileName,allowedTypes){var ext=fileName.split('.').pop().toLowerCase();for(var i=allowedTypes.length;i>=0;i--){if(ext===allowedTypes[i]){return true;}}
return false;},arrayIndexOf:function(arr,val,start){if(typeof arr.indexOf=="function")
return arr.indexOf(val,start);for(var i=(start||0),j=arr.length;i<j;i++){if(arr[i]===val){return i;}}
return-1;}});SUGAR.clearRelateField=function(form,name,id){if(typeof form[name]=="object"){form[name].value='';SUGAR.util.callOnChangeListers(form[name]);}
if(typeof form[id]=="object"){form[id].value='';SUGAR.util.callOnChangeListers(form[id]);}};if(typeof(SUGAR.AutoComplete)=='undefined')
SUGAR.AutoComplete={};SUGAR.AutoComplete.getOptionsArray=function(options_index){var return_arr=[];var opts=SUGAR.language.get('app_list_strings',options_index);if(typeof(opts)!='undefined'){for(key in opts){if(key!=''&&opts[key]!=''){var item=[];item['key']=key;item['text']=opts[key];return_arr.push(item);}}}
return return_arr;}
if(typeof(SUGAR.MultiEnumAutoComplete)=='undefined')
SUGAR.MultiEnumAutoComplete={};SUGAR.MultiEnumAutoComplete.getMultiSelectKeysFromValues=function(options_index,val_string){var opts=SUGAR.language.get('app_list_strings',options_index);var selected_values=val_string.split(", ");if(selected_values.length>0&&selected_values.indexOf('')==selected_values.length-1){selected_values.pop();}
var final_arr=new Array();for(idx in selected_values){for(o_idx in opts){if(selected_values[idx]==opts[o_idx]){final_arr.push(o_idx);}}}
return final_arr;}
SUGAR.MultiEnumAutoComplete.getMultiSelectValuesFromKeys=function(options_index,val_string){var opts=SUGAR.language.get('app_list_strings',options_index);val_string=val_string.replace(/^\^/,'').replace(/\^$/,'')
var selected_values=val_string.split("^,^");if(selected_values.length>0&&selected_values.indexOf('')==selected_values.length-1){selected_values.pop();}
var final_arr=new Array();for(idx in selected_values){for(o_idx in opts){if(selected_values[idx]==o_idx){final_arr.push(opts[o_idx]);}}}
return final_arr;}
function convertReportDateTimeToDB(dateValue,timeValue){var date_match=dateValue.match(date_reg_format);var time_match=timeValue.match(/([0-9]{1,2})\:([0-9]{1,2})([ap]m)/);if(date_match!=null&&time_match!=null){time_match[1]=parseInt(time_match[1]);if(time_match[3]=='pm'){time_match[1]=time_match[1]+12;if(time_match[1]>=24){time_match[1]=time_match[1]-24;}}else if(time_match[3]=='am'&&time_match[1]==12){time_match[1]=0;}
if(time_match[1]<10){time_match[1]='0'+time_match[1];}
return date_match[date_reg_positions['Y']]+"-"+date_match[date_reg_positions['m']]+"-"+date_match[date_reg_positions['d']]+' '+time_match[1]+':'+time_match[2]+':00';}
return'';}/* End of File include/javascript/sugar_3.js */


SUGAR.ajaxUI={loadingWindow:false,callback:function(o)
{var cont;if(typeof window.onbeforeunload=="function")
window.onbeforeunload=null;scroll(0,0);try{var r=YAHOO.lang.JSON.parse(o.responseText);cont=r.content;if(r.title)
{document.title=html_entity_decode(r.title);}
if(r.action)
{action_sugar_grp1=r.action;}
if(r.menu.module)
{module_sugar_grp1=r.menu.module;}
if(r.favicon)
{SUGAR.ajaxUI.setFavicon(r.favicon);}
var c=document.getElementById("content");c.style.visibility='hidden';c.innerHTML=cont;SUGAR.util.evalScript(cont);c.style.visibility='visible';if(r.moduleList)
{SUGAR.themes.setModuleTabs(r.moduleList);}
if(typeof(r.responseTime)!='undefined'){var rt=$("#responseTime");if(rt.length>0){rt.html(rt.html().replace(/[\d]+\.[\d]+/,r.responseTime));}
else if(typeof(logoStats)!="undefined"){$("#logo").attr("title",logoStats.replace(/[\d]+\.[\d]+/,r.responseTime)).tipTip({maxWidth:"auto",edgeOffset:10});}}
SUGAR.ajaxUI.hideLoadingPanel();}catch(e){SUGAR.ajaxUI.hideLoadingPanel();SUGAR.ajaxUI.showErrorMessage(o.responseText);}
SUGAR_callsInProgress--;},showErrorMessage:function(errorMessage)
{if(!SUGAR.ajaxUI.errorPanel){SUGAR.ajaxUI.errorPanel=new YAHOO.widget.Panel("ajaxUIErrorPanel",{modal:false,visible:true,width:"800px",height:"600px",close:true});}
var panel=SUGAR.ajaxUI.errorPanel;panel.setHeader(SUGAR.language.get('app_strings','ERR_AJAX_LOAD'));panel.setBody('<iframe id="ajaxErrorFrame" style="width:780px;height:550px;border:none;marginheight="0" marginwidth="0" frameborder="0""></iframe>');panel.setFooter(SUGAR.language.get('app_strings','ERR_AJAX_LOAD_FOOTER'));panel.render(document.body);SUGAR.util.doWhen(function(){var f=document.getElementById("ajaxErrorFrame");return f!=null&&f.contentWindow!=null&&f.contentWindow.document!=null;},function(){document.getElementById("ajaxErrorFrame").contentWindow.document.body.innerHTML=errorMessage;window.setTimeout('throw "AjaxUI error parsing response"',300);});SUGAR.ajaxUI.errorMessage=errorMessage;window.setTimeout('if((typeof(document.getElementById("ajaxErrorFrame")) == "undefined" || typeof(document.getElementById("ajaxErrorFrame")) == null  || document.getElementById("ajaxErrorFrame").contentWindow.document.body.innerHTML == "")){document.getElementById("ajaxErrorFrame").contentWindow.document.body.innerHTML=SUGAR.ajaxUI.errorMessage;}',3000);panel.show();panel.center();throw"AjaxUI error parsing response";},canAjaxLoadModule:function(module)
{var checkLS=/&LicState=check/.exec(window.location.search);if(checkLS||(typeof(SUGAR.config.disableAjaxUI)!='undefined'&&SUGAR.config.disableAjaxUI==true)){return false;}
var bannedModules=SUGAR.config.stockAjaxBannedModules;if(typeof(bannedModules)=='undefined')
return false;if(typeof(SUGAR.config.addAjaxBannedModules)!='undefined'){bannedModules.concat(SUGAR.config.addAjaxBannedModules);}
if(typeof(SUGAR.config.overrideAjaxBannedModules)!='undefined'){bannedModules=SUGAR.config.overrideAjaxBannedModules;}
return SUGAR.util.arrayIndexOf(bannedModules,module)==-1;},loadContent:function(url,params)
{if(YAHOO.lang.trim(url)!="")
{var testUrl=decodeURIComponent(url);if(/^index.php?(([A-Z]|[a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+[%=+#&\[\]\.]*)+/i.test(testUrl)===false){throw"Invalid url";}
var mRegex=/module=([^&]*)/.exec(url);var module=mRegex?mRegex[1]:false;if(module&&SUGAR.ajaxUI.canAjaxLoadModule(module))
{YAHOO.util.History.navigate('ajaxUILoc',url);}else{window.location=url;}}},go:function(url)
{if(YAHOO.lang.trim(url)!="")
{var con=YAHOO.util.Connect,ui=SUGAR.ajaxUI;if(ui.lastURL==url){return;}
var testUrl=decodeURIComponent(url);if(/^index.php?(([A-Z]|[a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+[%=+#&\[\]\.]*)+/i.test(testUrl)===false){throw"Invalid url";}
var inAjaxUI=/action=ajaxui/.exec(window.location);if(typeof(window.onbeforeunload)=="function"&&window.onbeforeunload())
{if(!confirm(window.onbeforeunload()))
{if(!inAjaxUI)
{window.location.hash="";}
else
{YAHOO.util.History.navigate('ajaxUILoc',ui.lastURL);}
return;}
window.onbeforeunload=null;}
if(ui.lastCall&&con.isCallInProgress(ui.lastCall)){con.abort(ui.lastCall);}
var mRegex=/module=([^&]*)/.exec(url);var module=mRegex?mRegex[1]:false;if(!ui.canAjaxLoadModule(module)){window.location=url;}
ui.lastURL=url;ui.cleanGlobals();var loadLanguageJS='';if(module&&typeof(SUGAR.language.languages[module])=='undefined'){loadLanguageJS='&loadLanguageJS=1';}
if(!inAjaxUI){if(!SUGAR.isIE)
window.location.replace("index.php?action=ajaxui#ajaxUILoc="+encodeURIComponent(url));else{window.location.hash="#";window.location.assign("index.php?action=ajaxui#ajaxUILoc="+encodeURIComponent(url));}}
else{SUGAR_callsInProgress++;SUGAR.ajaxUI.showLoadingPanel();ui.lastCall=YAHOO.util.Connect.asyncRequest('GET',url+'&ajax_load=1'+loadLanguageJS,{success:SUGAR.ajaxUI.callback,failure:function(){SUGAR_callsInProgress--;SUGAR.ajaxUI.hideLoadingPanel();SUGAR.ajaxUI.showErrorMessage(SUGAR.language.get('app_strings','ERR_AJAX_LOAD_FAILURE'));}});}}},submitForm:function(formname,params)
{var con=YAHOO.util.Connect,SA=SUGAR.ajaxUI;if(SA.lastCall&&con.isCallInProgress(SA.lastCall)){con.abort(SA.lastCall);}
SA.cleanGlobals();var form=YAHOO.util.Dom.get(formname)||document.forms[formname];if(SA.canAjaxLoadModule(form.module.value)&&typeof(YAHOO.util.Selector.query("input[type=file]",form)[0])=="undefined"&&/action=ajaxui/.exec(window.location))
{var string=con.setForm(form);var baseUrl="index.php?action=ajaxui#ajaxUILoc=";SA.lastURL="";if(string.length>200)
{SUGAR.ajaxUI.showLoadingPanel();form.onsubmit=function(){return true;};form.submit();}else{con.resetFormState();window.location=baseUrl+encodeURIComponent("index.php?"+string);}
return true;}else{if(typeof(YAHOO.util.Selector.query("input[type=submit]",form)[0])!="undefined"&&YAHOO.util.Selector.query("input[type=submit]",form)[0].value=="Save")
{ajaxStatus.showStatus(SUGAR.language.get('app_strings','LBL_SAVING'));}
form.submit();return false;}},cleanGlobals:function()
{sqs_objects={};QSProcessedFieldsArray={};collection={};if(SUGAR.EmailAddressWidget){SUGAR.EmailAddressWidget.instances={};SUGAR.EmailAddressWidget.count={};}
YAHOO.util.Event.removeListener(window,'resize');if(typeof(dialog)!='undefined'&&typeof(dialog.destroy)=='function'){dialog.destroy();delete dialog;}},firstLoad:function()
{var url=YAHOO.util.History.getBookmarkedState('ajaxUILoc');var aRegex=/action=([^&#]*)/.exec(window.location);var action=aRegex?aRegex[1]:false;var mRegex=/module=([^&#]*)/.exec(window.location);var module=mRegex?mRegex[1]:false;if(module!="ModuleBuilder")
{var go=url!=null||action=="ajaxui";url=url?url:'index.php?module=Home&action=index';YAHOO.util.History.register('ajaxUILoc',url,SUGAR.ajaxUI.go);YAHOO.util.History.initialize("ajaxUI-history-field","ajaxUI-history-iframe");SUGAR.ajaxUI.hist_loaded=true;if(go)
SUGAR.ajaxUI.go(url);}
SUGAR_callsInProgress--;},print:function()
{var url=YAHOO.util.History.getBookmarkedState('ajaxUILoc');SUGAR.util.openWindow(url+'&print=true','printwin','menubar=1,status=0,resizable=1,scrollbars=1,toolbar=0,location=1');},showLoadingPanel:function()
{if(!SUGAR.ajaxUI.loadingPanel)
{SUGAR.ajaxUI.loadingPanel=new YAHOO.widget.Panel("ajaxloading",{width:"240px",fixedcenter:true,close:false,draggable:false,constraintoviewport:false,modal:true,visible:false});SUGAR.ajaxUI.loadingPanel.setBody('<div id="loadingPage" align="center" style="vertical-align:middle;"><img src="'+SUGAR.themes.loading_image+'" align="absmiddle" /> <b>'+SUGAR.language.get('app_strings','LBL_LOADING_PAGE')+'</b></div>');SUGAR.ajaxUI.loadingPanel.render(document.body);}
if(document.getElementById('ajaxloading_c'))
document.getElementById('ajaxloading_c').style.display='';SUGAR.ajaxUI.loadingPanel.show();},hideLoadingPanel:function()
{SUGAR.ajaxUI.loadingPanel.hide();if(document.getElementById('ajaxloading_c'))
document.getElementById('ajaxloading_c').style.display='none';},setFavicon:function(data)
{var head=document.getElementsByTagName("head")[0];var links=head.getElementsByTagName("link");var re=/\bicon\b/i;for(var i=0;i<links.length;i++){if(re.test(links[i].rel))
{head.removeChild(links[i]);}}
var link=document.createElement("link");link.href=data.url;link.type=data.type;link.rel="icon";head.appendChild(link);}};/* End of File include/javascript/ajaxUI.js */


function Get_Cookie(name){var start=document.cookie.indexOf(name+'=');var len=start+name.length+1;if((!start)&&(name!=document.cookie.substring(0,name.length)))
return null;if(start==-1)
return null;var end=document.cookie.indexOf(';',len);if(end==-1)end=document.cookie.length;if(end==start){return'';}
return unescape(document.cookie.substring(len,end));}
function Set_Cookie(name,value,expires,path,domain,secure)
{var today=new Date();today.setTime(today.getTime());if(expires)
{expires=expires*1000*60*60*24;}
var expires_date=new Date(today.getTime()+(expires));document.cookie=name+"="+escape(value)+
((expires)?";expires="+expires_date.toGMTString():"")+
((path)?";path="+path:"")+
((domain)?";domain="+domain:"")+
((secure)?";secure":"");}
function Delete_Cookie(name,path,domain){if(Get_Cookie(name))
document.cookie=name+'='+
((path)?';path='+path:'')+
((domain)?';domain='+domain:'')+';expires=Thu, 01-Jan-1970 00:00:01 GMT';}
function get_sub_cookies(cookie){var cookies=new Array();var end='';if(cookie&&cookie!=''){end=cookie.indexOf('#')
while(end>-1){var cur=cookie.substring(0,end);cookie=cookie.substring(end+1,cookie.length);var name=cur.substring(0,cur.indexOf('='));var value=cur.substring(cur.indexOf('=')+1,cur.length);cookies[name]=value;end=cookie.indexOf('#')}}
return cookies;}
function subs_to_cookie(cookies){var cookie='';for(var i in cookies)
{if(typeof(cookies[i])!="function"){cookie+=i+'='+cookies[i]+'#';}}
return cookie;}/* End of File include/javascript/cookie.js */


var menuStack=new Array();var hiddenElmStack=new Array();var currentMenu=null;var closeMenusDelay=null;var openMenusDelay=null;var delayTime=75;function eraseTimeout(tId){window.clearTimeout(tId);return null;}
function tbButtonMouseOverOrig(id){closeMenusDelay=eraseTimeout(closeMenusDelay);var menuName=id.replace(/Handle/i,'Menu');var menu=getLayer(menuName);if(currentMenu){closeAllMenus();}
popupMenu(id,menu);}
function tbButtonMouseOver(id,top,left,leftOffset){closeMenusDelay=eraseTimeout(closeMenusDelay);if(openMenusDelay==null){openMenusDelay=window.setTimeout("showMenu('"+id+"','"+top+"','"+left+"','"+leftOffset+"')",delayTime);}}
function showMenu(id,top,left,leftOffset){openMenusDelay=eraseTimeout(openMenusDelay);var menuName=id.replace(/Handle/i,'Menu');var menu=getLayer(menuName);if(currentMenu){closeAllMenus();}
popupMenu(id,menu,top,left,leftOffset);}
function showSubMenu(id){closeMenusDelay=eraseTimeout(closeMenusDelay);var menuName=id.replace(/Handle/i,'Menu');var menu=getLayer(menuName);popupSubMenu(id,menu);}
function popupMenu(handleID,menu,top,left,leftOffset){var bw=checkBrowserWidth();var menuName=handleID.replace(/Handle/i,'Menu');var menuWidth=120;var imgWidth=document.getElementById(handleID).width;if(menu){var menuHandle=getLayer(handleID);var p=menuHandle;if(left==""){var left=0;while(p&&p.tagName.toUpperCase()!='BODY'){left+=p.offsetLeft;p=p.offsetParent;}
left+=parseInt(leftOffset);}
if(left+menuWidth>bw){left=left-menuWidth+imgWidth;}
setMenuVisible(menu,left,top,false);}}
function popupSubMenu(handleID,menu){if(menu){var menuHandle=getLayer(handleID);var p=menuHandle;var top=0,left=p.offsetWidth;while(p&&p.tagName.toUpperCase()!='BODY'){top+=p.offsetTop;left+=p.offsetLeft;p=p.offsetParent;}
if(is.ie&&is.mac){top-=3;left-=10;}
setMenuVisible(menu,left,top,true);}}
function closeMenusOrig(){if(currentMenu){setMenuVisibility(currentMenu,false);}}
function closeSubMenus(handle){closeMenusDelay=eraseTimeout(closeMenusDelay);if(menuStack.length>0){for(var i=menuStack.length-1;i>=0;i--){var menu=menuStack[menuStack.length-1];if(menu.id==handle.getAttribute('parentid')){currentMenu=menu;break;}else{closeMenu(menu);menuPop();}}}}
function closeMenu(menu){setMenuVisibility(menu,false);}
function closeMenusOrig(){if(menuStack.length>0){for(var i=menuStack.length-1;i>=0;i--){var menu=menuPop();closeMenu(menu);}}
currentMenu=null;}
function closeMenus(){if(closeMenusDelay==null){closeMenusDelay=window.setTimeout("closeAllMenus()",delayTime);}}
function closeAllMenus(){closeMenusDelay=eraseTimeout(closeMenusDelay);if(menuStack.length>0){for(var i=menuStack.length-1;i>=0;i--){var menu=menuPop();closeMenu(menu);}}
currentMenu=null;}
function setMenuVisible(menu,x,y,isSubMenu){if(menu){if(isSubMenu){if(menu.getAttribute('parentid')==currentMenu.getAttribute('parentid')){menuPop();setMenuVisibility(currentMenu,false);}}else{menuPop();setMenuVisibility(currentMenu,false);}
currentMenu=menu;menuPush(menu);setMenuVisibility(menu,true,x,y);}}
function getLayer(layerid){return document.getElementById(layerid);}
function setMenuVisibility(menu,on,x,y){var parent=menu;if(menu){setLayer(menu.id,!on,x,y);if(is.ie){if(!on){if(!menu.getAttribute('parentid')){showElement("SELECT");}}else{hideElement("SELECT",x,y,menu.offsetWidth,menu.offsetHeight);}}}}
function menuPop(){if(is.ie&&(is.mac||!is.ie5_5up)){var menu=menuStack[menuStack.length-1];var newMenuStack=new Array();for(var i=0;i<menuStack.length-1;i++){newMenuStack[newMenuStack.length]=menuStack[i];}
menuStack=newMenuStack;return menu;}else{return menuStack.pop();}}
function menuPush(menu){if(is.ie&&(is.mac||!is.ie5_5up)){menuStack[menuStack.length]=menu;}else{menuStack.push(menu);}}
function checkBrowserWidth(){var windowWidth;if(is.ie){windowWidth=document.body.clientWidth;}else{windowWidth=window.innerWidth-16;}
if(windowWidth>=1000){showSB('sbContent',true,'sb');}else{showSB('sbContent',false,'sb');}
return windowWidth;}
function showSB(id,hideit,imgIdPrefix){setLayer(id,!hideit,-1,-1);setLayer(imgIdPrefix+'On',!hideit,-1,-1);setLayer(imgIdPrefix+'Off',hideit,-1,-1);}
function setLayer(id,hidden,x,y){var layer=getLayer(id);setLayerElm(layer,hidden,x,y);}
function setLayerElm(layer,hideit,x,y){if(layer&&layer.style){if(hideit){layer.style.visibility='hidden';}else{layer.style.display='block';layer.style.visibility='visible';}
if(x>=0&&x!=""){layer.style.left=x+'px';}
if(y>=0&&y!=""){layer.style.top=y+'px';}}}
function hiliteItem(menuItem,changeClass){closeMenusDelay=eraseTimeout(closeMenusDelay);if(changeClass=='yes'){if(menuItem.getAttribute('avid')=='false'){menuItem.className='menuItemHiliteX';}else{menuItem.className='menuItemHilite';}}}
function unhiliteItem(menuItem){closeMenusDelay=eraseTimeout(closeMenusDelay);if(menuItem.getAttribute('avid')=='false'){menuItem.className='menuItemX';}else{menuItem.className='menuItem';}}
function showElement(elmID){for(i=0;i<document.getElementsByTagName(elmID).length;i++){obj=document.getElementsByTagName(elmID)[i];if(!obj||!obj.offsetParent)
continue;obj.style.visibility="";}}
function showElementNew(elmID){if(hiddenElmStack.length>0){for(var i=hiddenElmStack.length-1;i>=0;i--){var obj=hiddenElmStack[hiddenElmStack.length-1];obj.style.visibility="";;hiddenElmStack.pop();}}}
function hideElement(elmID,x,y,w,h){for(i=0;i<document.getElementsByTagName(elmID).length;i++){obj=document.getElementsByTagName(elmID)[i];if(!obj||!obj.offsetParent)
continue;objLeft=obj.offsetLeft;objTop=obj.offsetTop;objParent=obj.offsetParent;while(objParent.tagName.toUpperCase()!="BODY"){objLeft+=objParent.offsetLeft;objTop+=objParent.offsetTop;if(objParent.offsetParent==null)
break;else
objParent=objParent.offsetParent;}
objTop=objTop-y;if(x>(objLeft+obj.offsetWidth)||objLeft>(x+w));else if(objTop>h);else if((y+h)<=80);else{obj.style.visibility="hidden";}}}
function Is(){var agt=navigator.userAgent.toLowerCase();this.major=parseInt(navigator.appVersion);this.minor=parseFloat(navigator.appVersion);this.nav=((agt.indexOf('mozilla')!=-1)&&(agt.indexOf('spoofer')==-1)&&(agt.indexOf('compatible')==-1)&&(agt.indexOf('opera')==-1)&&(agt.indexOf('webtv')==-1)&&(agt.indexOf('hotjava')==-1));this.nav2=(this.nav&&(this.major==2));this.nav3=(this.nav&&(this.major==3));this.nav4=(this.nav&&(this.major==4));this.nav4up=(this.nav&&(this.major>=4));this.navonly=(this.nav&&((agt.indexOf(";nav")!=-1)||(agt.indexOf("; nav")!=-1)));this.nav6=(this.nav&&(this.major==5));this.nav6up=(this.nav&&(this.major>=5));this.gecko=(agt.indexOf('gecko')!=-1);this.nav7=(this.gecko&&(this.major>=5)&&(agt.indexOf('netscape/7')!=-1));this.moz1=false;this.moz1up=false;this.moz1_1=false;this.moz1_1up=false;if(this.nav6up){myRegEx=new RegExp("rv:\\d*.\\d*.\\d*");myFind=myRegEx.exec(agt);if(myFind!=null){var strVersion=myFind.toString();strVersion=strVersion.replace(/rv:/,'');var arrVersion=strVersion.split('.');var major=parseInt(arrVersion[0]);var minor=parseInt(arrVersion[1]);if(arrVersion[2])var revision=parseInt(arrVersion[2]);this.moz1=((major==1)&&(minor==0));this.moz1up=((major==1)&&(minor>=0));this.moz1_1=((major==1)&&(minor==1));this.moz1_1up=((major==1)&&(minor>=1));}}
this.ie=((agt.indexOf("msie")!=-1)&&(agt.indexOf("opera")==-1));this.ie3=(this.ie&&(this.major<4));this.ie4=(this.ie&&(this.major==4)&&(agt.indexOf("msie 4")!=-1));this.ie4up=(this.ie&&(this.major>=4));this.ie5=(this.ie&&(this.major==4)&&(agt.indexOf("msie 5.0")!=-1));this.ie5_5=(this.ie&&(this.major==4)&&(agt.indexOf("msie 5.5")!=-1));this.ie5up=(this.ie&&!this.ie3&&!this.ie4);this.ie5_5up=(this.ie&&!this.ie3&&!this.ie4&&!this.ie5);this.ie6=(this.ie&&(this.major==4)&&(agt.indexOf("msie 6.")!=-1));this.ie6up=(this.ie&&!this.ie3&&!this.ie4&&!this.ie5&&!this.ie5_5);this.mac=(agt.indexOf("mac")!=-1);}
function runPageLoadItems(){var myVar;checkBrowserWidth();}
var is=new Is();if(is.ie){document.write('<style type="text/css">');document.write('body {font-size: x-small;}');document.write('</style>');}/* End of File include/javascript/menu.js */


Calendar=function(){};Calendar.getHighestZIndex=function(containerEl)
{var highestIndex=0;var currentIndex=0;var els=Array();els=containerEl?containerEl.getElementsByTagName('*'):document.getElementsByTagName('*');for(var i=0;i<els.length;i++)
{currentIndex=YAHOO.util.Dom.getStyle(els[i],"zIndex");if(!isNaN(currentIndex)&&currentIndex>highestIndex)
{highestIndex=parseInt(currentIndex);}}
return(highestIndex==Number.MAX_VALUE)?Number.MAX_VALUE:highestIndex+1;};Calendar.getDateField=function(id,form)
{var input;if(form){var formElement=document.getElementById(form);if(formElement){for(var i=0;i<formElement.elements.length;i++){if(formElement.elements[i].id==id){input=formElement.elements[i];break;}}}}else{input=document.getElementById(id);}
return input;};Calendar.setup=function(params){YAHOO.util.Event.onDOMReady(function(){var Event=YAHOO.util.Event;var Dom=YAHOO.util.Dom;var dialog;var calendar;var showButton=params.button?params.button:params.buttonObj;var userDateFormat=params.ifFormat?params.ifFormat:(params.daFormat?params.daFormat:"m/d/Y");var inputField=params.inputField?params.inputField:params.inputFieldObj.id;var form=params.form?params.form:'';var startWeekday=params.startWeekday?params.startWeekday:0;var dateFormat=userDateFormat.substr(0,10);var date_field_delimiter=/([-.\\/])/.exec(dateFormat)[0];dateFormat=dateFormat.replace(/[^a-zA-Z]/g,'');var monthPos=dateFormat.search(/m/);var dayPos=dateFormat.search(/d/);var yearPos=dateFormat.search(/Y/);var dateParams=new Object();dateParams.delim=date_field_delimiter;dateParams.monthPos=monthPos;dateParams.dayPos=dayPos;dateParams.yearPos=yearPos;var showButtonElement=Dom.get(showButton);Event.on(showButtonElement,"click",function(){if(!dialog){dialog=new YAHOO.widget.SimpleDialog("container_"+showButtonElement.id,{visible:false,context:[showButton,"tl","bl",["beforeShow"],[-175,5]],buttons:[],draggable:false,close:true,zIndex:Calendar.getHighestZIndex(document.body),constraintoviewport:true});dialog.setHeader(SUGAR.language.get('app_strings','LBL_MASSUPDATE_DATE'));var dialogBody='<p class="callnav_today"><a href="javascript:void(0)"  id="callnav_today">'+SUGAR.language.get('app_strings','LBL_EMAIL_DATE_TODAY')+'</a></p><div id="'+showButtonElement.id+'_div"></div>';dialog.setBody(dialogBody);dialog.render(document.body);Dom.addClass("container_"+showButtonElement.id,"cal_panel");Event.addListener("callnav_today","click",function(){calendar.clear();var now=new Date();var input=Calendar.getDateField(inputField,form);input.value=formatSelectedDate(now);var cellIndex=calendar.getCellIndex(now);if(cellIndex>-1)
{var cell=calendar.cells[cellIndex];Dom.addClass(cell,calendar.Style.CSS_CELL_SELECTED);}
if(input.onchange)
input.onchange();SUGAR.util.callOnChangeListers(input);$("#"+input.id).blur();return false;});dialog.showEvent.subscribe(function(){if(YAHOO.env.ua.ie){dialog.fireEvent("changeContent");}});Event.on(document,"click",function(e){if(!dialog)
{return;}
var el=Event.getTarget(e);var dialogEl=dialog.element;if(el!=dialogEl&&!Dom.isAncestor(dialogEl,el)&&el!=showButtonElement&&!Dom.isAncestor(showButtonElement,el)){dialog.hide();}});}
if(!calendar){var navConfig={strings:{month:SUGAR.language.get('app_strings','LBL_CHOOSE_MONTH'),year:SUGAR.language.get('app_strings','LBL_ENTER_YEAR'),submit:SUGAR.language.get('app_strings','LBL_EMAIL_OK'),cancel:SUGAR.language.get('app_strings','LBL_CANCEL_BUTTON_LABEL'),invalidYear:SUGAR.language.get('app_strings','LBL_ENTER_VALID_YEAR')},monthFormat:YAHOO.widget.Calendar.SHORT,initialFocus:"year"};calendar=new YAHOO.widget.Calendar(showButtonElement.id+'_div',{iframe:false,hide_blank_weeks:true,navigator:navConfig});calendar.cfg.setProperty('DATE_FIELD_DELIMITER',date_field_delimiter);calendar.cfg.setProperty('MDY_DAY_POSITION',dayPos+1);calendar.cfg.setProperty('MDY_MONTH_POSITION',monthPos+1);calendar.cfg.setProperty('MDY_YEAR_POSITION',yearPos+1);calendar.cfg.setProperty('START_WEEKDAY',startWeekday);if(typeof SUGAR.language.languages['app_list_strings']!='undefined'&&SUGAR.language.languages['app_list_strings']['dom_cal_month_long']!='undefined')
{if(SUGAR.language.languages['app_list_strings']['dom_cal_month_long'].length==13)
{SUGAR.language.languages['app_list_strings']['dom_cal_month_long'].shift();}
calendar.cfg.setProperty('MONTHS_LONG',SUGAR.language.languages['app_list_strings']['dom_cal_month_long']);}
if(typeof SUGAR.language.languages['app_list_strings']!='undefined'&&typeof SUGAR.language.languages['app_list_strings']['dom_cal_day_short']!='undefined')
{if(SUGAR.language.languages['app_list_strings']['dom_cal_day_short'].length==8)
{SUGAR.language.languages['app_list_strings']['dom_cal_day_short'].shift();}
calendar.cfg.setProperty('WEEKDAYS_SHORT',SUGAR.language.languages['app_list_strings']['dom_cal_day_short']);}
var formatSelectedDate=function(selDate)
{var monthVal=selDate.getMonth()+1;if(monthVal<10)
{monthVal='0'+monthVal;}
var dateVal=selDate.getDate();if(dateVal<10)
{dateVal='0'+dateVal;}
var yearVal=selDate.getFullYear();selDate='';if(monthPos==0)
{selDate=monthVal;}else if(dayPos==0)
{selDate=dateVal;}else
{selDate=yearVal;}
if(monthPos==1)
{selDate+=date_field_delimiter+monthVal;}else if(dayPos==1)
{selDate+=date_field_delimiter+dateVal;}else
{selDate+=date_field_delimiter+yearVal;}
if(monthPos==2)
{selDate+=date_field_delimiter+monthVal;}else if(dayPos==2)
{selDate+=date_field_delimiter+dateVal;}else
{selDate+=date_field_delimiter+yearVal;}
return selDate;};calendar.selectEvent.subscribe(function(type,args,obj){var input=Calendar.getDateField(inputField,form);if(calendar.getSelectedDates().length>0){input.value=formatSelectedDate(calendar.getSelectedDates()[0]);if(params.comboObject)
{params.comboObject.update();}}else if(typeof args[0][0]=='object'){selDate=args[0][0];input.value=formatSelectedDate(new Date(selDate[0],selDate[1],selDate[2]));}else{input.value='';}
if(input.onchange)
input.onchange();dialog.hide();SUGAR.util.callOnChangeListers(input);$("#"+input.id).blur();});calendar.renderEvent.subscribe(function(){dialog.fireEvent("changeContent");});}
var sanitizeDate=function(date,dateParams){var dateArray=Array();var returnArray=Array('','','');var delimArray=Array(".","/","-");var dateCheck=0;for(var delimCounter=0;delimCounter<delimArray.length;delimCounter++){dateArray=date.split(delimArray[delimCounter]);if(dateArray.length==3){break;}}
if(dateArray.length!=3)
{var oDate=new Date();var dateArray=[0,0,0];dateArray[dateParams.dayPos]=oDate.getDate();dateArray[dateParams.monthPos]=oDate.getMonth()+1;dateArray[dateParams.yearPos]=oDate.getFullYear();}
for(var i=0;i<dateArray.length;i++){if(dateArray[i]>32){returnArray[dateParams.yearPos]=dateArray[i];dateCheck+=1;}else if(dateArray[i]<=12){if((dateParams.monthPos<dateParams.dayPos)&&(returnArray[dateParams.monthPos]=='')){returnArray[dateParams.monthPos]=dateArray[i];dateCheck+=100;}else if((dateParams.monthPos>dateParams.dayPos)&&(returnArray[dateParams.dayPos]!='')){returnArray[dateParams.monthPos]=dateArray[i];dateCheck+=100;}else if((dateParams.dayPos<dateParams.monthPos)&&(returnArray[dateParams.dayPos]=='')){returnArray[dateParams.dayPos]=dateArray[i];dateCheck+=10;}else if((dateParams.dayPos>dateParams.monthPos)&&(returnArray[dateParams.monthPos]!='')){returnArray[dateParams.dayPos]=dateArray[i];dateCheck+=10;}}else if(dateArray[i]>12&&dateArray[i]<32){if(returnArray[dateParams.dayPos]!=''){returnArray[dateParams.monthPos]=returnArray[dateParams.dayPos];dateCheck-=10;dateCheck+=100;}
returnArray[dateParams.dayPos]=dateArray[i];dateCheck+=10;}}
if(dateCheck!=111){return sanitizeDate("",dateParams);}
return returnArray.join(dateParams.delim);};var sanitizedDate=sanitizeDate(Calendar.getDateField(inputField,form).value,dateParams);var sanitizedDateArray=sanitizedDate.split(dateParams.delim);calendar.cfg.setProperty("selected",sanitizedDate);calendar.cfg.setProperty("pageDate",sanitizedDateArray[monthPos]+dateParams.delim+sanitizedDateArray[yearPos]);calendar.render();dialog.show();});});};/* End of File include/javascript/calendar.js */

(function(){var JSON=YAHOO.lang.JSON;SUGAR.quickCompose={};SUGAR.quickCompose=function(){return{parentPanel:null,dceMenuPanel:null,options:null,loadingMessgPanl:null,frameLoaded:false,resourcesLoaded:false,tinyLoaded:false,initComposePackage:function(c)
{SUGAR.email2.addressBook.initFixForDatatableSort();SUGAR.quickCompose.resourcesLoaded=true;var callback={success:function(o)
{var responseData=JSON.parse(o.responseText);var scriptTag=document.createElement('script');scriptTag.id='quickComposeScript';scriptTag.setAttribute('type','text/javascript');if(YAHOO.env.ua.ie>0)
scriptTag.text=responseData.jsData;else
scriptTag.appendChild(document.createTextNode(responseData.jsData));document.getElementsByTagName("head")[0].appendChild(scriptTag);var divTag=document.createElement("div");divTag.innerHTML=responseData.divData;divTag.id='quickCompose';YAHOO.util.Dom.insertBefore(divTag,document.getElementsByTagName('footer')[0]);SUGAR.quickCompose.frameLoaded=true;SUGAR.quickCompose.initUI(c.data);}}
if(!SUGAR.quickCompose.frameLoaded)
YAHOO.util.Connect.asyncRequest('GET','index.php?entryPoint=GenerateQuickComposeFrame',callback,null);else
SUGAR.quickCompose.initUI(c.data);},initUI:function(options)
{var SQ=SUGAR.quickCompose;this.options=options;loadingMessgPanl.hide();var dce_mode=(typeof this.dceMenuPanel!='undefined'&&this.dceMenuPanel!=null)?true:false;if(SQ.parentPanel!=null)
{tinyMCE.execCommand('mceRemoveControl',false,SUGAR.email2.tinyInstances.currentHtmleditor);SUGAR.email2.tinyInstances[SUGAR.email2.tinyInstances.currentHtmleditor]=null;SUGAR.email2.tinyInstances.currentHtmleditor="";SQ.parentPanel.destroy();SQ.parentPanel=null;}
var theme=SUGAR.themes.theme_name;var idx=0;if(!SE.composeLayout.composeTemplate)
SE.composeLayout.composeTemplate=new YAHOO.SUGAR.Template(SE.templates['compose']);var panel_modal=dce_mode?false:true,panel_width='880px',panel_constrain=dce_mode?false:true,panel_height=dce_mode?'auto':'600px',panel_shadow=dce_mode?false:true,panel_draggable=dce_mode?false:true,panel_resize=dce_mode?false:true,panel_close=dce_mode?false:true;SQ.parentPanel=new YAHOO.widget.Panel("container1",{modal:panel_modal,visible:true,constraintoviewport:panel_constrain,width:panel_width,height:panel_height,shadow:panel_shadow,draggable:panel_draggable,resize:panel_resize,close:panel_close});if(!dce_mode){SQ.parentPanel.setHeader(SUGAR.language.get('app_strings','LBL_EMAIL_QUICK_COMPOSE'));}
SQ.parentPanel.setBody("<div class='email'><div id='htmleditordiv"+idx+"'></div></div>");var composePanel=SE.composeLayout.getQuickComposeLayout(SQ.parentPanel,this.options);if(!dce_mode){var resize=new YAHOO.util.Resize('container1',{handles:['br'],autoRatio:false,minWidth:400,minHeight:550,status:false});resize.on('resize',function(args){var panelHeight=args.height;this.cfg.setProperty("height",panelHeight+"px");var layout=SE.composeLayout[SE.composeLayout.currentInstanceId];layout.set("height",panelHeight-50);layout.resize(true);SE.composeLayout.resizeEditor(SE.composeLayout.currentInstanceId);},SQ.parentPanel,true);}else{SUGAR.util.doWhen("typeof SE.composeLayout[SE.composeLayout.currentInstanceId] != 'undefined'",function(){var panelHeight=600;SQ.parentPanel.cfg.setProperty("height",panelHeight+"px");var layout=SE.composeLayout[SE.composeLayout.currentInstanceId];layout.set("height",panelHeight);layout.resize(true);SE.composeLayout.resizeEditor(SE.composeLayout.currentInstanceId);});}
YAHOO.util.Dom.setStyle("container1","z-index",1);if(!SQ.tinyLoaded)
{tinymce.dom.Event.domLoaded=true;tinyMCE.init({convert_urls:false,theme_advanced_toolbar_align:tinyConfig.theme_advanced_toolbar_align,valid_children:tinyConfig.valid_children,width:tinyConfig.width,theme:tinyConfig.theme,theme_advanced_toolbar_location:tinyConfig.theme_advanced_toolbar_location,theme_advanced_buttons1:tinyConfig.theme_advanced_buttons1,theme_advanced_buttons2:tinyConfig.theme_advanced_buttons2,theme_advanced_buttons3:tinyConfig.theme_advanced_buttons3,plugins:tinyConfig.plugins,elements:tinyConfig.elements,language:tinyConfig.language,extended_valid_elements:tinyConfig.extended_valid_elements,mode:tinyConfig.mode,strict_loading_mode:true,gecko_spellcheck:tinyConfig.gecko_spellcheck});SQ.tinyLoaded=true;}
SQ.parentPanel.show();SUGAR.email2.composeLayout.forceCloseCompose=function(o){SUGAR.quickCompose.parentPanel.hide();}
if(!dce_mode){SQ.parentPanel.center();}},init:function(o){if(typeof o.menu_id!='undefined'){this.dceMenuPanel=o.menu_id;}else{this.dceMenuPanel=null;}
loadingMessgPanl=new YAHOO.widget.SimpleDialog('loading',{width:'200px',close:true,modal:true,visible:true,fixedcenter:true,constraintoviewport:true,draggable:false});loadingMessgPanl.setHeader(SUGAR.language.get('app_strings','LBL_EMAIL_PERFORMING_TASK'));loadingMessgPanl.setBody(SUGAR.language.get('app_strings','LBL_EMAIL_ONE_MOMENT'));loadingMessgPanl.render(document.body);loadingMessgPanl.show();if(!SUGAR.quickCompose.resourcesLoaded)
this.loadResources(o);else
this.initUI(o);},loadResources:function(o)
{window.skipTinyMCEInitPhase=true;var require=["layout","element","tabview","menu","cookie","tinymce","sugarwidgets","sugarquickcompose","sugarquickcomposecss"];var loader=new YAHOO.util.YUILoader({require:require,loadOptional:true,skin:{base:'blank',defaultSkin:''},data:o,onSuccess:this.initComposePackage,allowRollup:true,base:"include/javascript/yui/build/"});loader.addModule({name:"tinymce",type:"js",varName:"TinyMCE",fullpath:"include/javascript/tiny_mce/tiny_mce.js"});loader.addModule({name:"sugarwidgets",type:"js",fullpath:"include/javascript/sugarwidgets/SugarYUIWidgets.js",varName:"YAHOO.SUGAR",requires:["datatable","dragdrop","treeview","tabview"]});loader.addModule({name:"sugarquickcompose",type:"js",varName:"SUGAR.email2.complexLayout",requires:["layout","sugarwidgets","tinymce"],fullpath:"cache/include/javascript/sugar_grp_quickcomp.js"});loader.addModule({name:"sugarquickcomposecss",type:"css",fullpath:"modules/Emails/EmailUI.css"});loader.insert();}};}();})();/* End of File include/javascript/quickCompose.js */


if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={};}YAHOO.namespace=function(){var b=arguments,g=null,e,c,f;for(e=0;e<b.length;e=e+1){f=(""+b[e]).split(".");g=YAHOO;for(c=(f[0]=="YAHOO")?1:0;c<f.length;c=c+1){g[f[c]]=g[f[c]]||{};g=g[f[c]];}}return g;};YAHOO.log=function(d,a,c){var b=YAHOO.widget.Logger;if(b&&b.log){return b.log(d,a,c);}else{return false;}};YAHOO.register=function(a,f,e){var k=YAHOO.env.modules,c,j,h,g,d;if(!k[a]){k[a]={versions:[],builds:[]};}c=k[a];j=e.version;h=e.build;g=YAHOO.env.listeners;c.name=a;c.version=j;c.build=h;c.versions.push(j);c.builds.push(h);c.mainClass=f;for(d=0;d<g.length;d=d+1){g[d](c);}if(f){f.VERSION=j;f.BUILD=h;}else{YAHOO.log("mainClass is undefined for module "+a,"warn");}};YAHOO.env=YAHOO.env||{modules:[],listeners:[]};YAHOO.env.getVersion=function(a){return YAHOO.env.modules[a]||null;};YAHOO.env.parseUA=function(d){var e=function(i){var j=0;return parseFloat(i.replace(/\./g,function(){return(j++==1)?"":".";}));},h=navigator,g={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:h&&h.cajaVersion,secure:false,os:null},c=d||(navigator&&navigator.userAgent),f=window&&window.location,b=f&&f.href,a;g.secure=b&&(b.toLowerCase().indexOf("https")===0);if(c){if((/windows|win32/i).test(c)){g.os="windows";}else{if((/macintosh/i).test(c)){g.os="macintosh";}else{if((/rhino/i).test(c)){g.os="rhino";}}}if((/KHTML/).test(c)){g.webkit=1;}a=c.match(/AppleWebKit\/([^\s]*)/);if(a&&a[1]){g.webkit=e(a[1]);if(/ Mobile\//.test(c)){g.mobile="Apple";a=c.match(/OS ([^\s]*)/);if(a&&a[1]){a=e(a[1].replace("_","."));}g.ios=a;g.ipad=g.ipod=g.iphone=0;a=c.match(/iPad|iPod|iPhone/);if(a&&a[0]){g[a[0].toLowerCase()]=g.ios;}}else{a=c.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/);if(a){g.mobile=a[0];}if(/webOS/.test(c)){g.mobile="WebOS";a=c.match(/webOS\/([^\s]*);/);if(a&&a[1]){g.webos=e(a[1]);}}if(/ Android/.test(c)){g.mobile="Android";a=c.match(/Android ([^\s]*);/);if(a&&a[1]){g.android=e(a[1]);}}}a=c.match(/Chrome\/([^\s]*)/);if(a&&a[1]){g.chrome=e(a[1]);}else{a=c.match(/AdobeAIR\/([^\s]*)/);if(a){g.air=a[0];}}}if(!g.webkit){a=c.match(/Opera[\s\/]([^\s]*)/);if(a&&a[1]){g.opera=e(a[1]);a=c.match(/Version\/([^\s]*)/);if(a&&a[1]){g.opera=e(a[1]);}a=c.match(/Opera Mini[^;]*/);if(a){g.mobile=a[0];}}else{a=c.match(/MSIE\s([^;]*)/);if(a&&a[1]){g.ie=e(a[1]);}else{a=c.match(/Gecko\/([^\s]*)/);if(a){g.gecko=1;a=c.match(/rv:([^\s\)]*)/);if(a&&a[1]){g.gecko=e(a[1]);}}}}}}return g;};YAHOO.env.ua=YAHOO.env.parseUA();(function(){YAHOO.namespace("util","widget","example");if("undefined"!==typeof YAHOO_config){var b=YAHOO_config.listener,a=YAHOO.env.listeners,d=true,c;if(b){for(c=0;c<a.length;c++){if(a[c]==b){d=false;break;}}if(d){a.push(b);}}}})();YAHOO.lang=YAHOO.lang||{};(function(){var f=YAHOO.lang,a=Object.prototype,c="[object Array]",h="[object Function]",i="[object Object]",b=[],g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},d=["toString","valueOf"],e={isArray:function(j){return a.toString.apply(j)===c;},isBoolean:function(j){return typeof j==="boolean";},isFunction:function(j){return(typeof j==="function")||a.toString.apply(j)===h;},isNull:function(j){return j===null;},isNumber:function(j){return typeof j==="number"&&isFinite(j);},isObject:function(j){return(j&&(typeof j==="object"||f.isFunction(j)))||false;},isString:function(j){return typeof j==="string";},isUndefined:function(j){return typeof j==="undefined";},_IEEnumFix:(YAHOO.env.ua.ie)?function(l,k){var j,n,m;for(j=0;j<d.length;j=j+1){n=d[j];m=k[n];if(f.isFunction(m)&&m!=a[n]){l[n]=m;}}}:function(){},escapeHTML:function(j){return j.replace(/[&<>"'\/`]/g,function(k){return g[k];});},extend:function(m,n,l){if(!n||!m){throw new Error("extend failed, please check that "+"all dependencies are included.");}var k=function(){},j;k.prototype=n.prototype;m.prototype=new k();m.prototype.constructor=m;m.superclass=n.prototype;if(n.prototype.constructor==a.constructor){n.prototype.constructor=n;}if(l){for(j in l){if(f.hasOwnProperty(l,j)){m.prototype[j]=l[j];}}f._IEEnumFix(m.prototype,l);}},augmentObject:function(n,m){if(!m||!n){throw new Error("Absorb failed, verify dependencies.");}var j=arguments,l,o,k=j[2];if(k&&k!==true){for(l=2;l<j.length;l=l+1){n[j[l]]=m[j[l]];}}else{for(o in m){if(k||!(o in n)){n[o]=m[o];}}f._IEEnumFix(n,m);}return n;},augmentProto:function(m,l){if(!l||!m){throw new Error("Augment failed, verify dependencies.");}var j=[m.prototype,l.prototype],k;for(k=2;k<arguments.length;k=k+1){j.push(arguments[k]);}f.augmentObject.apply(this,j);return m;},dump:function(j,p){var l,n,r=[],t="{...}",k="f(){...}",q=", ",m=" => ";if(!f.isObject(j)){return j+"";}else{if(j instanceof Date||("nodeType"in j&&"tagName"in j)){return j;}else{if(f.isFunction(j)){return k;}}}p=(f.isNumber(p))?p:3;if(f.isArray(j)){r.push("[");for(l=0,n=j.length;l<n;l=l+1){if(f.isObject(j[l])){r.push((p>0)?f.dump(j[l],p-1):t);}else{r.push(j[l]);}r.push(q);}if(r.length>1){r.pop();}r.push("]");}else{r.push("{");for(l in j){if(f.hasOwnProperty(j,l)){r.push(l+m);if(f.isObject(j[l])){r.push((p>0)?f.dump(j[l],p-1):t);}else{r.push(j[l]);}r.push(q);}}if(r.length>1){r.pop();}r.push("}");}return r.join("");},substitute:function(x,y,E,l){var D,C,B,G,t,u,F=[],p,z=x.length,A="dump",r=" ",q="{",m="}",n,w;for(;;){D=x.lastIndexOf(q,z);if(D<0){break;}C=x.indexOf(m,D);if(D+1>C){break;}p=x.substring(D+1,C);G=p;u=null;B=G.indexOf(r);if(B>-1){u=G.substring(B+1);G=G.substring(0,B);}t=y[G];if(E){t=E(G,t,u);}if(f.isObject(t)){if(f.isArray(t)){t=f.dump(t,parseInt(u,10));}else{u=u||"";n=u.indexOf(A);if(n>-1){u=u.substring(4);}w=t.toString();if(w===i||n>-1){t=f.dump(t,parseInt(u,10));}else{t=w;}}}else{if(!f.isString(t)&&!f.isNumber(t)){t="~-"+F.length+"-~";F[F.length]=p;}}x=x.substring(0,D)+t+x.substring(C+1);if(l===false){z=D-1;}}for(D=F.length-1;D>=0;D=D-1){x=x.replace(new RegExp("~-"+D+"-~"),"{"+F[D]+"}","g");}return x;},trim:function(j){try{return j.replace(/^\s+|\s+$/g,"");}catch(k){return j;}},merge:function(){var n={},k=arguments,j=k.length,m;for(m=0;m<j;m=m+1){f.augmentObject(n,k[m],true);}return n;},later:function(t,k,u,n,p){t=t||0;k=k||{};var l=u,s=n,q,j;if(f.isString(u)){l=k[u];}if(!l){throw new TypeError("method undefined");}if(!f.isUndefined(n)&&!f.isArray(s)){s=[n];}q=function(){l.apply(k,s||b);};j=(p)?setInterval(q,t):setTimeout(q,t);return{interval:p,cancel:function(){if(this.interval){clearInterval(j);}else{clearTimeout(j);}}};},isValue:function(j){return(f.isObject(j)||f.isString(j)||f.isNumber(j)||f.isBoolean(j));}};f.hasOwnProperty=(a.hasOwnProperty)?function(j,k){return j&&j.hasOwnProperty&&j.hasOwnProperty(k);}:function(j,k){return!f.isUndefined(j[k])&&j.constructor.prototype[k]!==j[k];};e.augmentObject(f,e,true);YAHOO.util.Lang=f;f.augment=f.augmentProto;YAHOO.augment=f.augmentProto;YAHOO.extend=f.extend;})();YAHOO.register("yahoo",YAHOO,{version:"2.9.0",build:"2800"});YAHOO.util.Get=function(){var m={},k=0,r=0,l=false,n=YAHOO.env.ua,s=YAHOO.lang,q,d,e,i=function(x,t,y){var u=y||window,z=u.document,A=z.createElement(x),v;for(v in t){if(t.hasOwnProperty(v)){A.setAttribute(v,t[v]);}}return A;},h=function(u,v,t){var w={id:"yui__dyn_"+(r++),type:"text/css",rel:"stylesheet",href:u};if(t){s.augmentObject(w,t);}return i("link",w,v);},p=function(u,v,t){var w={id:"yui__dyn_"+(r++),type:"text/javascript",src:u};if(t){s.augmentObject(w,t);}return i("script",w,v);},a=function(t,u){return{tId:t.tId,win:t.win,data:t.data,nodes:t.nodes,msg:u,purge:function(){d(this.tId);}};},b=function(t,w){var u=m[w],v=(s.isString(t))?u.win.document.getElementById(t):t;if(!v){q(w,"target node not found: "+t);}return v;},c=function(w){YAHOO.log("Finishing transaction "+w);var u=m[w],v,t;u.finished=true;if(u.aborted){v="transaction "+w+" was aborted";q(w,v);return;}if(u.onSuccess){t=u.scope||u.win;u.onSuccess.call(t,a(u));}},o=function(v){YAHOO.log("Timeout "+v,"info","get");var u=m[v],t;if(u.onTimeout){t=u.scope||u;u.onTimeout.call(t,a(u));}},f=function(v,A){YAHOO.log("_next: "+v+", loaded: "+A,"info","Get");var u=m[v],D=u.win,C=D.document,B=C.getElementsByTagName("head")[0],x,y,t,E,z;if(u.timer){u.timer.cancel();}if(u.aborted){y="transaction "+v+" was aborted";q(v,y);return;}if(A){u.url.shift();if(u.varName){u.varName.shift();}}else{u.url=(s.isString(u.url))?[u.url]:u.url;if(u.varName){u.varName=(s.isString(u.varName))?[u.varName]:u.varName;}}if(u.url.length===0){if(u.type==="script"&&n.webkit&&n.webkit<420&&!u.finalpass&&!u.varName){z=p(null,u.win,u.attributes);z.innerHTML='YAHOO.util.Get._finalize("'+v+'");';u.nodes.push(z);B.appendChild(z);}else{c(v);}return;}t=u.url[0];if(!t){u.url.shift();YAHOO.log("skipping empty url");return f(v);}YAHOO.log("attempting to load "+t,"info","Get");if(u.timeout){u.timer=s.later(u.timeout,u,o,v);}if(u.type==="script"){x=p(t,D,u.attributes);}else{x=h(t,D,u.attributes);}e(u.type,x,v,t,D,u.url.length);u.nodes.push(x);if(u.insertBefore){E=b(u.insertBefore,v);if(E){E.parentNode.insertBefore(x,E);}}else{B.appendChild(x);}YAHOO.log("Appending node: "+t,"info","Get");if((n.webkit||n.gecko)&&u.type==="css"){f(v,t);}},j=function(){if(l){return;}l=true;var t,u;for(t in m){if(m.hasOwnProperty(t)){u=m[t];if(u.autopurge&&u.finished){d(u.tId);delete m[t];}}}l=false;},g=function(u,t,v){var x="q"+(k++),w;v=v||{};if(k%YAHOO.util.Get.PURGE_THRESH===0){j();}m[x]=s.merge(v,{tId:x,type:u,url:t,finished:false,aborted:false,nodes:[]});w=m[x];w.win=w.win||window;w.scope=w.scope||w.win;w.autopurge=("autopurge"in w)?w.autopurge:(u==="script")?true:false;w.attributes=w.attributes||{};w.attributes.charset=v.charset||w.attributes.charset||"utf-8";s.later(0,w,f,x);return{tId:x};};e=function(H,z,x,u,D,E,G){var F=G||f,B,t,I,v,J,A,C,y;if(n.ie){z.onreadystatechange=function(){B=this.readyState;if("loaded"===B||"complete"===B){YAHOO.log(x+" onload "+u,"info","Get");z.onreadystatechange=null;F(x,u);}};}else{if(n.webkit){if(H==="script"){if(n.webkit>=420){z.addEventListener("load",function(){YAHOO.log(x+" DOM2 onload "+u,"info","Get");F(x,u);});}else{t=m[x];if(t.varName){v=YAHOO.util.Get.POLL_FREQ;YAHOO.log("Polling for "+t.varName[0]);t.maxattempts=YAHOO.util.Get.TIMEOUT/v;t.attempts=0;t._cache=t.varName[0].split(".");t.timer=s.later(v,t,function(w){I=this._cache;A=I.length;J=this.win;for(C=0;C<A;C=C+1){J=J[I[C]];if(!J){this.attempts++;if(this.attempts++>this.maxattempts){y="Over retry limit, giving up";t.timer.cancel();q(x,y);}else{YAHOO.log(I[C]+" failed, retrying");}return;}}YAHOO.log("Safari poll complete");t.timer.cancel();F(x,u);},null,true);}else{s.later(YAHOO.util.Get.POLL_FREQ,null,F,[x,u]);}}}}else{z.onload=function(){YAHOO.log(x+" onload "+u,"info","Get");F(x,u);};}}};q=function(w,v){YAHOO.log("get failure: "+v,"warn","Get");var u=m[w],t;if(u.onFailure){t=u.scope||u.win;u.onFailure.call(t,a(u,v));}};d=function(z){if(m[z]){var t=m[z],u=t.nodes,x=u.length,C=t.win.document,A=C.getElementsByTagName("head")[0],v,y,w,B;if(t.insertBefore){v=b(t.insertBefore,z);if(v){A=v.parentNode;}}for(y=0;y<x;y=y+1){w=u[y];if(w.clearAttributes){w.clearAttributes();}else{for(B in w){if(w.hasOwnProperty(B)){delete w[B];}}}A.removeChild(w);}t.nodes=[];}};return{POLL_FREQ:10,PURGE_THRESH:20,TIMEOUT:2000,_finalize:function(t){YAHOO.log(t+" finalized ","info","Get");s.later(0,null,c,t);},abort:function(u){var v=(s.isString(u))?u:u.tId,t=m[v];if(t){YAHOO.log("Aborting "+v,"info","Get");t.aborted=true;}},script:function(t,u){return g("script",t,u);},css:function(t,u){return g("css",t,u);}};}();YAHOO.register("get",YAHOO.util.Get,{version:"2.9.0",build:"2800"});(function(){var Y=YAHOO,util=Y.util,lang=Y.lang,env=Y.env,PROV="_provides",SUPER="_supersedes",REQ="expanded",AFTER="_after",VERSION="2.9.0";var YUI={dupsAllowed:{"yahoo":true,"get":true},info:{"root":VERSION+"/build/","base":"http://yui.yahooapis.com/"+VERSION+"/build/","comboBase":"http://yui.yahooapis.com/combo?","skin":{"defaultSkin":"sam","base":"assets/skins/","path":"skin.css","after":["reset","fonts","grids","base"],"rollup":3},dupsAllowed:["yahoo","get"],"moduleInfo":{"animation":{"type":"js","path":"animation/animation-min.js","requires":["dom","event"]},"autocomplete":{"type":"js","path":"autocomplete/autocomplete-min.js","requires":["dom","event","datasource"],"optional":["connection","animation"],"skinnable":true},"base":{"type":"css","path":"base/base-min.css","after":["reset","fonts","grids"]},"button":{"type":"js","path":"button/button-min.js","requires":["element"],"optional":["menu"],"skinnable":true},"calendar":{"type":"js","path":"calendar/calendar-min.js","requires":["event","dom"],supersedes:["datemath"],"skinnable":true},"carousel":{"type":"js","path":"carousel/carousel-min.js","requires":["element"],"optional":["animation"],"skinnable":true},"colorpicker":{"type":"js","path":"colorpicker/colorpicker-min.js","requires":["slider","element"],"optional":["animation"],"skinnable":true},"connection":{"type":"js","path":"connection/connection-min.js","requires":["event"],"supersedes":["connectioncore"]},"connectioncore":{"type":"js","path":"connection/connection_core-min.js","requires":["event"],"pkg":"connection"},"container":{"type":"js","path":"container/container-min.js","requires":["dom","event"],"optional":["dragdrop","animation","connection"],"supersedes":["containercore"],"skinnable":true},"containercore":{"type":"js","path":"container/container_core-min.js","requires":["dom","event"],"pkg":"container"},"cookie":{"type":"js","path":"cookie/cookie-min.js","requires":["yahoo"]},"datasource":{"type":"js","path":"datasource/datasource-min.js","requires":["event"],"optional":["connection"]},"datatable":{"type":"js","path":"datatable/datatable-min.js","requires":["element","datasource"],"optional":["calendar","dragdrop","paginator"],"skinnable":true},datemath:{"type":"js","path":"datemath/datemath-min.js","requires":["yahoo"]},"dom":{"type":"js","path":"dom/dom-min.js","requires":["yahoo"]},"dragdrop":{"type":"js","path":"dragdrop/dragdrop-min.js","requires":["dom","event"]},"editor":{"type":"js","path":"editor/editor-min.js","requires":["menu","element","button"],"optional":["animation","dragdrop"],"supersedes":["simpleeditor"],"skinnable":true},"element":{"type":"js","path":"element/element-min.js","requires":["dom","event"],"optional":["event-mouseenter","event-delegate"]},"element-delegate":{"type":"js","path":"element-delegate/element-delegate-min.js","requires":["element"]},"event":{"type":"js","path":"event/event-min.js","requires":["yahoo"]},"event-simulate":{"type":"js","path":"event-simulate/event-simulate-min.js","requires":["event"]},"event-delegate":{"type":"js","path":"event-delegate/event-delegate-min.js","requires":["event"],"optional":["selector"]},"event-mouseenter":{"type":"js","path":"event-mouseenter/event-mouseenter-min.js","requires":["dom","event"]},"fonts":{"type":"css","path":"fonts/fonts-min.css"},"get":{"type":"js","path":"get/get-min.js","requires":["yahoo"]},"grids":{"type":"css","path":"grids/grids-min.css","requires":["fonts"],"optional":["reset"]},"history":{"type":"js","path":"history/history-min.js","requires":["event"]},"imagecropper":{"type":"js","path":"imagecropper/imagecropper-min.js","requires":["dragdrop","element","resize"],"skinnable":true},"imageloader":{"type":"js","path":"imageloader/imageloader-min.js","requires":["event","dom"]},"json":{"type":"js","path":"json/json-min.js","requires":["yahoo"]},"layout":{"type":"js","path":"layout/layout-min.js","requires":["element"],"optional":["animation","dragdrop","resize","selector"],"skinnable":true},"logger":{"type":"js","path":"logger/logger-min.js","requires":["event","dom"],"optional":["dragdrop"],"skinnable":true},"menu":{"type":"js","path":"menu/menu-min.js","requires":["containercore"],"skinnable":true},"paginator":{"type":"js","path":"paginator/paginator-min.js","requires":["element"],"skinnable":true},"profiler":{"type":"js","path":"profiler/profiler-min.js","requires":["yahoo"]},"profilerviewer":{"type":"js","path":"profilerviewer/profilerviewer-min.js","requires":["profiler","yuiloader","element"],"skinnable":true},"progressbar":{"type":"js","path":"progressbar/progressbar-min.js","requires":["element"],"optional":["animation"],"skinnable":true},"reset":{"type":"css","path":"reset/reset-min.css"},"reset-fonts-grids":{"type":"css","path":"reset-fonts-grids/reset-fonts-grids.css","supersedes":["reset","fonts","grids","reset-fonts"],"rollup":4},"reset-fonts":{"type":"css","path":"reset-fonts/reset-fonts.css","supersedes":["reset","fonts"],"rollup":2},"resize":{"type":"js","path":"resize/resize-min.js","requires":["dragdrop","element"],"optional":["animation"],"skinnable":true},"selector":{"type":"js","path":"selector/selector-min.js","requires":["yahoo","dom"]},"simpleeditor":{"type":"js","path":"editor/simpleeditor-min.js","requires":["element"],"optional":["containercore","menu","button","animation","dragdrop"],"skinnable":true,"pkg":"editor"},"slider":{"type":"js","path":"slider/slider-min.js","requires":["dragdrop"],"optional":["animation"],"skinnable":true},"storage":{"type":"js","path":"storage/storage-min.js","requires":["yahoo","event","cookie"],"optional":["swfstore"]},"stylesheet":{"type":"js","path":"stylesheet/stylesheet-min.js","requires":["yahoo"]},"swf":{"type":"js","path":"swf/swf-min.js","requires":["element"],"supersedes":["swfdetect"]},"swfdetect":{"type":"js","path":"swfdetect/swfdetect-min.js","requires":["yahoo"]},"tabview":{"type":"js","path":"tabview/tabview-min.js","requires":["element"],"optional":["connection"],"skinnable":true},"treeview":{"type":"js","path":"treeview/treeview-min.js","requires":["event","dom"],"optional":["json","animation","calendar"],"skinnable":true},"utilities":{"type":"js","path":"utilities/utilities.js","supersedes":["yahoo","event","dragdrop","animation","dom","connection","element","yahoo-dom-event","get","yuiloader","yuiloader-dom-event"],"rollup":8},"yahoo":{"type":"js","path":"yahoo/yahoo-min.js"},"yahoo-dom-event":{"type":"js","path":"yahoo-dom-event/yahoo-dom-event.js","supersedes":["yahoo","event","dom"],"rollup":3},"yuiloader":{"type":"js","path":"yuiloader/yuiloader-min.js","supersedes":["yahoo","get"]},"yuiloader-dom-event":{"type":"js","path":"yuiloader-dom-event/yuiloader-dom-event.js","supersedes":["yahoo","dom","event","get","yuiloader","yahoo-dom-event"],"rollup":5},"yuitest":{"type":"js","path":"yuitest/yuitest-min.js","requires":["logger"],"optional":["event-simulate"],"skinnable":true}}},ObjectUtil:{appendArray:function(o,a){if(a){for(var i=0;i<a.length;i=i+1){o[a[i]]=true;}}},keys:function(o,ordered){var a=[],i;for(i in o){if(lang.hasOwnProperty(o,i)){a.push(i);}}return a;}},ArrayUtil:{appendArray:function(a1,a2){Array.prototype.push.apply(a1,a2);},indexOf:function(a,val){for(var i=0;i<a.length;i=i+1){if(a[i]===val){return i;}}return-1;},toObject:function(a){var o={};for(var i=0;i<a.length;i=i+1){o[a[i]]=true;}return o;},uniq:function(a){return YUI.ObjectUtil.keys(YUI.ArrayUtil.toObject(a));}}};YAHOO.util.YUILoader=function(o){this._internalCallback=null;this._useYahooListener=false;this.onSuccess=null;this.onFailure=Y.log;this.onProgress=null;this.onTimeout=null;this.scope=this;this.data=null;this.insertBefore=null;this.charset=null;this.varName=null;this.base=YUI.info.base;this.comboBase=YUI.info.comboBase;this.combine=false;this.root=YUI.info.root;this.timeout=0;this.ignore=null;this.force=null;this.allowRollup=true;this.filter=null;this.required={};this.moduleInfo=lang.merge(YUI.info.moduleInfo);this.rollups=null;this.loadOptional=false;this.sorted=[];this.loaded={};this.dirty=true;this.inserted={};var self=this;env.listeners.push(function(m){if(self._useYahooListener){self.loadNext(m.name);}});this.skin=lang.merge(YUI.info.skin);this._config(o);};Y.util.YUILoader.prototype={FILTERS:{RAW:{"searchExp":"-min\\.js","replaceStr":".js"},DEBUG:{"searchExp":"-min\\.js","replaceStr":"-debug.js"}},SKIN_PREFIX:"skin-",_config:function(o){if(o){for(var i in o){if(lang.hasOwnProperty(o,i)){if(i=="require"){this.require(o[i]);}else{this[i]=o[i];}}}}var f=this.filter;if(lang.isString(f)){f=f.toUpperCase();if(f==="DEBUG"){this.require("logger");}if(!Y.widget.LogWriter){Y.widget.LogWriter=function(){return Y;};}this.filter=this.FILTERS[f];}},addModule:function(o){if(!o||!o.name||!o.type||(!o.path&&!o.fullpath)){return false;}o.ext=("ext"in o)?o.ext:true;o.requires=o.requires||[];this.moduleInfo[o.name]=o;this.dirty=true;return true;},require:function(what){var a=(typeof what==="string")?arguments:what;this.dirty=true;YUI.ObjectUtil.appendArray(this.required,a);},_addSkin:function(skin,mod){var name=this.formatSkin(skin),info=this.moduleInfo,sinf=this.skin,ext=info[mod]&&info[mod].ext;if(!info[name]){this.addModule({"name":name,"type":"css","path":sinf.base+skin+"/"+sinf.path,"after":sinf.after,"rollup":sinf.rollup,"ext":ext});}if(mod){name=this.formatSkin(skin,mod);if(!info[name]){var mdef=info[mod],pkg=mdef.pkg||mod;this.addModule({"name":name,"type":"css","after":sinf.after,"path":pkg+"/"+sinf.base+skin+"/"+mod+".css","ext":ext});}}return name;},getRequires:function(mod){if(!mod){return[];}if(!this.dirty&&mod.expanded){return mod.expanded;}mod.requires=mod.requires||[];var i,d=[],r=mod.requires,o=mod.optional,info=this.moduleInfo,m;for(i=0;i<r.length;i=i+1){d.push(r[i]);m=info[r[i]];YUI.ArrayUtil.appendArray(d,this.getRequires(m));}if(o&&this.loadOptional){for(i=0;i<o.length;i=i+1){d.push(o[i]);YUI.ArrayUtil.appendArray(d,this.getRequires(info[o[i]]));}}mod.expanded=YUI.ArrayUtil.uniq(d);return mod.expanded;},getProvides:function(name,notMe){var addMe=!(notMe),ckey=(addMe)?PROV:SUPER,m=this.moduleInfo[name],o={};if(!m){return o;}if(m[ckey]){return m[ckey];}var s=m.supersedes,done={},me=this;var add=function(mm){if(!done[mm]){done[mm]=true;lang.augmentObject(o,me.getProvides(mm));}};if(s){for(var i=0;i<s.length;i=i+1){add(s[i]);}}m[SUPER]=o;m[PROV]=lang.merge(o);m[PROV][name]=true;return m[ckey];},calculate:function(o){if(o||this.dirty){this._config(o);this._setup();this._explode();if(this.allowRollup){this._rollup();}this._reduce();this._sort();this.dirty=false;}},_setup:function(){var info=this.moduleInfo,name,i,j;for(name in info){if(lang.hasOwnProperty(info,name)){var m=info[name];if(m&&m.skinnable){var o=this.skin.overrides,smod;if(o&&o[name]){for(i=0;i<o[name].length;i=i+1){smod=this._addSkin(o[name][i],name);}}else{smod=this._addSkin(this.skin.defaultSkin,name);}if(YUI.ArrayUtil.indexOf(m.requires,smod)==-1){m.requires.push(smod);}}}}var l=lang.merge(this.inserted);if(!this._sandbox){l=lang.merge(l,env.modules);}if(this.ignore){YUI.ObjectUtil.appendArray(l,this.ignore);}if(this.force){for(i=0;i<this.force.length;i=i+1){if(this.force[i]in l){delete l[this.force[i]];}}}for(j in l){if(lang.hasOwnProperty(l,j)){lang.augmentObject(l,this.getProvides(j));}}this.loaded=l;},_explode:function(){var r=this.required,i,mod;for(i in r){if(lang.hasOwnProperty(r,i)){mod=this.moduleInfo[i];if(mod){var req=this.getRequires(mod);if(req){YUI.ObjectUtil.appendArray(r,req);}}}}},_skin:function(){},formatSkin:function(skin,mod){var s=this.SKIN_PREFIX+skin;if(mod){s=s+"-"+mod;}return s;},parseSkin:function(mod){if(mod.indexOf(this.SKIN_PREFIX)===0){var a=mod.split("-");return{skin:a[1],module:a[2]};}return null;},_rollup:function(){var i,j,m,s,rollups={},r=this.required,roll,info=this.moduleInfo;if(this.dirty||!this.rollups){for(i in info){if(lang.hasOwnProperty(info,i)){m=info[i];if(m&&m.rollup){rollups[i]=m;}}}this.rollups=rollups;}for(;;){var rolled=false;for(i in rollups){if(!r[i]&&!this.loaded[i]){m=info[i];s=m.supersedes;roll=false;if(!m.rollup){continue;}var skin=(m.ext)?false:this.parseSkin(i),c=0;if(skin){for(j in r){if(lang.hasOwnProperty(r,j)){if(i!==j&&this.parseSkin(j)){c++;roll=(c>=m.rollup);if(roll){break;}}}}}else{for(j=0;j<s.length;j=j+1){if(this.loaded[s[j]]&&(!YUI.dupsAllowed[s[j]])){roll=false;break;}else{if(r[s[j]]){c++;roll=(c>=m.rollup);if(roll){break;}}}}}if(roll){r[i]=true;rolled=true;this.getRequires(m);}}}if(!rolled){break;}}},_reduce:function(){var i,j,s,m,r=this.required;for(i in r){if(i in this.loaded){delete r[i];}else{var skinDef=this.parseSkin(i);if(skinDef){if(!skinDef.module){var skin_pre=this.SKIN_PREFIX+skinDef.skin;for(j in r){if(lang.hasOwnProperty(r,j)){m=this.moduleInfo[j];var ext=m&&m.ext;if(!ext&&j!==i&&j.indexOf(skin_pre)>-1){delete r[j];}}}}}else{m=this.moduleInfo[i];s=m&&m.supersedes;if(s){for(j=0;j<s.length;j=j+1){if(s[j]in r){delete r[s[j]];}}}}}}},_onFailure:function(msg){YAHOO.log("Failure","info","loader");var f=this.onFailure;if(f){f.call(this.scope,{msg:"failure: "+msg,data:this.data,success:false});}},_onTimeout:function(){YAHOO.log("Timeout","info","loader");var f=this.onTimeout;if(f){f.call(this.scope,{msg:"timeout",data:this.data,success:false});}},_sort:function(){var s=[],info=this.moduleInfo,loaded=this.loaded,checkOptional=!this.loadOptional,me=this;var requires=function(aa,bb){var mm=info[aa];if(loaded[bb]||!mm){return false;}var ii,rr=mm.expanded,after=mm.after,other=info[bb],optional=mm.optional;if(rr&&YUI.ArrayUtil.indexOf(rr,bb)>-1){return true;}if(after&&YUI.ArrayUtil.indexOf(after,bb)>-1){return true;}if(checkOptional&&optional&&YUI.ArrayUtil.indexOf(optional,bb)>-1){return true;}var ss=info[bb]&&info[bb].supersedes;if(ss){for(ii=0;ii<ss.length;ii=ii+1){if(requires(aa,ss[ii])){return true;}}}if(mm.ext&&mm.type=="css"&&!other.ext&&other.type=="css"){return true;}return false;};for(var i in this.required){if(lang.hasOwnProperty(this.required,i)){s.push(i);}}var p=0;for(;;){var l=s.length,a,b,j,k,moved=false;for(j=p;j<l;j=j+1){a=s[j];for(k=j+1;k<l;k=k+1){if(requires(a,s[k])){b=s.splice(k,1);s.splice(j,0,b[0]);moved=true;break;}}if(moved){break;}else{p=p+1;}}if(!moved){break;}}this.sorted=s;},toString:function(){var o={type:"YUILoader",base:this.base,filter:this.filter,required:this.required,loaded:this.loaded,inserted:this.inserted};lang.dump(o,1);},_combine:function(){this._combining=[];var self=this,s=this.sorted,len=s.length,js=this.comboBase,css=this.comboBase,target,startLen=js.length,i,m,type=this.loadType;YAHOO.log("type "+type);for(i=0;i<len;i=i+1){m=this.moduleInfo[s[i]];if(m&&!m.ext&&(!type||type===m.type)){target=this.root+m.path;target+="&";if(m.type=="js"){js+=target;}else{css+=target;}this._combining.push(s[i]);}}if(this._combining.length){YAHOO.log("Attempting to combine: "+this._combining,"info","loader");var callback=function(o){var c=this._combining,len=c.length,i,m;for(i=0;i<len;i=i+1){this.inserted[c[i]]=true;}this.loadNext(o.data);},loadScript=function(){if(js.length>startLen){YAHOO.util.Get.script(self._filter(js),{data:self._loading,onSuccess:callback,onFailure:self._onFailure,onTimeout:self._onTimeout,insertBefore:self.insertBefore,charset:self.charset,timeout:self.timeout,scope:self});}else{this.loadNext();}};if(css.length>startLen){YAHOO.util.Get.css(this._filter(css),{data:this._loading,onSuccess:loadScript,onFailure:this._onFailure,onTimeout:this._onTimeout,insertBefore:this.insertBefore,charset:this.charset,timeout:this.timeout,scope:self});}else{loadScript();}return;}else{this.loadNext(this._loading);}},insert:function(o,type){this.calculate(o);this._loading=true;this.loadType=type;if(this.combine){return this._combine();}if(!type){var self=this;this._internalCallback=function(){self._internalCallback=null;self.insert(null,"js");};this.insert(null,"css");return;}this.loadNext();},sandbox:function(o,type){var self=this,success=function(o){var idx=o.argument[0],name=o.argument[2];self._scriptText[idx]=o.responseText;if(self.onProgress){self.onProgress.call(self.scope,{name:name,scriptText:o.responseText,xhrResponse:o,data:self.data});}self._loadCount++;if(self._loadCount>=self._stopCount){var v=self.varName||"YAHOO";var t="(function() {\n";var b="\nreturn "+v+";\n})();";var ref=eval(t+self._scriptText.join("\n")+b);self._pushEvents(ref);if(ref){self.onSuccess.call(self.scope,{reference:ref,data:self.data});}else{self._onFailure.call(self.varName+" reference failure");}}},failure=function(o){self.onFailure.call(self.scope,{msg:"XHR failure",xhrResponse:o,data:self.data});};self._config(o);if(!self.onSuccess){throw new Error("You must supply an onSuccess handler for your sandbox");}self._sandbox=true;if(!type||type!=="js"){self._internalCallback=function(){self._internalCallback=null;self.sandbox(null,"js");};self.insert(null,"css");return;}if(!util.Connect){var ld=new YAHOO.util.YUILoader();ld.insert({base:self.base,filter:self.filter,require:"connection",insertBefore:self.insertBefore,charset:self.charset,onSuccess:function(){self.sandbox(null,"js");},scope:self},"js");return;}self._scriptText=[];self._loadCount=0;self._stopCount=self.sorted.length;self._xhr=[];self.calculate();var s=self.sorted,l=s.length,i,m,url;for(i=0;i<l;i=i+1){m=self.moduleInfo[s[i]];if(!m){self._onFailure("undefined module "+m);for(var j=0;j<self._xhr.length;j=j+1){self._xhr[j].abort();}return;}if(m.type!=="js"){self._loadCount++;continue;}url=m.fullpath;url=(url)?self._filter(url):self._url(m.path);var xhrData={success:success,failure:failure,scope:self,argument:[i,url,s[i]]};self._xhr.push(util.Connect.asyncRequest("GET",url,xhrData));}},loadNext:function(mname){if(!this._loading){return;}var self=this,donext=function(o){self.loadNext(o.data);},successfn,s=this.sorted,len=s.length,i,fn,m,url;if(mname){if(mname!==this._loading){return;}this.inserted[mname]=true;if(this.onProgress){this.onProgress.call(this.scope,{name:mname,data:this.data});}}for(i=0;i<len;i=i+1){if(s[i]in this.inserted){continue;}if(s[i]===this._loading){return;}m=this.moduleInfo[s[i]];if(!m){this.onFailure.call(this.scope,{msg:"undefined module "+m,data:this.data});return;}if(!this.loadType||this.loadType===m.type){successfn=donext;this._loading=s[i];fn=(m.type==="css")?util.Get.css:util.Get.script;url=m.fullpath;url=(url)?this._filter(url):this._url(m.path);if(env.ua.webkit&&env.ua.webkit<420&&m.type==="js"&&!m.varName){successfn=null;this._useYahooListener=true;}fn(url,{data:s[i],onSuccess:successfn,onFailure:this._onFailure,onTimeout:this._onTimeout,insertBefore:this.insertBefore,charset:this.charset,timeout:this.timeout,varName:m.varName,scope:self});return;}}this._loading=null;if(this._internalCallback){var f=this._internalCallback;this._internalCallback=null;f.call(this);}else{if(this.onSuccess){this._pushEvents();this.onSuccess.call(this.scope,{data:this.data});}}},_pushEvents:function(ref){var r=ref||YAHOO;if(r.util&&r.util.Event){r.util.Event._load();}},_filter:function(str){var f=this.filter;return(f)?str.replace(new RegExp(f.searchExp,"g"),f.replaceStr):str;},_url:function(path){return this._filter((this.base||"")+path);}};})();YAHOO.register("yuiloader",YAHOO.util.YUILoader,{version:"2.9.0",build:"2800"});/* End of File include/javascript/yui/build/yuiloader/yuiloader-min.js */


function get_html_translation_table(table,quote_style){var entities={},hash_map={},decimal=0,symbol='';var constMappingTable={},constMappingQuoteStyle={};var useTable={},useQuoteStyle={};constMappingTable[0]='HTML_SPECIALCHARS';constMappingTable[1]='HTML_ENTITIES';constMappingQuoteStyle[0]='ENT_NOQUOTES';constMappingQuoteStyle[2]='ENT_COMPAT';constMappingQuoteStyle[3]='ENT_QUOTES';useTable=!isNaN(table)?constMappingTable[table]:table?table.toUpperCase():'HTML_SPECIALCHARS';useQuoteStyle=!isNaN(quote_style)?constMappingQuoteStyle[quote_style]:quote_style?quote_style.toUpperCase():'ENT_COMPAT';if(useTable!=='HTML_SPECIALCHARS'&&useTable!=='HTML_ENTITIES'){throw new Error("Table: "+useTable+' not supported');}
entities['38']='&amp;';if(useTable==='HTML_ENTITIES'){entities['160']='&nbsp;';entities['161']='&iexcl;';entities['162']='&cent;';entities['163']='&pound;';entities['164']='&curren;';entities['165']='&yen;';entities['166']='&brvbar;';entities['167']='&sect;';entities['168']='&uml;';entities['169']='&copy;';entities['170']='&ordf;';entities['171']='&laquo;';entities['172']='&not;';entities['173']='&shy;';entities['174']='&reg;';entities['175']='&macr;';entities['176']='&deg;';entities['177']='&plusmn;';entities['178']='&sup2;';entities['179']='&sup3;';entities['180']='&acute;';entities['181']='&micro;';entities['182']='&para;';entities['183']='&middot;';entities['184']='&cedil;';entities['185']='&sup1;';entities['186']='&ordm;';entities['187']='&raquo;';entities['188']='&frac14;';entities['189']='&frac12;';entities['190']='&frac34;';entities['191']='&iquest;';entities['192']='&Agrave;';entities['193']='&Aacute;';entities['194']='&Acirc;';entities['195']='&Atilde;';entities['196']='&Auml;';entities['197']='&Aring;';entities['198']='&AElig;';entities['199']='&Ccedil;';entities['200']='&Egrave;';entities['201']='&Eacute;';entities['202']='&Ecirc;';entities['203']='&Euml;';entities['204']='&Igrave;';entities['205']='&Iacute;';entities['206']='&Icirc;';entities['207']='&Iuml;';entities['208']='&ETH;';entities['209']='&Ntilde;';entities['210']='&Ograve;';entities['211']='&Oacute;';entities['212']='&Ocirc;';entities['213']='&Otilde;';entities['214']='&Ouml;';entities['215']='&times;';entities['216']='&Oslash;';entities['217']='&Ugrave;';entities['218']='&Uacute;';entities['219']='&Ucirc;';entities['220']='&Uuml;';entities['221']='&Yacute;';entities['222']='&THORN;';entities['223']='&szlig;';entities['224']='&agrave;';entities['225']='&aacute;';entities['226']='&acirc;';entities['227']='&atilde;';entities['228']='&auml;';entities['229']='&aring;';entities['230']='&aelig;';entities['231']='&ccedil;';entities['232']='&egrave;';entities['233']='&eacute;';entities['234']='&ecirc;';entities['235']='&euml;';entities['236']='&igrave;';entities['237']='&iacute;';entities['238']='&icirc;';entities['239']='&iuml;';entities['240']='&eth;';entities['241']='&ntilde;';entities['242']='&ograve;';entities['243']='&oacute;';entities['244']='&ocirc;';entities['245']='&otilde;';entities['246']='&ouml;';entities['247']='&divide;';entities['248']='&oslash;';entities['249']='&ugrave;';entities['250']='&uacute;';entities['251']='&ucirc;';entities['252']='&uuml;';entities['253']='&yacute;';entities['254']='&thorn;';entities['255']='&yuml;';}
if(useQuoteStyle!=='ENT_NOQUOTES'){entities['34']='&quot;';}
if(useQuoteStyle==='ENT_QUOTES'){entities['39']='&#39;';}
entities['60']='&lt;';entities['62']='&gt;';for(decimal in entities){symbol=String.fromCharCode(decimal);hash_map[symbol]=entities[decimal];}
return hash_map;}/* End of File include/javascript/phpjs/get_html_translation_table.js */


function html_entity_decode(string,quote_style){var hash_map={},symbol='',tmp_str='',entity='';tmp_str=string.toString();if(false===(hash_map=this.get_html_translation_table('HTML_ENTITIES',quote_style))){return false;}
delete(hash_map['&']);hash_map['&']='&amp;';for(symbol in hash_map){entity=hash_map[symbol];tmp_str=tmp_str.split(entity).join(symbol);}
tmp_str=tmp_str.split('&#039;').join("'");return tmp_str;}/* End of File include/javascript/phpjs/html_entity_decode.js */


function htmlentities(string,quote_style,charset,double_encode){var hash_map=this.get_html_translation_table('HTML_ENTITIES',quote_style),symbol='';string=string==null?'':string+'';if(!hash_map){return false;}
if(quote_style&&quote_style==='ENT_QUOTES'){hash_map["'"]='&#039;';}
if(!!double_encode||double_encode==null){for(symbol in hash_map){if(hash_map.hasOwnProperty(symbol)){string=string.split(symbol).join(hash_map[symbol]);}}}else{string=string.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(ignore,text,entity){for(symbol in hash_map){if(hash_map.hasOwnProperty(symbol)){text=text.split(symbol).join(hash_map[symbol]);}}
return text+entity;});}
return string;}/* End of File include/javascript/phpjs/htmlentities.js */


function initPanel(id,state){panelId='detailpanel_'+id;expandPanel(id);if(state=='collapsed'){collapsePanel(id);}}
function expandPanel(id){var panelId='detailpanel_'+id;document.getElementById(panelId).className=document.getElementById(panelId).className.replace(/(expanded|collapsed)/ig,'')+' expanded';}
function collapsePanel(id){var panelId='detailpanel_'+id;document.getElementById(panelId).className=document.getElementById(panelId).className.replace(/(expanded|collapsed)/ig,'')+' collapsed';}
function setCollapseState(mod,panel,isCollapsed){var sugar_panel_collase=Get_Cookie("sugar_panel_collase");if(sugar_panel_collase==null){sugar_panel_collase={};}else{sugar_panel_collase=YAHOO.lang.JSON.parse(sugar_panel_collase);}
sugar_panel_collase[mod]=sugar_panel_collase[mod]||{};sugar_panel_collase[mod][panel]=isCollapsed;Set_Cookie('sugar_panel_collase',YAHOO.lang.JSON.stringify(sugar_panel_collase),30,'/','','');}/* End of File include/EditView/Panels.js */

var MintHCMPopup=function(title,body,buttons,options,onShow){if(!(this instanceof MintHCMPopup)){return new MintHCMPopup(title,body,buttons,options,onShow);}
this.id="MintHCMPopup";this.title=title||"";this.body=body||"";this.buttons=buttons||[];this.options=options||{};this.onShow=onShow||null;this.init=function(){if(undefined!==$('#'+this.id).get(0)){$('#'+this.id).remove();}
$('body').append('<div id="'+this.id+'">'+this.getBody()+'</div>');if(typeof this.options.noCloseButton!=='undefined'&&this.options.noCloseButton){$('.MintHCMPopup-header').removeClass('MintHCMPopup-close');}else{$('.MintHCMPopup-close').click(MintHCMPopup.close);}
this.setButtonsEvents();if(this.onShow){this.onShow();}};this.getBody=function(){var body=_.template('<div class="MintHCMPopup-container"><div class="MintHCMPopup-header MintHCMPopup-close"><div class="MintHCMPopup-title"><%= title %></div><span class="suitepicon suitepicon-action-clear"></span><div style="clear: both;"></div></div><div class="MintHCMPopup-body"><%= body %></div><div class="MintHCMPopup-buttons"><%= buttons %></div></div>');return body({title:this.title,body:this.body,buttons:this.getButtons()});};this.getButtons=function(){var button=_.template('<input type="button" value="<%= text %>" />');var buttons="";this.buttons.forEach(function(btn){buttons+=button({text:btn.text});});return buttons;};this.setButtonsEvents=function(){const _this=this;$('.MintHCMPopup-buttons input').each(function(index){$(this).click(_this.buttons[index].click);});};this.init();return this;};MintHCMPopup.close=function(){$('#MintHCMPopup').fadeOut();};/* End of File include/javascript/MintHCMPopup.js */

combo_goo_date_start=null;generateOnboardingOffboarding={id:'generateOnboardingOffboarding',form_name:'GenerateOnboardingOffboarding',entrypoint:'scheduleGenerateOnboardingOffboarding',relate_field_name:'employee',relate_field_target_module:'Employees',tpl:'themes/SuiteP/tpls/generateOnboardingOffboarding.tpl',popup:null,init:function(){viewTools.GUI.fieldErrorUnmark();$.get(this.tpl,function(tpl){this.popup=MintHCMPopup(viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_POPUP_TITLE'),this.getPopupBody(tpl),[{text:"OK",class:"primary",click:function(){this.valid(function(employee_id,date_start,parent_id){this.sendRecords($('#'+this.form_name+' #parent_type').val(),parent_id,employee_id,date_start);MintHCMPopup.close();}.bind(this));}.bind(this)}],{},this.onPopupShow.bind(this));}.bind(this));},valid:function(callback){let result=true;viewTools.GUI.fieldErrorUnmark();let employee_field=$('#'+this.form_name+' #'+this.relate_field_name+'_id');let date_start_date=$('#'+this.form_name+' #goo_date_start_date');let parent_id=$('#'+this.form_name+' #parent_id');if(_.isEmpty(employee_field.val())){viewTools.GUI.fieldErrorMark(employee_field,viewTools.language.get('app_strings','ERR_MISSING_REQUIRED_FIELDS')+' '+viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_EMPLOYEE_NAME'));result=false;}
if(_.isEmpty(date_start_date.val())){viewTools.GUI.fieldErrorMark(date_start_date,viewTools.language.get('app_strings','ERR_MISSING_REQUIRED_FIELDS')+' '+viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_START_DATE'));result=false;}
if(_.isEmpty(parent_id.val())){viewTools.GUI.fieldErrorMark(parent_id,viewTools.language.get('app_strings','ERR_MISSING_REQUIRED_FIELDS')+' '+viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_TEMPLATE'));result=false;}
if(result){let date_start=date_start_date.val()+" "+$('#goo_date_start_hours').val()+":"+$('#goo_date_start_minutes').val();if($('#goo_date_start_meridiem').length===1){let date_start=date_start+$('#goo_date_start_meridiem').val();}
callback(employee_field.val(),date_start,parent_id.val());}},sendRecords:function(module_name,template_id,employee_id,date_start){let url_="index.php?entryPoint="+this.entrypoint+"&module_name="+module_name+"&template_id="+template_id+"&employee_id="+employee_id+"&date_start="+date_start;$.ajax({type:"POST",async:true,url:url_,success:function(data){data=JSON.parse(data);if(data===1){viewTools.GUI.statusBox.showStatus(viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_SUCCESS'),'success',5000);}else{this.showErrors(data);}}.bind(this),error:function(jqXHR,exception){viewTools.GUI.statusBox.showStatus(viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_ERROR'),'error',5000);}});},showErrors:function(errors){MintHCMPopup(viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_ERROR'),this.getErrorPopupBody(errors));},getErrorPopupBody:function(errors){let body='';for(let error in errors){body+='<p>'+viewTools.language.get('app_strings','LBL_GENERATEONBOARDINGOFFBOARDING_ERROR_'+error.toUpperCase());if(error=='organizational_unit_manager'){body+='</p><ul style="list-style-type:disc;padding-left:30px;">';for(let record in errors[error]){body+='<li>'+this.createLinkToModuleRecord(errors[error][record])+'</li>';}
body+='</ul>';}else{body+=this.createLinkToModuleRecord(errors[error])+'</p>';}}
return body;},createLinkToModuleRecord:function(record){return'<a style="font-weight: bold;" href="index.php?module='+record.module+'&action=DetailView&record='+record.id+'" target="_blank">'+record.name+'</a>';},getPopupBody:function(tpl){let body=_.template(tpl);return'<div id="'+this.id+'" style="overflow: hidden">'+body(Object.assign({},{APP:SUGAR.language.languages.app_strings,relate_field_name:this.relate_field_name,form_name:this.form_name,relate_field_target_module:this.relate_field_target_module,parent_type_options:this.getParentTypeOptions(),hide_dropdown:this.hideDropdown(),is_employees:this.isEmployees(),},this.getPrefillData()))+'</div>';},getPrefillData:function(){let employee_id,employee_name,parent_id,parent_name,parent_type='';const module=$('input[name=module]:not(.form-control)').val();const record_id=$('input[name=record]').val();const record_name=$('div[field=name] > span.sugar_field').text().trim();const name_for_onboardings=$('div[field=onboardingtemplate_name] > a > span.sugar_field').text().trim();const id_for_onboardings=$('div[field=onboardingtemplate_name] > a > span.sugar_field').attr('data-id-value');const name_for_offboardings=$('div[field=offboardingtemplate_name] > a > span.sugar_field').text().trim();const id_for_offboardings=$('div[field=offboardingtemplate_name] > a > span.sugar_field').attr('data-id-value');switch(module){case'Employees':employee_id=record_id;employee_name=record_name;parent_type="document.querySelector('#parent_type').value";break;case'OffboardingTemplates':parent_id=record_id;parent_name=record_name;parent_type="\'OffboardingTemplates\'";break;case'OnboardingTemplates':parent_id=record_id;parent_name=record_name;parent_type="\'OnboardingTemplates\'";break;case'Onboardings':parent_id=id_for_onboardings;parent_name=name_for_onboardings;parent_type="\'OnboardingTemplates\'";break;case'Offboardings':parent_id=id_for_offboardings
parent_name=name_for_offboardings;parent_type="\'OffboardingTemplates\'";break;}
return{employee_id:employee_id,employee_name:employee_name,parent_id:parent_id,parent_name:parent_name,parent_type:parent_type}},hideDropdown:function(){let hide_dropdown="";const module=$('input[name=module]:not(.form-control)').val();switch(module){case'Onboardings':case'Offboardings':case'OffboardingTemplates':case'OnboardingTemplates':hide_dropdown=" hidden";break;}
return hide_dropdown;},isEmployees:function(){let is_employees="";const module=$('input[name=module]:not(.form-control)').val();switch(module){case'Employees':is_employees="true";break;}
return is_employees;},getParentTypeOptions:function(){let selected='';const module=$('input[name=module]:not(.form-control)').val();const templates=viewTools.language.get('app_list_strings','template_type_list');let options='';for(let module_name in templates){selected=(module_name==module)?' selected':'';options+='<option value="'+module_name+'"'+selected+'>'+templates[module_name]+'</option>';}
return options;},onPopupShow:function(){this.prepareSqsObjects();this.prepareCalendar();if(this.isEmployees()){$('#'+this.form_name+' select#parent_type').change(this.getOnboardingOffboardingNameForEmployees.bind(this))
$('#'+this.form_name+' select#parent_type').val('OnboardingTemplates')
viewTools.api.callCustomApi({module:'Positions',action:'getOnboardingOffboardingName',dataPOST:{boarding:'OnboardingTemplates',employee_id:$('input[name=record]').val(),},callback:function(data){if(data){$('#'+this.form_name+' #parent_id').val(data['parent_id']);$('#'+this.form_name+' #parent_name').val(data['parent_name']);}}.bind(this)});}},prepareSqsObjects:function(){QSProcessedFieldsArray={};sqs_objects=[];let relate_field_name=this.relate_field_name+"_name";let relate_field_id=this.relate_field_name+"_id";sqs_objects[this.form_name+"_"+this.relate_field_name+"_name"]={form:this.form_name,method:"query",modules:[this.relate_field_target_module],group:"and",field_list:["name","id"],populate_list:[relate_field_name,relate_field_id],conditions:[{"name":"name","op":"like_custom","end":"%","value":""}],required_list:[relate_field_id],order:"name",limit:"30",no_match_text:"Nie pasuje"};sqs_objects[this.form_name+"_parent_name"]={form:this.form_name,method:"query",modules:["Accounts"],group:"or",field_list:["name","id"],populate_list:["parent_name","parent_id"],required_list:["parent_id"],conditions:[{"name":"name","op":"like_custom","end":"%","value":""}],order:"name",limit:"30",no_match_text:"Nie pasuje"};enableQS();if(typeof(changeParentQS)=='undefined'){let disabledModules=[];changeParentQS=function(field){if(typeof sqs_objects=='undefined'){return;}
field=YAHOO.util.Dom.get(field);let form=field.form;let sqsId=form.id+"_"+field.id;let typeField=form.elements.parent_type;let new_module=typeField.value;if(typeof(QSFieldsArray[sqsId])!='undefined'){QSFieldsArray[sqsId].sqs.modules=new Array(new_module);}
if(typeof QSProcessedFieldsArray!='undefined'){QSProcessedFieldsArray[sqsId]=false;}
if(sqs_objects[sqsId]==undefined){return;}
sqs_objects[sqsId]["modules"]=new Array(new_module);if((typeof(disabledModules)!='undefined'&&typeof(disabledModules[new_module])!='undefined')||""=="readonly"||""=="parent_type"){sqs_objects[sqsId]["disable"]=true;field.readOnly=true;}else{sqs_objects[sqsId]["disable"]=false;field.readOnly=false;}
enableQS(false);}}
changeParentQS("parent_name")},prepareCalendar:function(){viewTools.api.callCustomApi({module:'Home',action:'getJSCalendarVariables',callback:function(data){if(data){[_cal_date_format,_user_date_format,_user_time_format,_calendar_format,_time_separator,_calendar_fdow]=data;combo_goo_date_start=new Datetimecombo("","goo_date_start",_user_time_format,"0",'',false,true,'');let text=combo_goo_date_start.html("");$('#'+this.form_name+' #goo_date_start_time_section').html(text);eval(combo_goo_date_start.jsscript(""));Calendar.setup({onClose:update_goo_date_start,inputField:"goo_date_start_date",form:this.form_name,ifFormat:_calendar_format,daFormat:_calendar_format,button:"goo_date_start_trigger",singleClick:true,step:1,weekNumbers:false,startWeekday:_calendar_fdow,comboObject:combo_goo_date_start});combo_goo_date_start.update(false);}}.bind(this)});},getOnboardingOffboardingNameForEmployees:function(e){viewTools.api.callCustomApi({module:'Positions',action:'getOnboardingOffboardingName',dataPOST:{boarding:e.currentTarget.value,employee_id:$('input[name=record]').val(),},callback:function(data){if(data){$('#'+this.form_name+' #parent_id').val(data['parent_id']);$('#'+this.form_name+' #parent_name').val(data['parent_name']);}}.bind(this)});}};/* End of File include/GenerateOnboardingOffboarding/generateOnboardingOffboarding.js */

function convertDateFieldToMoment(field_id){var result=false;if($("#"+field_id).length==1){var date_moment=moment($("#"+field_id).val(),viewTools.date.getDateTimeFormat());if(date_moment._d.toString()!="Invalid Date"){result=date_moment;}}
return result;}
function getMomentsDiffInSeconds(moment_start,moment_end){return moment_end.diff(moment_start)/ 1000;}/* End of File include/javascript/datetime_utils.js */


(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&o>i;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&u>i;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&a>i;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,g=c.bind,y=Object.create,d=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1 / 0)};var _=function(n,t){return function(r){var e=arguments.length;if(2>e||null==r)return r;for(var u=1;e>u;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;a>c;c++){var f=o[c];t&&r[f]!==void 0||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(y)return y(n);d.prototype=n;var t=new d;return d.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&A>=t};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;u>e;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;u>o;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;return e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),e!==void 0&&e!==-1?n[e]:void 0},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;u>i;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-1 / 0,o=-1 / 0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-1 / 0&&i===-1 / 0)&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1 / 0,o=1 / 0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;c>a;a++)e=n[a],i>e&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(o>u||1 / 0===u&&1 / 0===i)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);a>o;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;l>f;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);a>o;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);u>e;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;r>o&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;t>e;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);o>i;){var a=Math.floor((i+o)/ 2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/ r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(g&&n.bind===g)return g.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;u>o;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,0>=l||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;t>f&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;i>a;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;o>i;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;c>a;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;e>i;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1 / n===1 / t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1 /+n===1 / t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n?!0:k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof /./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return n===void 0},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return e===void 0&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(a){throw a.source=i,a}var c=function(n){return o.call(this,n,m)},f=t.variable||"obj";return c.source="function("+f+"){\n"+i+"}",c},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);/* End of File include/ViewTools/javascript/underscore-min.js */

if(YAHOO&&YAHOO.widget&&YAHOO.widget.AutoComplete){YAHOO.widget.AutoComplete.prototype.autoHighlight=false;}/* End of File include/ViewTools/javascript/autocomplete-config.js */

if(window.viewTools===undefined){window.viewTools={};}
window.viewTools.api={callController:function(input){try{if(input.module!==undefined&&input.action!==undefined){if(input.dataType===undefined){input.dataType="text";}
if(input.async===undefined||input.async!=true||input.async!=false){input.async=false;}
if(input.dataGET===undefined){input.dataGET={};}
input.dataGET.module=input.module;input.dataGET.action=input.action;input.dataGET.sugar_body_only=1;var url='';for(key in input.dataGET){if(url==''){url='index.php?';}else{url=url+'&';}
url=url+key+'='+input.dataGET[key];}
if(input.dataPOST===undefined){input.dataPOST={};}
$.ajax({dataType:input.dataType,url:url,async:input.async,method:'POST',data:input.dataPOST,success:function(response){if(input.callback!==undefined){return input.callback(response);}},error:function(e){viewTools.console.log(e);}});}}catch(e){viewTools.console.log(e);}},callCustomApi:function(input){try{if(input.module!==undefined&&input.action!==undefined){if(input.dataType===undefined){input.dataType="json";}
if(input.async===undefined||input.async!=true||input.async!=false){input.async=false;}
if(input.dataPOST===undefined){input.dataPOST={};}
input.dataPOST.module=input.module;input.dataPOST.action=input.action;input.dataPOST.is_frontend=true;$.ajax({dataType:input.dataType,url:'./index.php?entryPoint=viewToolsApi',async:input.async,method:'POST',data:input.dataPOST,success:function(response){if(input.callback!==undefined){return input.callback(response);}},error:function(e){viewTools.console.log(e);}});}}catch(e){viewTools.console.log(e);}},};window.viewTools.console={log:function(message){if(typeof message=="object"){console.warn('vt_notice: response as object:');console.warn(message);}else{console.warn('vt_notice:'+message);}}};window.viewTools.form={afterSave:function(callback){viewTools.cache.form_afterSave.push(callback);},beforeSave:function(callback,enforced){if(enforced===undefined||enforced===true){viewTools.cache.form_beforeSave_enforced.push(callback);}else if(enforced!==undefined||enforced===false){viewTools.cache.form_beforeSave.push(callback);}},blur:function(handler,enforced_calculated){if(enforced_calculated===undefined||enforced_calculated!==true){enforced_calculated=false;}
if(viewTools.init.field(handler)===true){if(handler.data('dependency')!==undefined){var dependency=viewTools.formula._parseFormula(handler.data('dependency'),handler,'dependency');try{var eval_response=eval(dependency);}catch(e){viewTools.console.log(e);}
if(eval_response!=true){viewTools.form.setValue(handler,'');viewTools.form.lockField(handler);viewTools.GUI.hideField(handler);}
else{viewTools.form.unlockField(handler);viewTools.GUI.showField(handler);}}
if(handler.data('calculated')!==undefined&&(enforced_calculated===true||handler.hasClass('vt_enforced'))){var formula=viewTools.formula._parseFormula(handler.data('calculated'),handler,'calculated');try{var value=eval(formula);}catch(e){viewTools.console.log(e);}
if(value===false){value='';}
let unformatted_value=unformatNumber(value,num_grp_sep,dec_sep,2);if(!isNaN(unformatted_value)){value=unformatted_value;}
viewTools.form.setValue(handler,formatNumber(value,num_grp_sep,dec_sep,2));}
if(handler.data('required')!==undefined){var required=viewTools.formula._parseFormula(handler.data('required'),handler,'required');try{var eval_response=eval(required);}catch(e){viewTools.console.log(e);}
if(eval_response==true){viewTools.form.setFieldRequirement(handler,true);}else{viewTools.form.setFieldRequirement(handler,false);}}
if(handler.data('readonly')!==undefined){var readonly=viewTools.formula._parseFormula(handler.data('readonly'),handler,'readonly');try{var eval_response=eval(readonly);}catch(e){viewTools.console.log(e);}
if(eval_response==true){viewTools.form.setFieldReadonly(handler,true);}else{viewTools.form.setFieldReadonly(handler,false);}}}},checkFormDuplicates:function(){var ret=true;viewTools.init.field($('.vt_formulaSelector').last());var modulename=viewTools.form.getModuleName($('.vt_formulaSelector').last());if(viewTools.cache.formulaDuplicateFields!==undefined&&modulename!==undefined){if(modulename!==false&&viewTools.cache.formulaDuplicateFields[modulename.toLowerCase()]!==undefined){if(viewTools.cache.ignoreDuplicates===false){viewTools.api.callCustomApi({module:'Home',action:'checkForDuplicates',dataPOST:viewTools.form.getFormValues(),callback:function(response){if(response.duplicate_count>0){viewTools.form.duplicatesTable($('.vt_formulaSelector').last(),response);ret=false;}}});}}}
return ret;},focusOnFirstError:function(){$('.validation-message').first().parent().find('.vt_formulaSelector').focus();},getRecordId:function(handler){if(handler.data('recordid')!==undefined){return handler.data('recordid');}
return false;},getModuleName:function(handler){var module_name='';var form=handler.closest('form');if(form.length==0){form=handler.closest('.detail-view').parent().find('#formDetailView');}
if(form!==undefined){module_name=form.find('input[name="module"]').val();}
return module_name;},save:function(callback){viewTools.cache.form_save=callback;},getDateTimeFormFieldNameBasedOnHandler:function(handler){var date_time_filed_name=handler.attr('id')+'_date'
var elem=handler.closest('form').find('#'+date_time_filed_name);if(elem.length>0){return elem;}else{return false;}},setFieldRequirement:function(handler,isRequired,perm){var form_name=handler.closest('form').attr('name');if(form_name!==undefined&&(isRequired===true||isRequired===false)){date_time_field_name=this.getDateTimeFormFieldNameBasedOnHandler(handler);if(date_time_field_name){selector_on_field_in_form=date_time_field_name;}else{selector_on_field_in_form=handler;}
var exist=_.find(validate[form_name],{0:selector_on_field_in_form.attr('id')});var exist_multiselect=_.find(validate[form_name],{0:selector_on_field_in_form.attr('id')+"[]"});if(exist===undefined&&exist_multiselect===undefined){var obj_to_insert={handler:selector_on_field_in_form};if(perm){obj_to_insert.isRequired=false;if(isRequired===true&&selector_on_field_in_form.is(":visible")){obj_to_insert.isRequired=true;}}
viewTools.cache.requiredsToSetBeforeSave.push(obj_to_insert);}else{var selector_on_field_in_form_index=this.getIndexOfFieldFromValidateArray(form_name,selector_on_field_in_form,handler);if(selector_on_field_in_form_index!==false){this.setRequirementSign(selector_on_field_in_form,false);validate[form_name][selector_on_field_in_form_index][2]=false;if(isRequired===true&&selector_on_field_in_form.is(":visible")){validate[form_name][selector_on_field_in_form_index][2]=true;this.setRequirementSign(selector_on_field_in_form,true);}
if(date_time_field_name){var handler_index=this.getIndexOfFieldFromValidateArray(form_name,handler,handler);if(handler_index!==false){validate[form_name][handler_index][2]=isRequired;validate[form_name][selector_on_field_in_form_index][2]=false;}}}}}
this.setAsteriskForHandler(handler);},getIndexOfFieldFromValidateArray:function(form_name,selector_on_field_in_form,handler){for(var key in validate[form_name]){if((validate[form_name][key][0]==selector_on_field_in_form.attr('id')||validate[form_name][key][0]==selector_on_field_in_form.attr('id')+"[]")&&viewTools.cache.formulaRequirements[handler.data('modulename')]!==undefined){return key;}}
return false;},setAsteriskForHandler:function(handler){var field=$(handler['selector']);if(!field.closest('div.edit-view-field').siblings('.label').hasClass('required')){field.closest('div.edit-view-field').siblings('.label').html(field.closest('div.edit-view-field').siblings('.label').html()+'<span class="required">*</span>');}},setCacheFieldRequirement:function(handler,required){viewTools.cache.formulaRequirements[handler.data('modulename')][handler.attr('id')]=required;},getCacheFieldRequirement:function(handler){if(viewTools.cache.formulaRequirements[handler.data('modulename')][handler.attr('id')]!==undefined){return viewTools.cache.formulaRequirements[handler.data('modulename')][handler.attr('id')];}
return false;},setRequirementSign(handler,required){var label_object=handler.closest(".edit-view-row-item").children(".label");if(required===true){label_object.append("<span class='required'>*</span>");}else{label_object.children("span.required").remove();}},setFieldReadonly:function(handler,is_readonly){var form_name=handler.closest('form').attr('name');if(form_name!==undefined&&(is_readonly===true||is_readonly===false)){this.setFieldReadonlyAttribute(handler,false);if(is_readonly===true){this.setFieldReadonlyAttribute(handler,true);}}},setFieldReadonlyAttribute:function(handler,is_readonly){var tag_name=handler.prop("tagName").toLowerCase();var id=handler.prop("id");var css_pointer_events='auto';var text_bg_color='#d8f5ee';var select_bg_color='#ffffff';var text_select_border='1px solid #a5e8d6';var checkbox_border='none';if(is_readonly){css_pointer_events='none';text_bg_color='#f8f8f8';select_bg_color='#f8f8f8';text_select_border='1px solid #e2e7eb';checkbox_border='1px solid #e2e7eb';}
if(tag_name==='select'){handler.css({'background-color':select_bg_color,'border':text_select_border,'pointer-events':css_pointer_events});}else if($.inArray(tag_name,['input','textarea'])>-1){var field_type=handler.prop("type");if(field_type==='checkbox'){handler.css({'border':checkbox_border,'pointer-events':css_pointer_events});}else if($.inArray(field_type,['text','password','textarea','hidden'])>-1){handler.prop('readonly',is_readonly);handler.css({'background-color':text_bg_color,'border':text_select_border});var buttons_span=handler.parent().find("span.id-ff.multiple");if(buttons_span.length){buttons_span.children('button').prop('disabled',is_readonly);}
if(id==="parent_name"){var parent_type=$("#parent_type");if(parent_type.length){this.setFieldReadonlyAttribute(parent_type,is_readonly);}}
var date_field=$("#"+id+"_date");if(date_field.length){this.setFieldReadonlyAttribute(date_field,is_readonly);}
var date_trigger=$("#"+id+"_trigger");if(date_trigger.length){date_trigger.css('pointer-events',css_pointer_events);}
var date_hours=$("#"+id+"_hours");if(date_hours.length){this.setFieldReadonlyAttribute(date_hours,is_readonly);}
var date_minutes=$("#"+id+"_minutes");if(date_minutes.length){this.setFieldReadonlyAttribute(date_minutes,is_readonly);}}}},setValue:function(handler,value){if(!handler.hasClass('vt_Locked')&&value!==undefined&&handler.attr('type')!=='checkbox'){handler.val(value);handler.parent().find('input[type=hidden]').each(function(){if($(this).attr('id')!==handler.attr('id')){$(this).val('');}});if(handler.hasClass('vt_Readonly')){handler.parent().find('span.sugar_field').each(function(){$(this).html(value);});}}},lockField:function(handler){if(!handler.hasClass('vt_Locked')){handler.addClass('vt_Locked');}},unlockField:function(handler){handler.removeClass('vt_Locked');},function:{set_return:function(popup_reply_data){set_return(popup_reply_data);for(field_name in popup_reply_data.name_to_value_array){$('#'+field_name).each(function(){$(this).blur();});}}},getFieldMappings:function(module_name,field_id){if(viewTools.cache.initMappings!==undefined&&viewTools.cache.initMappings[module_name]!==undefined){if(viewTools.cache.initMappings[module_name][field_id]!==undefined){return viewTools.cache.initMappings[module_name][field_id];}}
return false;},duplicatesTable:function(handler,response){$('#vt_duplicate_message').html('');var editform=handler.closest('form').parent();if(handler.closest('form').hasClass('vt_CalendarEditView')){editform=handler.closest('form').parent().parent();$('div#cal-edit-buttons').fadeOut(300);}
editform.fadeOut(300,function(){var table='';var header='';for(label in response.duplicate_labels){if(response.duplicate_labels[label]!=null){header=header+'<td>'+response.duplicate_labels[label]+'</td>';}}
table=table+'<tr>'+header+'</tr>';for(row in response.duplicate_positions){var tr='';for(field in response.duplicate_positions[row]){if(field!='id'){var tmpVal=response.duplicate_positions[row][field];if(field=='name'){tmpVal='<a target="_blank" href="">'+tmpVal+'</a>';}
tr=tr+'<td>'+tmpVal+'</td>';}}
table=table+'<tr class="oddListRowS1">'+tr+'</tr>';}
var buttons='';buttons=buttons+'<button class="button vt_duplicate_btnignore">'+viewTools.language.get('app_strings','LBL_SAVE_BUTTON_TITLE')+'</button>';buttons=buttons+'<button class="button vt_duplicate_btnback">'+viewTools.language.get('app_strings','LBL_CANCEL_BUTTON_TITLE')+'</button>';$('#vt_duplicate_message').append(viewTools.language.get('app_strings','LBL_VIEWTOOLS_FOUNDDUPLICATE')+'<table class="list view footable-loaded footable">'+table+'</table>'+buttons);$('#vt_duplicate_message').fadeIn(300);});},getFormValues:function(){var first_field=$('form .vt_formulaSelector').last();viewTools.init.field(first_field);var field_values={};$('input[type=hidden][id$=_oldvalue]').each(function(){var tmp_field_name=$(this).attr('id');tmp_field_name=tmp_field_name.substr(0,(tmp_field_name.length-9));var tmp_val=$(this).val();if(tmp_val=="null"){tmp_val='';}
field_values['vt_'+tmp_field_name]=tmp_val;});$('.vt_formulaSelector').each(function(){var tmp_val=viewTools.formula.valueOf($(this));var tmp_field_name=$(this).attr('id');if(tmp_field_name=="currency_id_select"){tmp_field_name="currency_id";}
field_values['vt_'+tmp_field_name]=tmp_val;});field_values.modulename=viewTools.form.getModuleName(first_field);field_values.recordid=viewTools.form.getRecordId(first_field);return field_values;},fieldChangeEvent:function(input){var field_id=$(input).attr('id');this.blur($(input));var form_id=input.closest('form').id;var fieldMappings=this.getFieldMappings($(input).data('modulename'),$(input).attr('id'));if(fieldMappings!==false&&fieldMappings!==undefined){for(var key in fieldMappings){var _this=this;$('#'+form_id+' #'+fieldMappings[key]).each(function(){if($(this).attr('id')!==field_id){_this.fieldChangeEvent($(this));}});}}}};window.viewTools.GUI={fieldErrorMark:function(handler,description,callBackFunction){add_error_style(handler.closest('form').attr('name'),handler.attr('id'),description);if(callBackFunction!==undefined){callBackFunction();}},fieldErrorUnmark:function(){$('div.validation-message').each(function(){$(this).remove();});},fieldErrorFormulaMark:function(handler,formulaType){var errorMessage='';if(handler.data(formulaType+'_message')!==undefined){var tmpMessages=viewTools.language.get(viewTools.form.getModuleName(handler),handler.data(formulaType+'_message'));if(tmpMessages=='undefined'){tmpMessages=handler.data(formulaType+'_message');}
tmpMessages=tmpMessages.split(" ");errorMessage='';for(key in tmpMessages){if(tmpMessages[key].charAt(0)=='$'){var fieldLabelHandler=$('#'+tmpMessages[key].slice(1)+'_label');errorMessage=errorMessage+fieldLabelHandler.html()+" ";}else{errorMessage=errorMessage+tmpMessages[key]+" ";}}}else{var field_name="";try{var fieldLabelHandler=$('[field='+handler.attr('id')+']').parent().find('.label')[0];field_name=$(fieldLabelHandler).text().replace(/(\r\n|\n|\r|\*|:)/gm,"");}catch(e){viewTools.console.log(e);}
errorMessage=viewTools.language.get('app_strings','LBL_VIEWTOOLS_FIELDERROR')+(field_name?" \""+field_name+"\"":"");}
window.viewTools.GUI.fieldErrorMark(handler,errorMessage);},onAppear:function(handler,callback){viewTools.cache.onAppear.push({'handler':handler,'callback':callback});},showField:function(handler){this._rowItemVisibility(handler,'show');if(viewTools.form.getCacheFieldRequirement(handler)===true){viewTools.form.setFieldRequirement(handler,true);}},hideField:function(handler){viewTools.form.setFieldRequirement(handler,false);var deleteValues=handler;if(handler.hasClass('DateTimeCombo')){deleteValues=handler.parent().find('.vt_formulaSelector,.datetimecombo_time');}
else if(handler.hasClass('vt_File')){deleteValues=handler.parent().find('#'+handler.attr('id')+'_file,#'+handler.attr('id'));}
else if(handler.hasClass('vt_Readonly')){handler.closest('.sugar_field').html('');}
this._rowItemVisibility(handler,'hide');deleteValues.each(function(){if($(this).attr('type')=='checkbox'){$(this).attr('checked',false);}else{$(this).val('');}});},_rowItemVisibility:function(handler,method){if(handler.closest('form').get(0).id==="ConvertLead"){var edit_elements=handler.closest('.edit-view-field').parent();}else{var edit_elements=handler.closest('.edit-view-row-item');}
if(method==='hide'){edit_elements.hide();handler.closest('.detail-view-row-item').hide();}else if(method==='show'){edit_elements.show();handler.closest('.detail-view-row-item').show();}},setCountOfSubpanel:function(subpanel_name,count,limited_count){if(typeof count!=='undefined'){var subpanel=$('#whole_subpanel_'+subpanel_name);var title_span=subpanel.find('span.subpanel_title');var counter=title_span.find('span.counter');if(count>0){if(typeof limited_count!=='undefined'&&count>10){count="10+";}
if(counter.length>0){counter.html('('+count+')');}else{var html=title_span.html();title_span.html(html+' <span class="counter">('+count+')</span>');}
$('#subpanel_title_'+subpanel_name).addClass('subpanel-has-records');}else{if(counter.length>0){counter.remove();}
$('#subpanel_title_'+subpanel_name).removeClass('subpanel-has-records');}}},statusBox:{showStatus:function(message,type,miliseconds){this.initView();this.setCss(type);this.setMessage(message);this.show();this.setCloseTime(miliseconds);},initView:function(){if($("#viewToolsToolTipDiv").length==0){this.addDiv();}},setCss:function(type){this.removeClassesFromDiv();this.setClassForDiv(type);},addDiv:function(){$('body').append("<div id='viewToolsToolTipDiv' style='display:none;' class='viewTools-tooltip-alert' ><div id='viewToolsToolTipMsg' class='viewTools-tooltip-msg'></div></div>");},setMessage:function(message){if(typeof message!=='undefined'){$('#viewToolsToolTipMsg').html(message);}},show:function(){$('#viewToolsToolTipDiv').fadeIn(150);},hideStatus:function(){$('#viewToolsToolTipDiv').fadeOut(150);},getColorClass:function(type){var class_name='viewTools-tooltip-info-box';if(typeof type!=='undefined'){class_name='viewTools-tooltip-'+type+'-box';}
return class_name;},removeClassesFromDiv:function(){$('#viewToolsToolTipDiv').removeClass('viewTools-tooltip-info-box viewTools-tooltip-success-box viewTools-tooltip-error-box viewTools-tooltip-notice-box');},setClassForDiv:function(type){var color_class=this.getColorClass(type);$('#viewToolsToolTipDiv').addClass(color_class);},setCloseTime:function(miliseconds){if(typeof miliseconds!=='undefined'){setTimeout(this.hideStatus,miliseconds);}}}};window.viewTools.date={get:function(dateString,date_time_format){if(date_time_format===undefined){date_time_format=viewTools.date.getDateTimeFormat();}else{date_time_format=viewTools.date.getDateTimeFormat(date_time_format);}
return moment(dateString,date_time_format);},getDateFormat:function(date_format){if(date_format===undefined||date_format==''){if(viewTools.cache.InitialParams.dateFormat===undefined){viewTools.init.getDateTimeFormat();}
date_format=viewTools.cache.InitialParams.dateFormat;}
return date_format.replace(/Y/gi,'YYYY').replace(/m/gi,'MM').replace(/d/gi,'DD');},getTimeFormat:function(time_format){if(time_format===undefined||time_format==''){if(viewTools.cache.InitialParams.timeFormat===undefined){viewTools.init.getDateTimeFormat();}
time_format=viewTools.cache.InitialParams.timeFormat;}
return time_format.replace(/i/gi,'mm').replace(/H/g,'HH').replace(/h/g,'hh');},getDateTimeFormat:function(date_time_format){if(date_time_format===undefined||date_time_format==''){date_time_format=viewTools.date.getDateFormat()+' '+viewTools.date.getTimeFormat();}else{date_time_format=viewTools.date.getDateFormat(date_time_format);date_time_format=viewTools.date.getTimeFormat(date_time_format);}
return date_time_format;},};window.viewTools.formula={_parseFormula:function(formula,handler,formulatype,formulaid){try{if(formula==1||formula==true||formula==0||formula==false){return formula;}
if(formulaid!==undefined&&typeof formulaid!="number"){formulaid=Number(formulaid);}
var modulename=viewTools.form.getModuleName(handler);var fieldid=handler.attr('id');if(fieldid!==undefined){viewTools.init.field(handler);if(formulatype!=null&&modulename!=false){if(viewTools.cache.formula[modulename]!==undefined){if(viewTools.cache.formula[modulename][fieldid]!==undefined){if(viewTools.cache.formula[modulename][fieldid][formulatype]!==undefined){if(formulaid!==undefined){if(viewTools.cache.formula[modulename][fieldid][formulatype][formulaid]!==undefined){return viewTools.cache.formula[modulename][fieldid][formulatype][formulaid];}}else{return viewTools.cache.formula[modulename][fieldid][formulatype];}}}}}}
if(formula!==undefined&&formula!=''){var duplicate_positions=[];var special_functions=viewTools.cache.serversideFrontend;var index_of=-1;for(f_key in special_functions){while((index_of=formula.indexOf(special_functions[f_key]+'(',index_of+1))!=-1){duplicate_positions[index_of]=special_functions[f_key].length+1;}}
if(duplicate_positions.length>0){var tmpFormula=[];var tmpFormulaSectorCounter=0;var tmpFormulaType='normal';var tmpBracketCounter=0;for(key in formula){var tmpSign=formula[key];for(didx in duplicate_positions){if(parseInt(key)==(parseInt(didx)+duplicate_positions[didx])){tmpFormulaSectorCounter++;tmpFormulaType='unparsed';tmpBracketCounter=1;tmpSign='"'+tmpSign;}}
if(tmpSign=='('){tmpBracketCounter++;}
if(tmpSign==')'&&tmpBracketCounter==1&&tmpFormulaType=='unparsed'){tmpSign='")';}
if(tmpFormula[tmpFormulaSectorCounter]==undefined){tmpFormula[tmpFormulaSectorCounter]={type:tmpFormulaType,string:''};}
tmpFormula[tmpFormulaSectorCounter]['string']=tmpFormula[tmpFormulaSectorCounter]['string']+tmpSign;if(tmpSign==')'||tmpSign=='")'){tmpBracketCounter--;if(tmpBracketCounter<=0){tmpFormulaSectorCounter++;tmpFormulaType='normal';}}}
var formula='';for(key in tmpFormula){if(tmpFormula[key]['type']=='normal'){tmpFormula[key]['string']=viewTools.formula._prepareFormula(tmpFormula[key]['string'],handler);}
formula=formula+tmpFormula[key]['string'];}}else{formula=viewTools.formula._prepareFormula(formula,handler);}
if(formulatype!=null&&fieldid!==undefined){if(viewTools.cache.formula[modulename]===undefined){viewTools.cache.formula[modulename]={};}
if(viewTools.cache.formula[modulename][fieldid]===undefined){viewTools.cache.formula[modulename][fieldid]={};}
if(viewTools.cache.formula[modulename][fieldid][formulatype]===undefined){if(formulaid!==undefined){if(viewTools.cache.formula[modulename][fieldid][formulatype]===undefined){viewTools.cache.formula[modulename][fieldid][formulatype]=[];}
viewTools.cache.formula[modulename][fieldid][formulatype][formulaid]=formula;}else{viewTools.cache.formula[modulename][fieldid][formulatype]=formula;}}else if(formulaid!==undefined){viewTools.cache.formula[modulename][fieldid][formulatype][formulaid]=formula;}}
return formula;}}catch(e){viewTools.console.log(e);}
return false;},_prepareFormula:function(formula,handler){var form_id=handler.closest('form').attr('id');var module_name_based_on_section='';if(form_id==="ConvertLead"){var div_section=handler.closest('div[id^="create"]').get(0);if(div_section!==undefined){var module_name_based_on_section=div_section.id.replace(/create/g,'');}}
return formula.replace(/\s+(?=([^']*'[^']*')*[^']*$)/g,'').replace(/(\w+)\(/g,'viewTools.formula.$1(').replace(/\$(\w+),/g,'viewTools.formula._checkSelector(\'form#'+form_id+' #'+module_name_based_on_section+'$1\'),').replace(/\$(\w+)\)/g,'viewTools.formula._checkSelector(\'form#'+form_id+' #'+module_name_based_on_section+'$1\'))').replace(/^\$(\w+)$/g,'viewTools.formula._checkSelector(\'form#'+form_id+' #'+module_name_based_on_section+'$1\')');},_checkSelector:function(selector){if($(selector).attr('id')!==undefined){return $(selector);}else if($(selector+'_oldvalue').attr('id')!==undefined){return $(selector+'_oldvalue');}
return false;},valueOf:function(obj){try{if(typeof obj==='object'&&obj instanceof jQuery){if(obj.get(0).localName==="input"){if(obj.attr('type')==='checkbox'){return obj.prop('checked')?1:0;}else if(obj.attr('type')=='radio'){obj.each(function(ob){if($(obj[ob]).prop('checked')){obj=$(obj[ob]);}});}else if(obj.parent().attr('type')=='currency'){return unformatNumber(obj.val(),num_grp_sep,dec_sep);}}
obj=obj.val();}
return obj;}catch(e){viewTools.console.log(e);}
return false;},_evalFunction:function(handler,formulaType){if(formulaType!==undefined){var validationMetadata=eval('viewTools.formulaParser.'+handler.data(formulaType+'_name'));var validationParams={};if(validationMetadata!==undefined){for(key in validationMetadata.params){if(handler.data(formulaType+'_'+key)===undefined&&validationMetadata.params[key].value!==undefined){validationParams[validationMetadata.params[key].order]=validationMetadata.params[key].value;}else{validationParams[validationMetadata.params[key].order]=viewTools.formula._parseFormula(String(handler.data(formulaType+'_'+key)));}}
var validationFormula='';for(key in validationParams){if(validationFormula!=''){validationFormula+=',';}
validationFormula=validationFormula+validationParams[key];}
validationFormula='viewTools.formula.'+validationMetadata.formulaName+'('+validationFormula+')';return eval(validationFormula);}}}};window.viewTools.init={getRecordValues:function(handler){var form=handler.closest('form');if(form.find('input[id$="_oldvalue"],textarea[id$="_oldvalue"]').first().attr('id')===undefined){viewTools.api.callCustomApi({module:'Home',action:'getRecordValues',dataPOST:{module_name:handler.data('modulename'),record_id:handler.data('recordid')},callback:function(data){for(fieldid in data){if($('#'+fieldid+'_oldvalue').attr('id')===undefined){handler.closest('form').prepend('<input type="hidden" id="'+fieldid+'_oldvalue" name="'+fieldid+'_oldvalue" value="'+data[fieldid]+'">');}}}});}},getDateTimeFormat:function(){if(viewTools.cache.InitialParams.dateFormat===undefined||viewTools.cache.InitialParams.timeFormat===undefined){viewTools.api.callCustomApi({module:'Home',action:'getDateTimeFormat',callback:function(data){if(data.dateFormat!==undefined&&viewTools.cache.InitialParams.dateFormat===undefined){viewTools.cache.InitialParams.dateFormat=data.dateFormat;}
if(data.timeFormat!==undefined&&viewTools.cache.InitialParams.timeFormat===undefined){viewTools.cache.InitialParams.timeFormat=data.timeFormat;}}});}},field:function(handler){var ret=true;if(handler.data('recordid')===undefined){var record_id=handler.closest('form').find('input[type=hidden][name=record]').val();if(record_id!==undefined){handler.data('recordid',record_id);}else{ret=false;}}
if(handler.data('modulename')===undefined){var modulename=handler.closest('form').find('input[type=hidden][name=module]').val();if(modulename===undefined){var modulename=handler.closest('form').find('input[type=hidden][name=current_module]').val();}
if(modulename!==undefined){handler.data('modulename',modulename.toLowerCase());if(handler.closest('form').data('modulename')===undefined){handler.closest('form').data('modulename',modulename.toLowerCase());if(handler.closest('form').hasClass('vt_CalendarEditView')){handler.closest('form').parent().parent().after('<div id="vt_duplicate_message" style="display:none;"></div>');}else{handler.closest('form').parent().after('<div id="vt_duplicate_message" style="display:none;"></div>');}}
if(ret!==false&&record_id!==""){viewTools.init.getRecordValues(handler);}}else{ret=false;}}
return ret;},validation:{checkForm:function(callback){var ret=true;$('.vt_formulaSelector').each(function(){if($(this).data('validation_name')!==undefined){if(viewTools.formula._evalFunction($(this),'validation')==false){viewTools.GUI.fieldErrorFormulaMark($(this),'validation');ret=false;}else{window.viewTools.GUI.fieldErrorUnmark($(this));}}else if($(this).data('validation')!==undefined){var validation_array=$(this).data('validation').split(';');for(var validation_idx in validation_array){formula=viewTools.formula._parseFormula(validation_array[validation_idx]);if(eval(formula)==false){viewTools.GUI.fieldErrorFormulaMark($(this),'validation');ret=false;}}}});if(ret!==false){window.viewTools.GUI.fieldErrorUnmark($(this));return callback();}
return false;}},};window.viewTools.language={get:function(module,label){if(typeof SUGAR.language.languages[module]=="undefined"){viewTools.api.callCustomApi({module:'Home',action:'getLanguage',dataPOST:{"target_module":module},async:false,callback:function(response){if(typeof response=="object"){SUGAR.language.setLanguage(module,response);}else{viewTools.console.log("viewTools is not able to get labels for "+module);}}});}
return SUGAR.language.get(module,label);}};if(viewTools.cache===undefined){viewTools.cache={enforceFields:{},formula:{},fieldRequirements:{},recordValues:{},formulaRequirements:{},InitialParams:{},serversideFrontend:[],form_beforeSave:[],form_beforeSave_enforced:[],form_afterSave:[],save_action:[],ignoreDuplicates:false,onAppear:[],requiredsToSetBeforeSave:[],};}/* End of File /include/ViewTools/javascript/viewTools.js */


window.viewTools.cache.serversideFrontend=["callCustomApi","duplicate","isSuperior","isUnique","isUserAdmin","isUserInRole","related"];window.viewTools.formulaParser={validateREGON:{formulaName:'validateREGON',params:{regon:{order:1},}},}
window.viewTools.formula.AEM=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["formula","errorMessage"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var ret=arguments['formula'];var error_message='';if(ret==false||ret=='false'){var alert_msg=viewTools.language.get(window.viewTools.form.getModuleName($('form .vt_formulaSelector').last()),arguments['errorMessage']);if(alert_msg!='undefined'&&alert_msg!=''){error_message=alert_msg;}
else{alert_msg=viewTools.language.get('app_strings',arguments['errorMessage']);if(alert_msg!='undefined'&&alert_msg!=''){error_message=alert_msg;}
else if(arguments['errorMessage']!='undefined'&&arguments['errorMessage']!=''){error_message=arguments['errorMessage'];}}
if(error_message!=''){window.viewTools.cache.AEM.push(error_message);}}
return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.abs=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["param"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;arguments['param']=unformatNumber(arguments['param'],num_grp_sep,dec_sep);if(arguments['param']==""||isNaN(arguments['param'])){return false;}
return formatNumber(Math.abs(arguments['param']),num_grp_sep,dec_sep);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.add=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var result=0.0;for(key in arguments){arguments[key]=unformatNumber(arguments[key],num_grp_sep,dec_sep);if(arguments[key]===""||isNaN(arguments[key])){return false;}
result+=parseFloat(arguments[key]);}
return formatNumber(result,num_grp_sep,dec_sep);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.addDays=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["date","days"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var tmpDate=moment(arguments['date'],viewTools.date.getDateFormat());tmpDate.add('days',arguments['days']);return(tmpDate.format(viewTools.date.getDateFormat()));}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.and=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
for(key in arguments){var andCheckValue=arguments[key];if(andCheckValue!==true&&andCheckValue!=='true'){return false;}}
return true;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.arrayEquals=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var first_array=arguments[0];var second_array=[];for(var i=1;i<arguments.length;i++){second_array.push(arguments[i]);}
var is_diff=false;if(Array.isArray(first_array)&&Array.isArray(second_array)){first_array.forEach(function(a){if($.inArray(a,second_array)<0){is_diff=true;}});if(!is_diff){second_array.forEach(function(a){if($.inArray(a,first_array)<0){is_diff=true;}});}}else{is_diff=true;}
return!is_diff;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.callCustomApi=function(){try{var values=viewTools.form.getFormValues();values['eval_formula']=arguments[0];values['formula_name']='callCustomApi';if($('#ConvertLead').length>0){var submodule='';var elem=$('[data-validation*="'+arguments[0]+'"], [data-required*="'+arguments[0]+'"], [data-readonly*="'+arguments[0]+'"], [data-calculated*="'+arguments[0]+'"], [data-dependency*="'+arguments[0]+'"]');var module_elem=elem.closest('div[id^="create"]');if(!module_elem.length){module_elem=elem.parent();var elem_id=module_elem.attr('id');if(typeof elem_id==='string'&&elem_id.indexOf('select')===0){submodule=elem_id.replace('select','');}}else{submodule=module_elem.attr('id').replace('create','');}
values['convert_lead']=true;values['convert_lead_module']=submodule;}
var ret=false;viewTools.api.callCustomApi({module:'Home',action:'evalServersideFrontend',dataPOST:values,callback:function(response){if(response!==undefined){ret=response;}
else{ret=false;}}});return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.charAt=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["string","charpos"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;if(!$.isNumeric(arguments['charpos'])){return'';}
var charAtPos=String(arguments['string']).charAt(parseInt(arguments['charpos'])-1);if(charAtPos!==undefined){return charAtPos;}
return'';}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.concat=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var ret='';for(key in arguments){var tmpValue=arguments[key];if(tmpValue!==undefined){ret=ret+tmpValue;}}
return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.contains=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["string","substring"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;if(arguments['string'].indexOf(arguments['substring'])>=0){return true;}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.divide=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["mixed_1","mixed_2"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;arguments['mixed_1']=unformatNumber(arguments['mixed_1'],num_grp_sep,dec_sep);arguments['mixed_2']=unformatNumber(arguments['mixed_2'],num_grp_sep,dec_sep);if(arguments['mixed_1']==""||isNaN(arguments['mixed_1'])||arguments['mixed_2']==""||isNaN(arguments['mixed_2']||arguments['mixed_2']==0)){return false;}
return formatNumber((parseFloat(arguments['mixed_1'])/ parseFloat(arguments['mixed_2'])),num_grp_sep,dec_sep);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.duplicate=function(){try{var values=viewTools.form.getFormValues();values['eval_formula']=arguments[0];values['formula_name']='duplicate';if($('#ConvertLead').length>0){var submodule='';var elem=$('[data-validation*="'+arguments[0]+'"], [data-required*="'+arguments[0]+'"], [data-readonly*="'+arguments[0]+'"], [data-calculated*="'+arguments[0]+'"], [data-dependency*="'+arguments[0]+'"]');var module_elem=elem.closest('div[id^="create"]');if(!module_elem.length){module_elem=elem.parent();var elem_id=module_elem.attr('id');if(typeof elem_id==='string'&&elem_id.indexOf('select')===0){submodule=elem_id.replace('select','');}}else{submodule=module_elem.attr('id').replace('create','');}
values['convert_lead']=true;values['convert_lead_module']=submodule;}
var ret=false;viewTools.api.callCustomApi({module:'Home',action:'evalServersideFrontend',dataPOST:values,callback:function(response){if(response!==undefined){ret=response;}
else{ret=false;}}});return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.empty=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["mixed"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;return _.isEmpty(arguments['mixed']);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.equals=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["param1","param2"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;if((arguments['param2']===''&&trim(arguments['param1']).length>0)||(arguments['param1']===''&&trim(arguments['param2']).length>0)){return false;}
if(arguments['param1']==arguments['param2']){return true;}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.floor=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["value"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;arguments['value']=unformatNumber(arguments['value'],num_grp_sep,dec_sep);if(arguments['value']==""||isNaN(arguments['value'])){return false;}
return formatNumber(Math.floor(arguments['value']),num_grp_sep,dec_sep);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.formatDate=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["date_string","date_format"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var date=viewTools.date.get(arguments['date_string'],arguments['date_format']);return date.format(viewTools.date.getDateFormat());}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.formatDateTime=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["date_string","date_format"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var date=viewTools.date.get(arguments['date_string'],arguments['date_format']);return date.format(viewTools.date.getDateTimeFormat());}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.getLabelsForEnum=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["field","app_list_strings"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var lang=SUGAR.language.languages['app_list_strings'][arguments['app_list_strings']];var return_array=[];if(typeof arguments['field']==="string"){return_array.push(lang[arguments['field']]);}else{for(var i=0;i<arguments['field'].length;i++){return_array.push(lang[arguments['field'][i]]);}}
return return_array;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.getTranslatedLabelsForEnum=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["field","app_list_strings","language_key"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var list=SUGAR.language.languages['app_list_strings'][arguments['app_list_strings']];var return_array=[];if(typeof arguments['field']==="string"){return_array.push(list[arguments['field']]);}else{for(var i=0;i<arguments['field'].length;i++){return_array.push(list[arguments['field'][i]]);}}
return return_array;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.greaterThan=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["param1","param2"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;arguments['param1']=unformatNumber(arguments['param1'],num_grp_sep,dec_sep);arguments['param2']=unformatNumber(arguments['param2'],num_grp_sep,dec_sep);if(arguments['param1']===""){arguments['param1']=0;}
if(arguments['param2']===""){arguments['param2']=0;}
if(arguments['param1']===""||isNaN(arguments['param1'])||arguments['param2']===""||isNaN(arguments['param2'])){return false;}
if(parseFloat(arguments['param1'])>parseFloat(arguments['param2'])){return true;}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.ifElse=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["condition","if_true","if_false"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;if(arguments['condition']!==undefined&&arguments['if_true']!==undefined){if(arguments['condition']===true||arguments['condition']==='true'){return arguments['if_true'];}
else if(arguments['if_false']!==undefined){return arguments['if_false'];}}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.inArray=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var compareArgument='';var args=[].slice.call(arguments);if(Array.isArray(args[1])){$.map(args[1],function(val,i){args.push(val);});args.splice(1,1);}
for(var i=0;i<=args.length;i++){if(i==0){compareArgument=args[i];}
else{if(compareArgument==args[i]){return true;}}}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.isAfter=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["date1","date2"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var date1=viewTools.date.get(arguments['date1']);var date2=viewTools.date.get(arguments['date2']);return moment(date1).isAfter(date2);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.isNumeric=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["value"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;if(dec_sep=="."){dec_sep_reg=/\./g;}else{dec_sep_reg=dec_sep;}
if(num_grp_sep=="."){num_grp_sep_reg=/\./g;}else{num_grp_sep_reg=num_grp_sep;}
var dec_regex=new RegExp(dec_sep_reg,'g');var num_regex=new RegExp(num_grp_sep_reg,'g');var value=arguments['value'].toString().trim();var replaced_value=value.replace(num_regex,'').replace(dec_regex,'.');if(replaced_value!=""&&!isNaN(replaced_value)){if(value.indexOf(dec_sep)!=-1){var split_value=value.split(dec_sep);if(split_value[1].indexOf(num_grp_sep)!=-1){return false;}}
if(dec_sep!="."&&num_grp_sep!="."&&value.indexOf(".")!=-1){return false;}
return true;}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.isSuperior=function(){try{var values=viewTools.form.getFormValues();values['eval_formula']=arguments[0];values['formula_name']='isSuperior';if($('#ConvertLead').length>0){var submodule='';var elem=$('[data-validation*="'+arguments[0]+'"], [data-required*="'+arguments[0]+'"], [data-readonly*="'+arguments[0]+'"], [data-calculated*="'+arguments[0]+'"], [data-dependency*="'+arguments[0]+'"]');var module_elem=elem.closest('div[id^="create"]');if(!module_elem.length){module_elem=elem.parent();var elem_id=module_elem.attr('id');if(typeof elem_id==='string'&&elem_id.indexOf('select')===0){submodule=elem_id.replace('select','');}}else{submodule=module_elem.attr('id').replace('create','');}
values['convert_lead']=true;values['convert_lead_module']=submodule;}
var ret=false;viewTools.api.callCustomApi({module:'Home',action:'evalServersideFrontend',dataPOST:values,callback:function(response){if(response!==undefined){ret=response;}
else{ret=false;}}});return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.isUnique=function(){try{var values=viewTools.form.getFormValues();values['eval_formula']=arguments[0];values['formula_name']='isUnique';if($('#ConvertLead').length>0){var submodule='';var elem=$('[data-validation*="'+arguments[0]+'"], [data-required*="'+arguments[0]+'"], [data-readonly*="'+arguments[0]+'"], [data-calculated*="'+arguments[0]+'"], [data-dependency*="'+arguments[0]+'"]');var module_elem=elem.closest('div[id^="create"]');if(!module_elem.length){module_elem=elem.parent();var elem_id=module_elem.attr('id');if(typeof elem_id==='string'&&elem_id.indexOf('select')===0){submodule=elem_id.replace('select','');}}else{submodule=module_elem.attr('id').replace('create','');}
values['convert_lead']=true;values['convert_lead_module']=submodule;}
var ret=false;viewTools.api.callCustomApi({module:'Home',action:'evalServersideFrontend',dataPOST:values,callback:function(response){if(response!==undefined){ret=response;}
else{ret=false;}}});return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.isUserAdmin=function(){try{var values=viewTools.form.getFormValues();values['eval_formula']=arguments[0];values['formula_name']='isUserAdmin';if($('#ConvertLead').length>0){var submodule='';var elem=$('[data-validation*="'+arguments[0]+'"], [data-required*="'+arguments[0]+'"], [data-readonly*="'+arguments[0]+'"], [data-calculated*="'+arguments[0]+'"], [data-dependency*="'+arguments[0]+'"]');var module_elem=elem.closest('div[id^="create"]');if(!module_elem.length){module_elem=elem.parent();var elem_id=module_elem.attr('id');if(typeof elem_id==='string'&&elem_id.indexOf('select')===0){submodule=elem_id.replace('select','');}}else{submodule=module_elem.attr('id').replace('create','');}
values['convert_lead']=true;values['convert_lead_module']=submodule;}
var ret=false;viewTools.api.callCustomApi({module:'Home',action:'evalServersideFrontend',dataPOST:values,callback:function(response){if(response!==undefined){ret=response;}
else{ret=false;}}});return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.isUserInRole=function(){try{var values=viewTools.form.getFormValues();values['eval_formula']=arguments[0];values['formula_name']='isUserInRole';if($('#ConvertLead').length>0){var submodule='';var elem=$('[data-validation*="'+arguments[0]+'"], [data-required*="'+arguments[0]+'"], [data-readonly*="'+arguments[0]+'"], [data-calculated*="'+arguments[0]+'"], [data-dependency*="'+arguments[0]+'"]');var module_elem=elem.closest('div[id^="create"]');if(!module_elem.length){module_elem=elem.parent();var elem_id=module_elem.attr('id');if(typeof elem_id==='string'&&elem_id.indexOf('select')===0){submodule=elem_id.replace('select','');}}else{submodule=module_elem.attr('id').replace('create','');}
values['convert_lead']=true;values['convert_lead_module']=submodule;}
var ret=false;viewTools.api.callCustomApi({module:'Home',action:'evalServersideFrontend',dataPOST:values,callback:function(response){if(response!==undefined){ret=response;}
else{ret=false;}}});return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.multiply=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var result=1.0;for(key in arguments){arguments[key]=unformatNumber(arguments[key],num_grp_sep,dec_sep);if(arguments[key]===""||isNaN(arguments[key])){return false;}
result*=parseFloat(arguments[key]);}
return formatNumber(result,num_grp_sep,dec_sep);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.not=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["value"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;if(arguments['value']!==true&&arguments['value']!=='true'){return true;}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.or=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
for(key in arguments){var andCheckValue=viewTools.formula.valueOf(arguments[key]);if(andCheckValue===true||andCheckValue==='true'){return true;}}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.related=function(){try{var values=viewTools.form.getFormValues();values['eval_formula']=arguments[0];values['formula_name']='related';if($('#ConvertLead').length>0){var submodule='';var elem=$('[data-validation*="'+arguments[0]+'"], [data-required*="'+arguments[0]+'"], [data-readonly*="'+arguments[0]+'"], [data-calculated*="'+arguments[0]+'"], [data-dependency*="'+arguments[0]+'"]');var module_elem=elem.closest('div[id^="create"]');if(!module_elem.length){module_elem=elem.parent();var elem_id=module_elem.attr('id');if(typeof elem_id==='string'&&elem_id.indexOf('select')===0){submodule=elem_id.replace('select','');}}else{submodule=module_elem.attr('id').replace('create','');}
values['convert_lead']=true;values['convert_lead_module']=submodule;}
var ret=false;viewTools.api.callCustomApi({module:'Home',action:'evalServersideFrontend',dataPOST:values,callback:function(response){if(response!==undefined){ret=response;}
else{ret=false;}}});return ret;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.strToLower=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["string"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;return arguments['string'].toLowerCase();}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.strToUpper=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["string"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;return arguments['string'].toUpperCase();}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.strlen=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["string"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;if(typeof arguments['string']!=='string'){return'';}
var result=arguments['string'].length;if(typeof result!=='undefined'){return result;}
return'';}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.subStr=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["string","from","len"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;arguments['from']=unformatNumber(arguments['from'],num_grp_sep,dec_sep);arguments['len']=unformatNumber(arguments['len'],num_grp_sep,dec_sep);if(arguments['from']==""||isNaN(arguments['from'])||arguments['len']==""||isNaN(arguments['len'])){return'';}
return arguments['string'].substr((arguments['from']-1),arguments['len']);}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.validateNIP=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["nip"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var nip=arguments['nip'];nip=nip.replace(/\D/g,'');if(nip.length==10){var nip_array=nip.split("");var weight_array=['6','5','7','2','3','4','5','6','7'];var checksum=0;for(i=0;i<9;i++){checksum+=nip_array[i]*weight_array[i];}
checksum=checksum%11;checksum=checksum%10;return(checksum==nip_array[9]);}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.validatePESEL=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["pesel"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var pesel=arguments['pesel'];pesel=pesel.replace(/\D/g,'');if(pesel.length==11){var pesel_array=pesel.split("");var weight_array=['1','3','7','9','1','3','7','9','1','3'];var checksum=0;for(i=0;i<10;i++){checksum+=pesel_array[i]*weight_array[i];}
checksum=checksum%10;checksum=(checksum==0?0:10-checksum);return(checksum==pesel_array[10]);}
return false;}catch(e){viewTools.console.log(e);return false;}}
window.viewTools.formula.validateREGON=function(){try{for(key in arguments){arguments[key]=viewTools.formula.valueOf(arguments[key]);}
var tmpArgumentsKeys=["regon"];var tmpArguments=[];var x=0;for(key in tmpArgumentsKeys){if(arguments[x]!==undefined){tmpArguments[tmpArgumentsKeys[key]]=(typeof arguments[x]=="string")?$.trim(arguments[x]):arguments[x];}
x++;}
arguments=tmpArguments;var regon=arguments['regon'];regon=regon.replace(/\D/g,'');var length=regon.length;if(length==9||length==14){var regon_array=regon.split("");if(length==9){var weight_array=['8','9','2','3','4','5','6','7'];}
else{var weight_array=['2','4','8','5','0','9','7','3','6','1','2','4','8'];}
var checksum=0;for(i=0;i<length-1;i++){checksum+=regon_array[i]*weight_array[i];}
checksum=checksum%11;checksum=checksum%10;return(length==9?checksum==regon_array[8]:checksum==regon_array[13]);}
return false;}catch(e){viewTools.console.log(e);return false;}};window.viewTools.cache.initMappings={"candidatures":{"status":{"reason_for_rejection":"reason_for_rejection","work_start":"work_start","training_date":"training_date"}},"costs":{"type":{"assigned_user_id":"assigned_user_id","accommodation_no":"accommodation_no","type_of_meal":"type_of_meal","delegation_name":"delegation_name","delegation_id":"delegation_id","transportation_name":"transportation_name","transportation_id":"transportation_id"},"id":{"assigned_user_id":"assigned_user_id"},"delegation_id":{"delegation_id":"delegation_id"},"transportation_id":{"transportation_id":"transportation_id"}},"delegations":{"id":{"currency_id":"currency_id"},"currency_id":{"exchange_rate":"exchange_rate"}},"recruitments":{"recruitment_type":{"vacancy":"vacancy"}},"transportations":{"id":{"assigned_user_id":"assigned_user_id"},"type":{"other_transportation":"other_transportation"}},"workschedules":{"type":{"supervisor_acceptance":"supervisor_acceptance","delegation_duration":"delegation_duration","comments":"comments","occasional_leave_type":"occasional_leave_type","delegation_name":"delegation_name"}},"":{"id":{"term_starting_date":"term_starting_date","term_ending_date":"term_ending_date","contract_name":"contract_name"}},"onboardingoffboardingelements":{"kind_of_element":{"user_name":"user_name","securitygroup_unit_name":"securitygroup_unit_name"}},"appraisals":{"type":{"employee_name":"employee_name","candidature_name":"candidature_name"}},"appraisalitems":{"appraisal_name":{"name":"name"},"parent_name":{"name":"name"}},"careerpaths":{"position_to_name":{"name":"name"}},"news":{"news_type":{"publication_date":"publication_date"}},"usersnews":{"news_name":{"name":"name"},"assigned_user_name":{"name":"name"}},"employeecertificates":{"certificate_name":{"name":"name"},"employee_id":{"name":"name"},"candidate_name":{"name":"name"},"employee_name":{"name":"name"}}};window.viewTools.cache.formulaRequirements={"accounts_bugs":{"deleted":false},"accounts_cases":{"deleted":false},"accounts_contacts":{"deleted":false},"accounts_opportunities":{"deleted":false},"calls_contacts":{"deleted":false},"calls_users":{"deleted":false},"calls_leads":{"deleted":false},"cases_bugs":{"deleted":false},"contacts_bugs":{"deleted":false},"contacts_cases":{"deleted":false},"contacts_users":{"deleted":false},"email_addresses":{"id":true,"email_address":true,"email_address_caps":true},"emails_email_addr_rel":{"id":true,"email_id":true,"address_type":true,"email_address_id":true},"email_addr_bean_rel":{"id":true,"email_address_id":true,"bean_id":true,"bean_module":true},"emails_beans":{"deleted":false},"emails_text":{"email_id":true},"folders":{"id":true,"name":true,"parent_folder":false,"assign_to_id":false,"created_by":true,"modified_by":true},"folders_subscriptions":{"id":true,"folder_id":true,"assigned_user_id":true},"folders_rel":{"id":true,"folder_id":true,"polymorphic_module":true,"polymorphic_id":true},"meetings_contacts":{"deleted":false},"meetings_users":{"deleted":false},"meetings_leads":{"deleted":false},"opportunities_contacts":{"deleted":false},"users_password_link":{"id":true,"deleted":false},"outbound_email":{"id":true,"name":true,"type":true,"user_id":true,"mail_sendtype":true,"mail_smtptype":true,"mail_smtpserver":false,"password_change":false,"email_provider_chooser":false,"sent_test_email_btn":false},"address_book":{"assigned_user_id":true,"bean":true,"bean_id":true},"calls_resources":{"deleted":false},"meetings_resources":{"deleted":false},"users_feeds":{"rank":false,"deleted":false},"workschedules_spenttime":{"deleted":true},"projects_bugs":{"deleted":false},"projects_cases":{"deleted":false},"projects_products":{"deleted":false},"projects_accounts":{"deleted":false},"projects_contacts":{"deleted":false},"projects_opportunities":{"deleted":false},"acl_roles_actions":{"access_override":false},"inbound_email_autoreply":{"id":true,"deleted":false,"date_entered":true,"date_modified":true,"autoreplied_to":true,"ie_id":true},"inbound_email_cache_ts":{"id":true,"ie_timestamp":true},"email_cache":{"mbox":true,"subject":false,"fromaddr":false,"toaddr":false,"senddate":false,"message_id":false,"mailsize":true,"imap_uid":true,"msgno":false,"recent":true,"flagged":true,"answered":true,"deleted":false,"seen":true,"draft":true},"users_signatures":{"id":true,"date_entered":true,"date_modified":true,"deleted":false,"name":false},"linked_documents":{"deleted":false},"documents_accounts":{"deleted":true},"documents_contacts":{"deleted":true},"documents_opportunities":{"deleted":true},"documents_cases":{"deleted":true},"documents_bugs":{"deleted":true},"oauth_nonce":{"conskey":true,"nonce":true,"nonce_ts":true},"aok_knowledgebase_categories":{"deleted":true},"am_projecttemplates_project_1_c":{"deleted":true},"am_projecttemplates_contacts_1_c":{"deleted":true},"am_projecttemplates_users_1_c":{"deleted":true},"am_tasktemplates_am_projecttemplates_c":{"deleted":true},"aos_contracts_documents":{"deleted":true},"aos_quotes_os_contracts_c":{"deleted":true},"aos_quotes_aos_invoices_c":{"deleted":true},"aos_quotes_project_c":{"deleted":true},"aow_processed_aow_actions":{"deleted":false},"fp_event_locations_fp_events_1_c":{"deleted":true},"fp_events_contacts_c":{"deleted":true},"fp_events_fp_event_delegates_1_c":{"deleted":true},"fp_events_fp_event_locations_1_c":{"deleted":true},"fp_events_leads_1_c":{"deleted":true},"fp_events_prospects_1_c":{"deleted":true},"jjwg_maps_jjwg_areas_c":{"deleted":true},"jjwg_maps_jjwg_markers_c":{"deleted":true},"project_contacts_1_c":{"deleted":true},"project_users_1_c":{"deleted":true},"securitygroups_acl_roles":{"id":true,"deleted":true},"securitygroups_default":{"id":true,"deleted":true},"securitygroups_records":{"id":true,"deleted":true},"securitygroups_users":{"deleted":true},"surveyquestionoptions_surveyquestionresponses":{"deleted":true},"appraisals_documents":{"deleted":true},"appraisals_meetings":{"deleted":true},"appraisals_roles":{"deleted":true},"benefits_employees":{"deleted":true},"benefits_positions":{"deleted":true},"benefits_roles":{"deleted":true},"calls_candidates":{"deleted":false},"candidates_employees":{"deleted":true},"conclusions_improvements":{"deleted":true},"conclusions_problems":{"deleted":true},"exitinterviews_documents":{"deleted":true},"exitinterviews_meetings":{"deleted":true},"meetings_candidates":{"deleted":false},"onboardingoffboardingelements_offboardingtemplates":{"deleted":true},"onboardingoffboardingelements_onboardingtemplates":{"deleted":true},"securitygroups_positions_leader":{"deleted":true},"securitygroups_positions_membership":{"deleted":true},"positions_documents":{"deleted":true},"responsibilities_activities":{"deleted":true},"responsibilities_positions":{"deleted":true},"responsibilities_roles":{"deleted":true},"roles_employees":{"deleted":true},"certificates_trainings":{"deleted":true},"trainings_documents":{"deleted":true},"trainings_meetings":{"deleted":true},"users_schedulereports":{"deleted":true},"documents_candidates":{"deleted":true},"documents_candidatures":{"deleted":true},"documents_certificates":{"deleted":true},"documents_contracts":{"deleted":true},"documents_delegations":{"deleted":true},"documents_termsofemployment":{"deleted":true},"knowledge_competencies":{"deleted":true},"skills_competencies":{"deleted":true},"attitudes_competencies":{"deleted":true},"appraisals_tokens":{"deleted":true,"status":true},"cases":{"id":true,"name":true,"case_number":true,"account_name":true,"case_attachments_display":false,"case_update_form":false,"update_text":false,"aop_case_updates_threaded":false},"audit":{"id":true,"parent_id":true},"acl_actions":{"id":true,"date_entered":true,"date_modified":true,"modified_user_id":false},"acl_roles":{"id":true,"date_entered":true,"date_modified":true,"modified_user_id":false},"relationships":{"id":true,"relationship_name":true,"lhs_module":true,"lhs_table":true,"lhs_key":true,"rhs_module":true,"rhs_table":true,"rhs_key":true},"leads":{"id":true,"last_name":true,"Contactsid":true,"Contactslast_name":true,"Contactsreports_to_id":false,"Accountsid":true,"Accountsname":true,"Accountsparent_id":false,"Opportunitiesid":true,"Opportunitiesname":true,"Opportunitiesaccount_name":true,"Opportunitiesamount":true,"Opportunitiesdate_closed":true,"Opportunitiessales_stage":true,"Notesid":true,"Notesname":true,"Notesparent_id":false,"Notesportal_flag":true,"Notesdeleted":false,"Callsid":true,"Callsname":true,"Callsduration_hours":true,"Callsdate_start":true,"Callsparent_type":false,"Callsstatus":true,"Callsreminders":false,"Callsreschedule_history":false,"Callsreschedule_count":false,"Meetingsid":true,"Meetingsname":true,"Meetingsduration_hours":true,"Meetingsdate_start":true,"Meetingsreminders":false,"Meetingstype":false,"Meetingsrepeat_pane":false,"Tasksid":true,"Tasksname":true,"Tasksstatus":true,"Tasksparent_type":false,"Taskspriority":true},"bugs":{"id":true,"name":true,"bug_number":true},"campaign_log":{"id":true},"project":{"id":true,"assigned_user_id":false,"name":true,"description":false,"deleted":false,"estimated_start_date":true,"estimated_end_date":true,"override_business_hours":false},"project_task":{"id":true,"project_id":true,"project_task_id":false,"name":true,"status":false,"relationship_type":false,"description":false,"predecessors":false,"duration":true,"actual_duration":false,"percent_complete":false,"parent_task_id":false,"assigned_user_id":false,"milestone_flag":false,"order_number":false,"task_number":false,"estimated_effort":false,"actual_effort":false,"deleted":false,"utilization":false},"campaigns":{"id":true,"name":true,"tracker_key":true,"end_date":true,"status":true,"currency_id":false,"campaign_type":true},"prospect_lists":{"id":true,"deleted":false},"prospects":{"id":true,"last_name":true,"tracker_key":true},"email_marketing":{"id":true,"deleted":false,"date_entered":true,"date_modified":true,"name":true,"from_name":true,"from_addr":true,"date_start":true,"template_id":true,"status":true,"campaign_id":false,"outbound_email_id":false},"campaign_trkrs":{"id":true,"tracker_key":true,"campaign_id":false,"date_entered":true,"date_modified":true,"is_optout":true,"deleted":false},"releases":{"id":true,"deleted":false,"date_entered":true,"date_modified":true,"modified_user_id":false,"name":true},"schedulers":{"id":true,"deleted":false,"date_entered":true,"date_modified":true,"name":true,"job":true,"job_url":false,"job_function":false,"date_time_start":true,"job_interval":true,"adv_interval":false,"time_from":false,"time_to":false,"last_run":false,"status":false,"catch_up":false},"job_queue":{"id":true,"name":true,"deleted":true,"date_entered":true,"date_modified":true,"scheduler_id":false,"execute_time":true,"status":true,"resolution":true,"message":false,"target":true,"data":false,"requeue":false,"retry_count":false,"failure_count":false,"job_delay":false,"client":true,"percent_complete":false},"contacts":{"id":true,"last_name":true,"reports_to_id":false},"accounts":{"id":true,"name":true,"parent_id":false},"opportunities":{"id":true,"name":true,"account_name":true,"amount":true,"date_closed":true,"sales_stage":true},"email_templates":{"id":true,"date_entered":true,"date_modified":true,"name":true,"deleted":false,"text_only":false,"type":false},"notes":{"id":true,"name":true,"parent_id":false,"portal_flag":true,"deleted":false},"calls":{"id":true,"name":true,"duration_hours":true,"date_start":true,"parent_type":false,"status":true,"reminders":false,"reschedule_history":false,"reschedule_count":false},"emails":{"id":true,"name":false,"orphaned":false,"last_synced":false,"flagged":false,"reply_to_status":false},"meetings":{"id":true,"name":true,"duration_hours":true,"date_start":true,"reminders":false,"type":false,"repeat_pane":false},"tasks":{"id":true,"name":true,"status":true,"parent_type":false,"priority":true},"users":{"id":true,"user_name":true,"system_generated_password":true,"pwd_last_changed":false,"last_name":true,"date_entered":true,"date_modified":true,"status":false,"deleted":false,"reports_to_id":false,"email1":false,"email_addresses":false,"email_addresses_primary":false,"business_role":false,"position_name":true},"currencies":{"id":true,"name":true,"symbol":true,"conversion_rate":true,"deleted":false,"date_entered":true,"date_modified":true,"created_by":true},"tracker":{"monitor_id":true},"import_maps":{"id":true,"name":true,"source":true,"enclosure":true,"delimiter":true,"module":true,"has_header":true,"deleted":false,"date_entered":true,"date_modified":true,"is_published":true},"users_last_import":{"id":true,"deleted":false},"config":{"id":true},"upgrade_history":{"id":true,"date_entered":true},"vcals":{"id":true,"deleted":false,"user_id":true},"alerts":{"id":true,"name":true,"reminder_id":false,"alert_type":false},"roles":{"id":true,"date_entered":true,"date_modified":true,"modified_user_id":false},"documents":{"id":true,"document_name":true,"filename":true,"active_date":true,"revision":true},"document_revisions":{"id":true,"document_id":false,"filename":true},"fields_meta_data":{"len":false},"inbound_email":{"id":true,"deleted":false,"date_entered":true,"date_modified":true,"name":false,"status":true,"server_url":true,"email_user":true,"email_password":true,"port":true,"service":true,"mailbox":true,"is_personal":true,"groupfolder_id":false},"saved_search":{"id":true,"deleted":true,"date_entered":true,"date_modified":true},"user_preferences":{"id":true,"deleted":false,"date_entered":true,"date_modified":true,"assigned_user_id":true},"spots":{"id":true,"name":true,"config":true,"type":true,"configurationGUI":false},"aobh_businesshours":{"id":true,"name":true,"opening_hours":false,"closing_hours":false,"open":false,"day":false},"sugarfeed":{"id":true},"eapm":{"id":true,"password":true,"url":true,"application":true,"oauth_token":false,"oauth_secret":false,"validated":false,"note":false},"oauth_consumer":{"id":true,"name":true,"c_key":true,"c_secret":true},"oauth_tokens":{"id":true,"secret":true,"tstate":true,"consumer":true,"token_ts":true,"deleted":true,"callback_url":false},"am_projecttemplates":{"id":true,"name":true,"description":false,"assigned_user_name":false,"status":false,"priority":false,"override_business_hours":false},"am_tasktemplates":{"id":true,"name":true,"status":false,"priority":false,"percent_complete":false,"predecessors":false,"milestone_flag":false,"relationship_type":false,"task_number":false,"order_number":false,"estimated_effort":false,"utilization":false,"duration":true},"favorites":{"id":true,"name":true,"parent_id":false,"parent_type":false},"aok_knowledge_base_categories":{"id":true,"name":true},"aok_knowledgebase":{"id":true,"name":true,"description":false,"status":false,"revision":false,"additional_info":false,"user_id_c":false,"author":true,"user_id1_c":false,"approver":false},"reminders":{"id":true,"name":true,"popup":false,"email":false,"email_sent":false,"timer_popup":true,"timer_email":true,"related_event_module":true,"related_event_module_id":true,"date_willexecute":false},"reminders_invitees":{"id":true,"name":true,"reminder_id":true,"related_invitee_module":true,"related_invitee_module_id":true},"fp_events":{"id":true,"name":true,"duration_hours":true,"date_start":true,"budget":false,"currency_id":false,"invite_templates":false,"decline_redirect":false},"fp_event_locations":{"id":true,"name":true,"address":true,"address_city":true,"address_country":false,"address_postalcode":true,"address_state":false,"capacity":false},"aod_indexevent":{"id":true,"name":true,"error":false,"success":false,"record_module":false},"aod_index":{"id":true,"name":true,"last_optimised":false,"location":false},"aop_case_events":{"id":true,"name":true},"aop_case_updates":{"id":true,"name":true},"aor_reports":{"id":true,"name":true,"report_module":true,"graphs_per_row":true,"field_lines":false,"condition_lines":false},"aor_fields":{"id":true,"name":true,"aor_report_id":false,"field_order":false,"field":false,"display":false,"link":false,"label":false,"field_function":false,"sort_by":false,"format":false,"total":false,"sort_order":false,"group_by":false,"group_order":false,"group_display":false},"aor_charts":{"id":true,"name":true,"type":false,"x_field":false,"y_field":false},"aor_conditions":{"id":true,"name":true,"aor_report_id":false,"condition_order":false,"field":false,"operator":false,"value_type":false,"value":false,"parameter":false},"aor_scheduled_reports":{"id":true,"name":true,"schedule":true,"last_run":false,"status":false,"email_recipients":false,"aor_report_name":true},"aos_contracts":{"id":true,"name":true,"reference_code":false,"start_date":false,"end_date":false,"total_contract_value":false,"currency_id":false,"status":true,"customer_signed_date":false,"company_signed_date":false,"renewal_reminder_date":false,"contract_type":false,"contract_account_id":false,"contract_account":true,"opportunity_id":false,"opportunity":false,"contact_id":false,"contact":false,"call_id":false,"line_items":false,"total_amt":false,"subtotal_amount":false,"discount_amount":false,"tax_amount":false,"shipping_amount":false,"shipping_tax":false,"shipping_tax_amt":false,"total_amount":false},"aos_invoices":{"id":true,"name":true,"billing_account_id":false,"billing_account":false,"billing_contact_id":false,"billing_contact":false,"number":true,"line_items":false,"total_amt":false,"subtotal_amount":false,"discount_amount":false,"tax_amount":false,"shipping_amount":false,"shipping_tax":false,"shipping_tax_amt":false,"total_amount":false,"currency_id":false,"quote_number":false,"quote_date":false,"invoice_date":false,"due_date":false,"status":false,"template_ddown_c":false,"subtotal_tax_amount":false},"aos_pdf_templates":{"id":true,"name":true,"description":false,"type":true,"sample":false,"insert_fields":false,"pdfheader":false,"pdffooter":false,"margin_left":false,"margin_right":false,"margin_top":false,"margin_bottom":false,"margin_header":false,"margin_footer":false,"page_size":false,"orientation":false},"aos_product_categories":{"id":true,"name":true,"is_parent":false},"aos_products":{"id":true,"name":true,"maincode":false,"part_number":false,"category":false,"type":false,"cost":false,"cost_usdollar":false,"currency_id":false,"price":true,"url":false,"contact_id":false,"contact":false,"aos_product_category_name":false},"aos_products_quotes":{"id":true,"name":true,"currency_id":false,"part_number":false,"number":false,"product_qty":false,"product_cost_price":false,"product_list_price":false,"product_discount":false,"product_discount_amount":false,"discount":false,"product_unit_price":true,"vat_amt":true,"product_total_price":true,"vat":false,"parent_name":false,"parent_type":false,"parent_id":false,"product_id":false,"group_id":false},"aos_line_item_groups":{"id":true,"name":false,"total_amt":false,"discount_amount":false,"subtotal_amount":false,"tax_amount":false,"subtotal_tax_amount":false,"total_amount":false,"parent_name":false,"parent_type":false,"parent_id":false,"number":false,"currency_id":false},"aos_quotes":{"id":true,"name":true,"approval_issue":false,"billing_account_id":false,"billing_account":false,"billing_contact_id":false,"billing_contact":false,"expiration":true,"opportunity_id":false,"opportunity":false,"template_ddown_c":false,"line_items":false,"total_amt":false,"subtotal_amount":false,"discount_amount":false,"tax_amount":false,"shipping_amount":false,"shipping_tax":false,"shipping_tax_amt":false,"total_amount":false,"currency_id":false,"stage":true,"term":false,"terms_c":false,"approval_status":false,"invoice_status":false,"subtotal_tax_amount":false},"aow_actions":{"id":true,"name":true,"aow_workflow_id":false,"action_order":false,"action":false},"aow_workflow":{"id":true,"name":true,"flow_module":true,"flow_run_on":true,"status":false,"run_when":false,"condition_lines":false,"action_lines":false},"aow_processed":{"id":true,"name":true,"aow_workflow_id":false,"aow_workflow":false,"parent_id":false,"parent_type":false,"status":false},"aow_conditions":{"id":true,"name":true,"aow_workflow_id":false,"condition_order":false,"field":false,"operator":false,"value_type":false,"value":false},"jjwg_maps":{"id":true,"name":true,"distance":true,"unit_type":true,"module_type":true,"parent_name":true,"parent_type":false,"parent_id":false},"jjwg_markers":{"id":true,"name":true,"city":false,"state":false,"country":false,"jjwg_maps_lat":false,"jjwg_maps_lng":false,"marker_image":false},"jjwg_areas":{"id":true,"name":true,"city":false,"state":false,"country":false,"coordinates":false},"jjwg_address_cache":{"id":true,"name":true,"lat":true,"lng":true},"calls_reschedule":{"id":true,"name":true,"reason":false,"call_id":false,"call_name":false},"securitygroups":{"id":true,"name":true,"group_type":false,"parent_id":false},"templatesectionline":{"id":true,"name":true,"thumbnail":false,"grp":false,"ord":false},"oauth2tokens":{"id":true,"name":true,"token_is_revoked":true,"token_type":true,"access_token_expires":true,"access_token":true,"refresh_token":false,"refresh_token_expires":false,"grant_type":true,"state":false,"oauth2client_name":false},"oauth2clients":{"id":true,"name":true,"secret":true,"redirect_url":false,"is_confidential":true,"allowed_grant_type":true,"duration_value":true,"duration_amount":true,"duration_unit":true},"surveyresponses":{"id":true,"name":true},"surveys":{"id":true,"name":true,"status":false,"submit_text":false,"satisfied_text":false,"neither_text":false,"dissatisfied_text":false},"surveyquestionresponses":{"id":true,"name":true},"surveyquestions":{"id":true,"name":true,"sort_order":false,"type":false,"happiness_question":false},"surveyquestionoptions":{"id":true,"name":true,"sort_order":false},"responsibilityactivities":{"id":true,"name":true},"improvements":{"id":true,"name":true},"conclusions":{"id":true,"name":true},"problems":{"id":true,"name":true},"candidates":{"id":true,"last_name":true,"birthdate":true,"potential":false},"candidatures":{"id":true,"name":false,"reason_for_rejection":true,"scoring":false,"source":false,"status":false,"task_grade":false,"final_employment_form":false,"employment_form":false,"candidate_name":true,"recruitment_name":true,"recruitment_end_name":false},"costs":{"id":true,"name":true,"assigned_user_id":true,"type":true,"cost_amount":false,"cost_amount_usdollars":false,"currency_id":false,"cost_date":false,"cost_city":true,"accommodation_no":false,"type_of_meal":true},"delegations":{"id":true,"name":false,"assigned_user_name":true,"delegation_id":false,"purpose":true,"start_date":true,"end_date":true,"transport_cost":false,"transport_cost_usdollar":false,"transport_cost_eur":false,"currency_id":false,"regiments":false,"regiments_usdollar":false,"regiments_eur":false,"restaurant_bills":false,"accomodations":false,"total_accommodation":false,"total_accommodation_usdollar":false,"total_accommodation_eur":false,"accommodation_lump_sum":false,"accommodation_lump_sum_usdollar":false,"accommodation_lump_sum_eur":false,"other":false,"other_usdollar":false,"other_eur":false,"total_expenses":false,"total_expenses_usdollar":false,"total_expenses_eur":false,"obtained_sum":false,"obtained_sum_usdollar":false,"obtained_sum_eur":false,"payoff_sum":false,"payoff_sum_usdollar":false,"payoff_sum_eur":false,"return_sum":false,"return_sum_usdollar":false,"return_sum_usd":false,"regimen_value":false,"regimen_value_usdollar":false,"accommodation_value":false,"accommodation_value_usdollar":false,"obtained_sum_usdollars":false,"transport_cost_usd":false,"regiments_usd":false,"total_accommodation_usd":false,"accommodation_lump_sum_usd":false,"other_usd":false,"total_expenses_usd":false,"obtained_sum_usd":false,"payoff_sum_usd":false,"restaurant_bills_eur":false,"restaurant_bills_usd":false,"owner":false,"exchange_rate":true,"assured_number_of_breakfasts":true,"assured_number_of_dinners":true,"assured_number_of_suppers":true,"assured_number_of_accommodations":true,"costs_sum":true},"delegationslocale":{"id":true,"name":true,"regimen_value":true,"currency_id":false,"accommodation_value":true,"archival":false},"ideas":{"id":true,"name":true,"description":true,"assigned_user_name":true,"status":true,"explanation":false,"user_name":true},"positions":{"id":true,"name":true,"status":false},"recruitments":{"id":true,"name":false,"project_status":false,"start_date":true,"position_name":true,"recruitment_channels":false,"recruitment_type":true,"salary_from":true,"salary_from_usdollar":false,"salary_to":true,"salary_to_usdollar":false},"transportations":{"id":true,"name":true,"assigned_user_id":true,"from_city":true,"to_city":true,"type":true,"cost_total":false,"eur_total":false,"pln_total":false,"usd_total":false,"trans_date":false},"employeeroles":{"id":true,"name":true,"status":false},"benefits":{"id":true,"name":true},"responsibilities":{"id":true,"name":true},"spenttime":{"id":true,"name":true,"description":true,"date_start":true,"date_end":true,"work_date":true,"spent_time":true,"done_ratio":true,"remaining_hours":true,"current_done_ratio":false,"current_remaining_hours":false,"estimated_task_time":false,"worked_task_time":false,"workschedule_name":true},"workschedules":{"id":true,"name":true,"repeat_pane":false,"lp":false,"type":false,"status":false,"supervisor_acceptance":false,"schedule_date":false,"date_start":true,"date_end":true,"duration_minutes":false,"duration_hours":true,"spent_time":false,"spent_time_settlement":false,"delegation_duration":true,"comments":false,"time_tracking_pane":false,"occasional_leave_type":true},"workingmonths":{"id":true,"name":true,"year":true,"months":true,"working_days":true,"working_hours":true},"nonworkingdays":{"id":true,"name":true,"date":true,"week_day":true},"resources":{"id":true,"name":true,"type":true,"unavailable":false},"periodsofemployment":{"id":true,"name":true},"reservations":{"id":true,"name":true,"employee_name":true,"starting_date":true,"ending_date":true,"resource_name":true,"parent_name":false},"contracts":{"id":true,"name":true,"employee_name":true,"date_of_signing":false,"contract_starting_date":false,"contract_ending_date":false,"status":false,"contract_type":true,"daily_working_time":false},"":{"id":true,"name":true,"term_starting_date":true,"term_ending_date":false,"date_of_signing":false,"gross":false,"gross_usdollar":false,"currency_id":false,"net":false,"net_usdollar":false,"employer_cost":false,"employer_cost_usdollar":false,"contract_name":true,"position_name":true},"trainings":{"id":true,"name":true,"date_start":false,"date_end":false,"status":false,"training_type":false},"onboardingoffboardingelements":{"id":true,"name":true,"kind_of_element":true,"type":true,"task_duration_hours":true,"days_from_start":true,"user_name":true,"securitygroup_unit_name":true},"onboardingtemplates":{"id":true,"name":true},"offboardingtemplates":{"id":true,"name":true},"exitinterviews":{"id":true,"name":true,"date_start":false,"date_end":false,"status":false,"offboarding_name":false},"goals":{"id":true,"name":true,"date_start":false,"date_end":false,"status":false},"appraisals":{"id":true,"name":true,"date":false,"status":true,"type":true,"evaluator_name":true,"appraisal_items_inline":false},"appraisalitems":{"id":true,"name":true,"value":false,"parent_name":true,"parent_type":true,"parent_id":true,"appraisal_name":true,"competency_name":true,"knowledge_name":true,"skill_name":true,"attitude_name":true,"responsibiliti_name":true,"goal_name":true,"responsibilityactivitie_name":true},"onboardings":{"id":true,"name":true,"status":false,"date_start":false,"onboardingtemplate_name":false},"offboardings":{"id":true,"name":true,"status":false,"date_start":false,"offboardingtemplate_name":false},"competencyratings":{"id":true,"name":true,"rating":true,"competency_name":true,"parent_name":true},"competencies":{"id":true,"name":true},"careerpaths":{"id":true,"name":true,"position_from_name":true,"position_to_name":true},"news":{"id":true,"name":true,"content_of_announcement":false,"display_date":false,"news_type":true,"news_status":false,"publication_date":true},"usersnews":{"id":true,"name":true,"news_read":false,"not_display":false,"news_name":true},"certificates":{"id":true,"name":true},"applications":{"id":true,"name":true,"status":true,"type":true},"dashboardbackups":{"id":true,"name":true,"encoded_pages":false,"encoded_dashlets":false},"dashboardmanager":{"id":true,"name":true,"encoded_pages":false,"encoded_dashlets":false,"business_role":false},"dashboardhistory":{"id":true,"name":true},"kreports":{"id":true,"name":true},"schedulereports":{"id":true,"name":true,"frequency_performance":false,"active":false,"template_id":true,"email_template_id":true,"date_send":true,"kreport_name":true,"kreport_id":true},"schedulereportslogs":{"id":true,"name":true,"status":false,"execute_data":false},"ktemplates":{"id":true,"name":true,"template":false,"fields":false,"relatedmodule":true,"preview":false},"PDFTemplates":{"id":true,"name":true,"template":false,"fields":false,"relatedmodule":true,"type":true,"orientation":true,"preview":false},"skills":{"id":true,"name":true},"attitudes":{"id":true,"name":true},"knowledge":{"id":true,"name":true},"salaryranges":{"id":true,"name":true,"start_date":true,"gross_value_from":true,"gross_value_to":true,"currency_id":false,"net_value_from":true,"net_value_to":true,"employer_costs_from":true,"employer_costs_to":true,"position_name":true},"employeecertificates":{"id":true,"name":true,"employee_name":false,"status":false,"candidate_name":false,"certificate_name":true},"dictionaries":{"id":true,"name":true,"list_type":true}};window.viewTools.cache.formulaDuplicateFields=[];/* End of File /include/ViewTools/javascript/viewTools.cache.js */

var viewTools=window.viewTools;viewTools.form._save_button_selector='form input[id^=SAVE],form input[title="Zapisz"][class="button"],form input[title="Save"][class="button"],form input[id^="save"],form button[id^="save"],form div.buttons>input[type="button"][id="CLOSE_CREATE_HEADER"], .popupBody form[name^="form_QuickCreate"] div.buttons input[id$="save_button"]';viewTools.form.error_count=0;viewTools.form.validation_state=0;viewTools.form.prepareViewToolsValidation=function(){var save_button_handler=$(viewTools.form._save_button_selector);if(viewTools.form.validation_state!=0){return false;}
viewTools.form.validation_state=1;save_button_handler.attr('disabled','disabled');viewTools.GUI.fieldErrorUnmark();setTimeout(viewTools.form.startViewToolsValidation.call(this),20);};viewTools.form.startViewToolsValidation=function(){if(viewTools.form.validation_state!=1){return false;}
viewTools.form.validation_state=2;var save_button_handler=$(viewTools.form._save_button_selector);var form=$(this).closest('form');viewTools.form.error_count=0;if(viewTools.cache.requiredsToSetBeforeSave.length>0){$(viewTools.cache.requiredsToSetBeforeSave).each(function(){if(typeof this.isRequired!="undefined"){viewTools.form.setFieldRequirement(this.handler,this.isRequired);}else{viewTools.form.fieldChangeEvent(this.handler);}});viewTools.cache.requiredsToSetBeforeSave=[];}
var form_beforeSave=true;for(key in viewTools.cache.form_beforeSave_enforced){var tmp_function=viewTools.cache.form_beforeSave_enforced[key];if(tmp_function()===false){form_beforeSave=false;viewTools.form.error_count++;}}
var form_validation=viewTools.cache.form_save(form);var default_validation=check_form(form.attr('name'),'');if(form_validation===true&&default_validation===true){for(key in viewTools.cache.form_beforeSave){if(form_beforeSave===true){var tmp_function=viewTools.cache.form_beforeSave[key];if(tmp_function()===false){form_beforeSave=false;viewTools.form.error_count++;}}}
if(form_beforeSave===false){check_form(form.attr('name'),'');viewTools.form.focusOnFirstError();viewTools.form.onValidationEnd();return false;}
var form_afterSave=true;for(var key in viewTools.cache.form_afterSave){if(form_afterSave===true){var tmp_function=viewTools.cache.form_afterSave[key];if(tmp_function()===false){form_afterSave=false;viewTools.form.onValidationEnd();return false;}}}
var tmp_validation_function=viewTools.cache.save_action[form.attr('id')][this.id];if(tmp_validation_function===undefined){tmp_validation_function='';}
tmp_validation_function=tmp_validation_function.replace("(this.form) ? this.form : document.forms[0]",'$("#'+$(this).closest('form').attr('id')+'")[0]');try{eval('function tmp_form_validate(){ lastSubmitTime = 0;'+tmp_validation_function+';}');var result_of_validation=tmp_form_validate.call(this);}catch(e){console.log('vt_error[viewTools.init.js#103]: '+e);}
var onsubmit=form.onsubmit;if(result_of_validation!=false&&this.type=="submit"&&(typeof onsubmit!=="function"||onsubmit())){form.submit();}
viewTools.form.onValidationEnd();return false;}else{viewTools.form.focusOnFirstError();viewTools.form.onValidationEnd();return false;}};viewTools.form.onValidationEnd=function(){var save_button_handler=$(viewTools.form._save_button_selector);save_button_handler.removeAttr('disabled');if(viewTools.form.error_count>0){viewTools.GUI.statusBox.showStatus(SUGAR.language.get('app_strings','LBL_FORM_WITH_ERRORS'),'error',6000);}
setTimeout(function(){viewTools.form.validation_state=0;},20);};viewTools.form.calculateSelectors=function(){if($('.vt_formulaSelector').length>0){$('.vt_formulaSelector').each(function(){if($(this).data('modulename')===undefined&&$(this).hasClass('vt_formulaSelector')){viewTools.form.blur($(this),true);}});}};if(window.disable_vt_tools===undefined||window.disable_vt_tools===false){$(document).on('blur','.vt_formulaSelector',function(){viewTools.form.fieldChangeEvent(this);});$(document).on('change','select.vt_formulaSelector',function(){viewTools.form.fieldChangeEvent(this);});$(document).on('DOMNodeInserted',function(){if(viewTools.cache.form_save!==undefined){var disabled_buttons=['saved_search_submit'];var disabled_buttons_id=['wiz_submit_button','wiz_submit_button_perm'];var save_button_handler=$(viewTools.form._save_button_selector);save_button_handler.each(function(){if(!$(this).hasClass('vt_submit')&&$.inArray(this.name,disabled_buttons)<0&&$.inArray(this.id,disabled_buttons_id)<0){$(this).addClass('vt_submit');var form=$(this).closest('form').first();if(!form.hasClass('vt_form')){form.addClass('vt_form');}
if(viewTools.cache.save_action[form.attr('id')]===undefined){viewTools.cache.save_action[form.attr('id')]={};}
viewTools.cache.save_action[form.attr('id')][this.id]=$(this).attr('onclick');$(this).removeAttr('onclick');$(this).on('click',function(){viewTools.form.prepareViewToolsValidation.call(this);return false;});}});}
for(key in viewTools.cache.onAppear){var onAppear=viewTools.cache.onAppear[key];if($(onAppear.handler).length>0){onAppear.callback();delete viewTools.cache.onAppear[key];}}});$(document).on('click','button.vt_duplicate_btnback',function(){var editform=$('#vt_duplicate_message').parent().find('form').parent();if($('#vt_duplicate_message').parent().find('form').closest('form').hasClass('vt_CalendarEditView')){editform=$('#vt_duplicate_message').parent().find('form').parent().parent();$('div#cal-edit-buttons').fadeIn(300);}
$('#vt_duplicate_message').fadeOut(300,function(){editform.fadeIn(300);});});$(document).on('click','button.vt_duplicate_btnignore',function(){viewTools.cache.ignoreDuplicates=true;var form=$('.vt_formulaSelector').last().closest('form');if(form.hasClass('EditView')||form.attr('id')=='EditView'){$('input[id=SAVE]').last().trigger('click');}
else if(form.hasClass('CalendarEditView')){$('button[id="btn-save"]').last().trigger('click');}
else{form.find('div.action_buttons').first().find('input.button').first().trigger('click');}
$('button.vt_duplicate_btnback').trigger('click');});viewTools.form.save(function(){var ret=true;var formFields=null;if(arguments[0]!==undefined){formFields=arguments[0].find('.vt_formulaSelector');}else{formFields=$('.vt_formulaSelector');}
formFields.each(function(){window.viewTools.cache.AEM=[];if($(this).data('validation')!==undefined){if(!($('#ConvertLead').length>0&&$(this).closest('div[id^="create"]:hidden').length>0)){var validation_array=$(this).data('validation').split(';');for(var validation_idx in validation_array){formula=viewTools.formula._parseFormula(validation_array[validation_idx],$(this),'validation',validation_idx);if(eval(formula)==false){ret=false;viewTools.form.error_count++;if(window.viewTools.cache.AEM.length>0){for(key in window.viewTools.cache.AEM){window.viewTools.GUI.fieldErrorMark($(this),window.viewTools.cache.AEM[key]);}
window.viewTools.cache.AEM=[];}else{viewTools.GUI.fieldErrorFormulaMark($(this),'validation');}}}}}
if($(this).data('required')!==undefined){formula=viewTools.formula._parseFormula($(this).data('required'),$(this),'required');if(eval(formula)==true){if($(this).is(":visible")){viewTools.form.setFieldRequirement($(this),true);}}else{viewTools.form.setFieldRequirement($(this),false);}}
if($(this).data('readonly')!==undefined){formula=viewTools.formula._parseFormula($(this).data('readonly'),$(this),'readonly');if(eval(formula)==true){viewTools.form.setFieldReadonly($(this),true);}else{viewTools.form.setFieldReadonly($(this),false);}}});return ret;});}/* End of File /include/ViewTools/javascript/viewTools.init.js */

!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)Qc[d[b]]?d[b]=Qc[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/ 7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/ 864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a / 60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/ 15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e /=3:"year"===b&&(e /=12)):(d=this-f,e="second"===b?d / 1e3:"minute"===b?d / 6e4:"hour"===b?d / 36e5:"day"===b?(d-g)/ 864e5:"week"===b?(d-g)/ 6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/ 3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this / 1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/ 3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f / 1e3),i.seconds=a%60,b=p(a / 60),i.minutes=b%60,c=p(b / 60),i.hours=c%24,g+=p(c / 24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h / 12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a / 146097}function vc(a){return 146097*a / 4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d / 864e5,c=this._months+uc(b),"month"===a?c:c / 12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b / 7+d / 6048e5;case"day":return b+d / 864e5;case"hour":return 24*b+d / 36e5;case"minute":return 1440*b+d / 6e4;case"second":return 86400*b+d / 1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months / 12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/ 7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/ 1e3,e=me(this._days),f=me(this._months);a=p(d / 60),b=p(a / 60),d%=60,a%=60,c=p(f / 12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/ 100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/ 10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100 / 10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe});/* End of File /include/ViewTools/javascript/moment.min.js */

